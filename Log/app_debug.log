2025-10-10 04:20:29,193 - APP.services.mt5_service - DEBUG - Key levels nearby: [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 102527.9999999998}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 10873.000000000047}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 15239.999999999782}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 34483.99999999992}]
2025-10-10 04:20:29,252 - APP.services.mt5_service - DEBUG - Bắt đầu adr_stats cho symbol: XAUUSD, n: 20
2025-10-10 04:20:29,253 - APP.services.mt5_service - DEBUG - Kết thúc adr_stats. Kết quả: {'d5': 71.51500000000006, 'd10': 67.97180000000003, 'd20': 56.30675000000001}
2025-10-10 04:20:29,255 - APP.services.mt5_service - DEBUG - Prev day close: 3989.994
2025-10-10 04:20:29,256 - APP.services.mt5_service - DEBUG - Day range: 47.48799999999983, Day range % of ADR20: 84.33802341637517
2025-10-10 04:20:29,256 - APP.services.mt5_service - DEBUG - Position in day range: 0.17907681940700673
2025-10-10 04:20:29,257 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:20:29,257 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:20:29.257479+07:00
2025-10-10 04:20:29,257 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:20:29.257479+07:00
2025-10-10 04:20:29,258 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:20:29.257479+07:00 trong DST: True
2025-10-10 04:20:29,259 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:20:29,260 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:20:29,261 - APP.services.mt5_service - DEBUG - Killzone active: None, Mins to next killzone: 100
2025-10-10 04:20:29,285 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:29,286 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:29,286 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:29,313 - APP.services.mt5_service - DEBUG - Round levels: [{'level': '5000', 'price': 3955.5, 'distance_pips': 0.5}, {'level': '5025', 'price': 3955.503, 'distance_pips': 0.25}, {'level': '5050', 'price': 3955.505, 'distance_pips': 0.0}, {'level': '5075', 'price': 3955.508, 'distance_pips': 0.25}]
2025-10-10 04:20:29,322 - APP.services.mt5_service - DEBUG - ATR normalized spread: {'spread_as_pct_of_atr_m5': 0.7098205336063684}
2025-10-10 04:20:29,345 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:29,478 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:29,541 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:20:29,659 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3955.505
2025-10-10 04:20:29,676 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:20:29,682 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:20:29,685 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:29,688 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe H1.
2025-10-10 04:20:29,689 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 96 rates, lookback: 200
2025-10-10 04:20:29,691 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 96 rates, current_price: 3955.505
2025-10-10 04:20:29,693 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:20:29,694 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 96 rates, lookback: 100
2025-10-10 04:20:29,740 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:29,818 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M15.
2025-10-10 04:20:29,821 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 180 rates, lookback: 200
2025-10-10 04:20:29,822 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 180 rates, current_price: 3955.505
2025-10-10 04:20:29,824 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:20:29,824 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 180 rates, lookback: 100
2025-10-10 04:20:29,826 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:29,827 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M5.
2025-10-10 04:20:29,829 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:20:29,853 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3955.505
2025-10-10 04:20:29,886 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:20:29,887 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:20:29,889 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:29,890 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M1.
2025-10-10 04:20:29,891 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:29,892 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:29,895 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:20:29,919 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:20:29,947 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:20:29,948 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:20:29,952 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:20:29,953 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:20:29,953 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:20:29,954 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:20:29,954 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:20:29,954 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:20:29,955 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:20:29,956 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:20:29,956 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:20:29,956 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:20:29,957 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:20:29,957 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:20:29,958 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:29,959 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:29,959 - APP.services.mt5_service - DEBUG - Đã xây dựng payload MT5_DATA.
2025-10-10 04:20:29,960 - APP.utils.safe_data - DEBUG - Khởi tạo SafeData với data có: True
2025-10-10 04:20:29,960 - APP.services.mt5_service - DEBUG - Đã tạo SafeData object.
2025-10-10 04:20:29,961 - APP.services.mt5_service - DEBUG - Kết thúc build_context.
2025-10-10 04:20:29,962 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:20:29,989 - APP.core.trading.conditions - DEBUG - Bắt đầu kiểm tra các điều kiện NO-TRADE.
2025-10-10 04:20:29,990 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:29,991 - APP.utils.threading_utils - DEBUG - Task song song 'get_upcoming_events' hoàn tất thành công.
2025-10-10 04:20:29,991 - APP.services.mt5_service - DEBUG - Bắt đầu lấy lịch sử deals cho XAUUSD trong 7 ngày qua.
2025-10-10 04:20:29,991 - APP.utils.safe_data - DEBUG - Get top-level key 'tick': {'bid': 3955.505, 'ask': 3955.542, 'last': 0.0, 'time': 1760070028}
2025-10-10 04:20:29,995 - APP.services.mt5_service - DEBUG - Đã định dạng 82 deals cho XAUUSD.
2025-10-10 04:20:29,996 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: spread_current, default: None
2025-10-10 04:20:29,996 - APP.utils.threading_utils - DEBUG - Task song song 'get_history_deals' hoàn tất thành công.
2025-10-10 04:20:29,997 - APP.services.mt5_service - DEBUG - Tìm thấy key 'spread_current' trong dict. Giá trị: 37
2025-10-10 04:20:29,997 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:30,017 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:30,017 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:30,019 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:30,020 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:30,021 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:20:30,022 - APP.utils.safe_data - DEBUG - Get tick value 'bid': 3955.505
2025-10-10 04:20:30,022 - APP.utils.safe_data - DEBUG - Get top-level key 'key_levels_nearby': [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 102527.9999999998}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 10873.000000000047}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 15239.999999999782}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 34483.99999999992}]
2025-10-10 04:20:30,023 - APP.utils.threading_utils - DEBUG - Task song song 'check_no_trade_conditions' hoàn tất thành công.
2025-10-10 04:20:30,024 - APP.utils.threading_utils - DEBUG - Task 'chart.info' (group=chart.refresh) hoàn tất sau 1.87s
2025-10-10 04:20:30,092 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:30,092 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:20:30,093 - APP.utils.safe_data - DEBUG - Get top-level key 'account': {'balance': 164.34, 'equity': 164.34, 'free_margin': 164.34, 'currency': 'USD', 'leverage': 2000}
2025-10-10 04:20:30,096 - APP.utils.safe_data - DEBUG - Get top-level key 'positions': []
2025-10-10 04:20:30,098 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:20:30,158 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:30,158 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:30,160 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:20:30,161 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:20:30,162 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:30,163 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:20:30,163 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:30,164 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.00s
2025-10-10 04:20:30,191 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:20:30,192 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:20:30,193 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:20:30,193 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:20:30,194 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:20:30,195 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:20:30,195 - APP.services.mt5_service - DEBUG - Bắt đầu build_context cho symbol: XAUUSD
2025-10-10 04:20:30,196 - APP.services.mt5_service - DEBUG - Đã đảm bảo symbol 'XAUUSD' được chọn. Chờ 0.5s để đồng bộ.
2025-10-10 04:20:30,199 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:30,698 - APP.services.mt5_service - DEBUG - Đã lấy symbol info, account info, tick info.
2025-10-10 04:20:30,700 - APP.services.mt5_service - WARNING - Không thể xác định múi giờ từ TerminalInfo (thiếu thuộc tính hoặc rỗng), sử dụng UTC.
2025-10-10 04:20:30,700 - APP.services.mt5_service - DEBUG - Đã xây dựng info_obj, account_obj, rules_obj.
2025-10-10 04:20:30,701 - APP.services.mt5_service - DEBUG - Current price (cp): 3955.323
2025-10-10 04:20:30,707 - APP.services.mt5_service - DEBUG - Tick stats 5m: {'ticks_per_min': 392, 'median_spread': 37.0, 'p90_spread': 37}
2025-10-10 04:20:30,756 - APP.services.mt5_service - DEBUG - Tick stats 30m: {'ticks_per_min': 343, 'median_spread': 37.0, 'p90_spread': 37}
2025-10-10 04:20:30,769 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 120
2025-10-10 04:20:30,770 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:30,772 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 1.
2025-10-10 04:20:30,772 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:30,773 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 5, bars: 180
2025-10-10 04:20:30,774 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 5 ở lần thử 1.
2025-10-10 04:20:30,777 - APP.services.mt5_service - DEBUG - Đã lấy 180 bars cho XAUUSD 5.
2025-10-10 04:20:30,778 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:30,779 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 15, bars: 96
2025-10-10 04:20:30,780 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 15 ở lần thử 1.
2025-10-10 04:20:30,784 - APP.services.mt5_service - DEBUG - Đã lấy 96 bars cho XAUUSD 15.
2025-10-10 04:20:30,801 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:30,803 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 16385, bars: 120
2025-10-10 04:20:30,803 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 16385 ở lần thử 1.
2025-10-10 04:20:30,806 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 16385.
2025-10-10 04:20:30,807 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:30,807 - APP.services.mt5_service - DEBUG - Đã lấy OHLCV series cho các khung thời gian.
2025-10-10 04:20:30,808 - APP.services.mt5_service - DEBUG - Bắt đầu tính toán các mức khung thời gian lớn từ series H1.
2025-10-10 04:20:30,810 - APP.services.mt5_service - DEBUG - Đã lấy prev_day HL: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:20:30,811 - APP.services.mt5_service - DEBUG - Đã lấy prev_week HL: {'high': 3897.216, 'low': 3763.408}
2025-10-10 04:20:30,811 - APP.services.mt5_service - DEBUG - Đã tính toán xong các mức khung thời gian lớn.
2025-10-10 04:20:30,812 - APP.services.mt5_service - DEBUG - Đã enrich daily data: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}
2025-10-10 04:20:30,813 - APP.services.mt5_service - DEBUG - Bắt đầu session_ranges_today. M1 rates count: 120
2025-10-10 04:20:30,813 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:20:30,813 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:20:30.813697+07:00
2025-10-10 04:20:30,814 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:20:30.813697+07:00
2025-10-10 04:20:30,814 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:20:30.813697+07:00 trong DST: True
2025-10-10 04:20:30,816 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:20:30,836 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:20:30,837 - APP.services.mt5_service - DEBUG - Kết thúc session_ranges_today.
2025-10-10 04:20:30,839 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 120 rates.
2025-10-10 04:20:30,840 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3969.8126396404164
2025-10-10 04:20:30,843 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 39 rates.
2025-10-10 04:20:30,844 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3983.0204215041354
2025-10-10 04:20:30,844 - APP.services.mt5_service - DEBUG - Đã tính toán sessions, session liquidity và VWAPs: {'day': 3969.8126396404164, 'asia': None, 'london': None, 'newyork_am': None, 'newyork_pm': 3983.0204215041354}
2025-10-10 04:20:30,844 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:20:30,845 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3961.8411943053443
2025-10-10 04:20:30,845 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:20:30,846 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.34708213495
2025-10-10 04:20:30,847 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 50
2025-10-10 04:20:30,847 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.1268325810343
2025-10-10 04:20:30,848 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 200
2025-10-10 04:20:30,848 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3991.4113410333734
2025-10-10 04:20:30,849 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 50
2025-10-10 04:20:30,869 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3983.5783424014517
2025-10-10 04:20:30,870 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 200
2025-10-10 04:20:30,872 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 4010.016976296034
2025-10-10 04:20:30,872 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:20:30,873 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3998.5942633532795
2025-10-10 04:20:30,874 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:20:30,874 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3944.0793959815965
2025-10-10 04:20:30,875 - APP.services.mt5_service - DEBUG - Đã tính toán EMA: {'M1': {'ema50': 3961.8411943053443, 'ema200': 3973.34708213495}, 'M5': {'ema50': 3973.1268325810343, 'ema200': 3991.4113410333734}, 'M15': {'ema50': 3983.5783424014517, 'ema200': 4010.016976296034}, 'H1': {'ema50': 3998.5942633532795, 'ema200': 3944.0793959815965}}
2025-10-10 04:20:30,875 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 180 rates, period: 14
2025-10-10 04:20:30,875 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 5.21572804565834, TRs count: 179
2025-10-10 04:20:30,876 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:20:30,876 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 2.448388749836646, TRs count: 119
2025-10-10 04:20:30,876 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 96 rates, period: 14
2025-10-10 04:20:30,877 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 9.098558611333601, TRs count: 95
2025-10-10 04:20:30,878 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:20:30,879 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 18.80645617391291, TRs count: 119
2025-10-10 04:20:30,880 - APP.services.mt5_service - DEBUG - Đã tính toán ATR: {'M5': 5.21572804565834, 'M1': 2.448388749836646, 'M15': 9.098558611333601, 'H1': 18.80645617391291}
2025-10-10 04:20:30,880 - APP.services.mt5_service - DEBUG - Volatility regime: trending
2025-10-10 04:20:30,903 - APP.services.mt5_service - DEBUG - Bắt đầu _nearby_key_levels cho cp: 3955.323, daily: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}, prev_day: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:20:30,904 - APP.services.mt5_service - DEBUG - Thêm PDH: 4058.033
2025-10-10 04:20:30,905 - APP.services.mt5_service - DEBUG - Thêm PDL: 3944.632
2025-10-10 04:20:30,906 - APP.services.mt5_service - DEBUG - Thêm EQ50_D: 3970.745
2025-10-10 04:20:30,906 - APP.services.mt5_service - DEBUG - Thêm DO: 3989.989
2025-10-10 04:20:30,906 - APP.services.mt5_service - DEBUG - Key level: PDH, Price: 4058.033, Relation: ABOVE, Distance: 102710.00000000003
2025-10-10 04:20:30,908 - APP.services.mt5_service - DEBUG - Key level: PDL, Price: 3944.632, Relation: BELOW, Distance: 10690.999999999804
2025-10-10 04:20:30,908 - APP.services.mt5_service - DEBUG - Key level: EQ50_D, Price: 3970.745, Relation: ABOVE, Distance: 15422.000000000025
2025-10-10 04:20:30,908 - APP.services.mt5_service - DEBUG - Key level: DO, Price: 3989.989, Relation: ABOVE, Distance: 34666.00000000017
2025-10-10 04:20:30,909 - APP.services.mt5_service - DEBUG - Kết thúc _nearby_key_levels. Số key levels: 4
2025-10-10 04:20:30,909 - APP.services.mt5_service - DEBUG - Key levels nearby: [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 102710.00000000003}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 10690.999999999804}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 15422.000000000025}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 34666.00000000017}]
2025-10-10 04:20:30,909 - APP.services.mt5_service - DEBUG - Bắt đầu adr_stats cho symbol: XAUUSD, n: 20
2025-10-10 04:20:30,910 - APP.services.mt5_service - DEBUG - Kết thúc adr_stats. Kết quả: {'d5': 71.51500000000006, 'd10': 67.97180000000003, 'd20': 56.30675000000001}
2025-10-10 04:20:30,911 - APP.services.mt5_service - DEBUG - Prev day close: 3989.994
2025-10-10 04:20:30,911 - APP.services.mt5_service - DEBUG - Day range: 47.48799999999983, Day range % of ADR20: 84.33802341637517
2025-10-10 04:20:30,911 - APP.services.mt5_service - DEBUG - Position in day range: 0.17524427223719027
2025-10-10 04:20:30,912 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:20:30,912 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:20:30.912904+07:00
2025-10-10 04:20:30,913 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:20:30.912904+07:00
2025-10-10 04:20:30,913 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:20:30.912904+07:00 trong DST: True
2025-10-10 04:20:30,914 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:20:30,923 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:20:30,928 - APP.services.mt5_service - DEBUG - Killzone active: None, Mins to next killzone: 100
2025-10-10 04:20:30,933 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:30,933 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:30,934 - APP.services.mt5_service - DEBUG - Round levels: [{'level': '3200', 'price': 3955.32, 'distance_pips': 0.3}, {'level': '3225', 'price': 3955.323, 'distance_pips': 0.05}, {'level': '3250', 'price': 3955.325, 'distance_pips': 0.2}, {'level': '3275', 'price': 3955.328, 'distance_pips': 0.45}]
2025-10-10 04:20:30,935 - APP.services.mt5_service - DEBUG - ATR normalized spread: {'spread_as_pct_of_atr_m5': 0.7093928148930496}
2025-10-10 04:20:30,936 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:30,937 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:30,937 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:20:30,938 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3955.323
2025-10-10 04:20:30,939 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:20:30,939 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:20:30,940 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:30,940 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe H1.
2025-10-10 04:20:30,941 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 96 rates, lookback: 200
2025-10-10 04:20:30,941 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 96 rates, current_price: 3955.323
2025-10-10 04:20:30,942 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:20:30,942 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 96 rates, lookback: 100
2025-10-10 04:20:30,943 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:30,944 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M15.
2025-10-10 04:20:30,944 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 180 rates, lookback: 200
2025-10-10 04:20:30,945 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 180 rates, current_price: 3955.323
2025-10-10 04:20:30,947 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:20:30,947 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 180 rates, lookback: 100
2025-10-10 04:20:30,948 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:30,952 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M5.
2025-10-10 04:20:30,972 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:20:30,974 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3955.323
2025-10-10 04:20:30,975 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:20:30,975 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:20:30,976 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:30,977 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M1.
2025-10-10 04:20:30,977 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:30,978 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:30,978 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:20:30,978 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:20:30,979 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:20:30,979 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:20:30,979 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:20:30,980 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:20:30,980 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:20:30,981 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:20:30,981 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:20:30,982 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:20:31,006 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:20:31,007 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:20:31,008 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:20:31,009 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:20:31,009 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:20:31,010 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:20:31,011 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:31,012 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:31,012 - APP.services.mt5_service - DEBUG - Đã xây dựng payload MT5_DATA.
2025-10-10 04:20:31,012 - APP.utils.safe_data - DEBUG - Khởi tạo SafeData với data có: True
2025-10-10 04:20:31,013 - APP.services.mt5_service - DEBUG - Đã tạo SafeData object.
2025-10-10 04:20:31,014 - APP.services.mt5_service - DEBUG - Kết thúc build_context.
2025-10-10 04:20:31,015 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:20:31,016 - APP.core.trading.conditions - DEBUG - Bắt đầu kiểm tra các điều kiện NO-TRADE.
2025-10-10 04:20:31,042 - APP.utils.threading_utils - DEBUG - Task song song 'get_upcoming_events' hoàn tất thành công.
2025-10-10 04:20:31,042 - APP.services.mt5_service - DEBUG - Bắt đầu lấy lịch sử deals cho XAUUSD trong 7 ngày qua.
2025-10-10 04:20:31,043 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:31,046 - APP.services.mt5_service - DEBUG - Đã định dạng 82 deals cho XAUUSD.
2025-10-10 04:20:31,047 - APP.utils.safe_data - DEBUG - Get top-level key 'tick': {'bid': 3955.323, 'ask': 3955.36, 'last': 0.0, 'time': 1760070029}
2025-10-10 04:20:31,048 - APP.utils.threading_utils - DEBUG - Task song song 'get_history_deals' hoàn tất thành công.
2025-10-10 04:20:31,048 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: spread_current, default: None
2025-10-10 04:20:31,065 - APP.services.mt5_service - DEBUG - Tìm thấy key 'spread_current' trong dict. Giá trị: 37
2025-10-10 04:20:31,066 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:31,068 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:31,068 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:31,069 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:31,069 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:31,070 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:20:31,071 - APP.utils.safe_data - DEBUG - Get tick value 'bid': 3955.323
2025-10-10 04:20:31,071 - APP.utils.safe_data - DEBUG - Get top-level key 'key_levels_nearby': [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 102710.00000000003}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 10690.999999999804}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 15422.000000000025}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 34666.00000000017}]
2025-10-10 04:20:31,072 - APP.utils.threading_utils - DEBUG - Task song song 'check_no_trade_conditions' hoàn tất thành công.
2025-10-10 04:20:31,073 - APP.utils.threading_utils - DEBUG - Task 'chart.info' (group=chart.refresh) hoàn tất sau 0.91s
2025-10-10 04:20:31,162 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:31,163 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:31,164 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:20:31,165 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:20:31,166 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:31,168 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:20:31,168 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:31,169 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.00s
2025-10-10 04:20:31,174 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:20:31,176 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:31,195 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:20:31,197 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:20:31,197 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:20:31,198 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:20:31,198 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:20:31,200 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:20:31,201 - APP.utils.safe_data - DEBUG - Get top-level key 'account': {'balance': 164.34, 'equity': 164.34, 'free_margin': 164.34, 'currency': 'USD', 'leverage': 2000}
2025-10-10 04:20:31,201 - APP.services.mt5_service - DEBUG - Bắt đầu build_context cho symbol: XAUUSD
2025-10-10 04:20:31,225 - APP.services.mt5_service - DEBUG - Đã đảm bảo symbol 'XAUUSD' được chọn. Chờ 0.5s để đồng bộ.
2025-10-10 04:20:31,227 - APP.utils.safe_data - DEBUG - Get top-level key 'positions': []
2025-10-10 04:20:31,257 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:20:31,259 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:31,726 - APP.services.mt5_service - DEBUG - Đã lấy symbol info, account info, tick info.
2025-10-10 04:20:31,728 - APP.services.mt5_service - WARNING - Không thể xác định múi giờ từ TerminalInfo (thiếu thuộc tính hoặc rỗng), sử dụng UTC.
2025-10-10 04:20:31,728 - APP.services.mt5_service - DEBUG - Đã xây dựng info_obj, account_obj, rules_obj.
2025-10-10 04:20:31,729 - APP.services.mt5_service - DEBUG - Current price (cp): 3955.392
2025-10-10 04:20:31,735 - APP.services.mt5_service - DEBUG - Tick stats 5m: {'ticks_per_min': 391, 'median_spread': 37.0, 'p90_spread': 37}
2025-10-10 04:20:31,779 - APP.services.mt5_service - DEBUG - Tick stats 30m: {'ticks_per_min': 343, 'median_spread': 37.0, 'p90_spread': 37}
2025-10-10 04:20:31,780 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 120
2025-10-10 04:20:31,781 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:31,800 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 1.
2025-10-10 04:20:31,802 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:31,802 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 5, bars: 180
2025-10-10 04:20:31,803 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 5 ở lần thử 1.
2025-10-10 04:20:31,806 - APP.services.mt5_service - DEBUG - Đã lấy 180 bars cho XAUUSD 5.
2025-10-10 04:20:31,807 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:31,807 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 15, bars: 96
2025-10-10 04:20:31,807 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 15 ở lần thử 1.
2025-10-10 04:20:31,810 - APP.services.mt5_service - DEBUG - Đã lấy 96 bars cho XAUUSD 15.
2025-10-10 04:20:31,810 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:31,810 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 16385, bars: 120
2025-10-10 04:20:31,811 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 16385 ở lần thử 1.
2025-10-10 04:20:31,824 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 16385.
2025-10-10 04:20:31,840 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:31,841 - APP.services.mt5_service - DEBUG - Đã lấy OHLCV series cho các khung thời gian.
2025-10-10 04:20:31,842 - APP.services.mt5_service - DEBUG - Bắt đầu tính toán các mức khung thời gian lớn từ series H1.
2025-10-10 04:20:31,845 - APP.services.mt5_service - DEBUG - Đã lấy prev_day HL: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:20:31,845 - APP.services.mt5_service - DEBUG - Đã lấy prev_week HL: {'high': 3897.216, 'low': 3763.408}
2025-10-10 04:20:31,846 - APP.services.mt5_service - DEBUG - Đã tính toán xong các mức khung thời gian lớn.
2025-10-10 04:20:31,846 - APP.services.mt5_service - DEBUG - Đã enrich daily data: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}
2025-10-10 04:20:31,846 - APP.services.mt5_service - DEBUG - Bắt đầu session_ranges_today. M1 rates count: 120
2025-10-10 04:20:31,847 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:20:31,847 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:20:31.847535+07:00
2025-10-10 04:20:31,847 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:20:31.847535+07:00
2025-10-10 04:20:31,848 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:20:31.847535+07:00 trong DST: True
2025-10-10 04:20:31,849 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:20:31,849 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:20:31,850 - APP.services.mt5_service - DEBUG - Kết thúc session_ranges_today.
2025-10-10 04:20:31,853 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 120 rates.
2025-10-10 04:20:31,873 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3969.8119175924317
2025-10-10 04:20:31,879 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 39 rates.
2025-10-10 04:20:31,879 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3983.0204215041354
2025-10-10 04:20:31,880 - APP.services.mt5_service - DEBUG - Đã tính toán sessions, session liquidity và VWAPs: {'day': 3969.8119175924317, 'asia': None, 'london': None, 'newyork_am': None, 'newyork_pm': 3983.0204215041354}
2025-10-10 04:20:31,880 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:20:31,881 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3961.843900187697
2025-10-10 04:20:31,882 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:20:31,882 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.3477687021145
2025-10-10 04:20:31,883 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 50
2025-10-10 04:20:31,883 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.129538463387
2025-10-10 04:20:31,904 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 200
2025-10-10 04:20:31,905 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3991.412027600538
2025-10-10 04:20:31,905 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 50
2025-10-10 04:20:31,907 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3983.581048283804
2025-10-10 04:20:31,907 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 200
2025-10-10 04:20:31,907 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 4010.0176628631984
2025-10-10 04:20:31,908 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:20:31,908 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3998.5969692356325
2025-10-10 04:20:31,909 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:20:31,909 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3944.080082548761
2025-10-10 04:20:31,910 - APP.services.mt5_service - DEBUG - Đã tính toán EMA: {'M1': {'ema50': 3961.843900187697, 'ema200': 3973.3477687021145}, 'M5': {'ema50': 3973.129538463387, 'ema200': 3991.412027600538}, 'M15': {'ema50': 3983.581048283804, 'ema200': 4010.0176628631984}, 'H1': {'ema50': 3998.5969692356325, 'ema200': 3944.080082548761}}
2025-10-10 04:20:31,910 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 180 rates, period: 14
2025-10-10 04:20:31,911 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 5.21572804565834, TRs count: 179
2025-10-10 04:20:31,911 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:20:31,912 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 2.448388749836646, TRs count: 119
2025-10-10 04:20:31,912 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 96 rates, period: 14
2025-10-10 04:20:31,913 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 9.098558611333601, TRs count: 95
2025-10-10 04:20:31,914 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:20:31,916 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 18.80645617391291, TRs count: 119
2025-10-10 04:20:31,917 - APP.services.mt5_service - DEBUG - Đã tính toán ATR: {'M5': 5.21572804565834, 'M1': 2.448388749836646, 'M15': 9.098558611333601, 'H1': 18.80645617391291}
2025-10-10 04:20:31,938 - APP.services.mt5_service - DEBUG - Volatility regime: trending
2025-10-10 04:20:31,940 - APP.services.mt5_service - DEBUG - Bắt đầu _nearby_key_levels cho cp: 3955.392, daily: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}, prev_day: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:20:31,940 - APP.services.mt5_service - DEBUG - Thêm PDH: 4058.033
2025-10-10 04:20:31,941 - APP.services.mt5_service - DEBUG - Thêm PDL: 3944.632
2025-10-10 04:20:31,942 - APP.services.mt5_service - DEBUG - Thêm EQ50_D: 3970.745
2025-10-10 04:20:31,942 - APP.services.mt5_service - DEBUG - Thêm DO: 3989.989
2025-10-10 04:20:31,966 - APP.services.mt5_service - DEBUG - Key level: PDH, Price: 4058.033, Relation: ABOVE, Distance: 102641.00000000007
2025-10-10 04:20:31,967 - APP.services.mt5_service - DEBUG - Key level: PDL, Price: 3944.632, Relation: BELOW, Distance: 10759.999999999764
2025-10-10 04:20:31,967 - APP.services.mt5_service - DEBUG - Key level: EQ50_D, Price: 3970.745, Relation: ABOVE, Distance: 15353.000000000065
2025-10-10 04:20:31,968 - APP.services.mt5_service - DEBUG - Key level: DO, Price: 3989.989, Relation: ABOVE, Distance: 34597.000000000204
2025-10-10 04:20:31,969 - APP.services.mt5_service - DEBUG - Kết thúc _nearby_key_levels. Số key levels: 4
2025-10-10 04:20:31,969 - APP.services.mt5_service - DEBUG - Key levels nearby: [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 102641.00000000007}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 10759.999999999764}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 15353.000000000065}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 34597.000000000204}]
2025-10-10 04:20:31,992 - APP.services.mt5_service - DEBUG - Bắt đầu adr_stats cho symbol: XAUUSD, n: 20
2025-10-10 04:20:31,993 - APP.services.mt5_service - DEBUG - Kết thúc adr_stats. Kết quả: {'d5': 71.51500000000006, 'd10': 67.97180000000003, 'd20': 56.30675000000001}
2025-10-10 04:20:31,995 - APP.services.mt5_service - DEBUG - Prev day close: 3989.994
2025-10-10 04:20:31,995 - APP.services.mt5_service - DEBUG - Day range: 47.48799999999983, Day range % of ADR20: 84.33802341637517
2025-10-10 04:20:31,995 - APP.services.mt5_service - DEBUG - Position in day range: 0.17669727088948053
2025-10-10 04:20:31,996 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:20:31,996 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:20:31.996590+07:00
2025-10-10 04:20:31,997 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:20:31.996590+07:00
2025-10-10 04:20:31,997 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:20:31.996590+07:00 trong DST: True
2025-10-10 04:20:31,997 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:20:31,998 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:20:31,998 - APP.services.mt5_service - DEBUG - Killzone active: None, Mins to next killzone: 100
2025-10-10 04:20:31,999 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:32,000 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:32,000 - APP.services.mt5_service - DEBUG - Round levels: [{'level': '3900', 'price': 3955.39, 'distance_pips': 0.2}, {'level': '3925', 'price': 3955.392, 'distance_pips': 0.05}, {'level': '3950', 'price': 3955.395, 'distance_pips': 0.3}, {'level': '3975', 'price': 3955.398, 'distance_pips': 0.55}]
2025-10-10 04:20:32,001 - APP.services.mt5_service - DEBUG - ATR normalized spread: {'spread_as_pct_of_atr_m5': 0.7093928148930496}
2025-10-10 04:20:32,001 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:32,001 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:32,022 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:20:32,023 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3955.392
2025-10-10 04:20:32,025 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:20:32,025 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:20:32,026 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:32,027 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe H1.
2025-10-10 04:20:32,027 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 96 rates, lookback: 200
2025-10-10 04:20:32,028 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 96 rates, current_price: 3955.392
2025-10-10 04:20:32,029 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:20:32,029 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 96 rates, lookback: 100
2025-10-10 04:20:32,030 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:32,030 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M15.
2025-10-10 04:20:32,031 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 180 rates, lookback: 200
2025-10-10 04:20:32,032 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 180 rates, current_price: 3955.392
2025-10-10 04:20:32,033 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:20:32,034 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 180 rates, lookback: 100
2025-10-10 04:20:32,043 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:32,060 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M5.
2025-10-10 04:20:32,061 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:20:32,062 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3955.392
2025-10-10 04:20:32,062 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:20:32,063 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:20:32,064 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:32,064 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M1.
2025-10-10 04:20:32,065 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:32,065 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:32,066 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:20:32,068 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:20:32,068 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:20:32,068 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:20:32,069 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:20:32,093 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:20:32,095 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:20:32,095 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:20:32,096 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:20:32,097 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:20:32,097 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:20:32,098 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:20:32,099 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:20:32,100 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:20:32,101 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:20:32,101 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:20:32,102 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:32,129 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:32,130 - APP.services.mt5_service - DEBUG - Đã xây dựng payload MT5_DATA.
2025-10-10 04:20:32,131 - APP.utils.safe_data - DEBUG - Khởi tạo SafeData với data có: True
2025-10-10 04:20:32,131 - APP.services.mt5_service - DEBUG - Đã tạo SafeData object.
2025-10-10 04:20:32,132 - APP.services.mt5_service - DEBUG - Kết thúc build_context.
2025-10-10 04:20:32,134 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:20:32,158 - APP.core.trading.conditions - DEBUG - Bắt đầu kiểm tra các điều kiện NO-TRADE.
2025-10-10 04:20:32,161 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:32,161 - APP.utils.threading_utils - DEBUG - Task song song 'get_upcoming_events' hoàn tất thành công.
2025-10-10 04:20:32,161 - APP.services.mt5_service - DEBUG - Bắt đầu lấy lịch sử deals cho XAUUSD trong 7 ngày qua.
2025-10-10 04:20:32,161 - APP.utils.safe_data - DEBUG - Get top-level key 'tick': {'bid': 3955.392, 'ask': 3955.429, 'last': 0.0, 'time': 1760070031}
2025-10-10 04:20:32,164 - APP.services.mt5_service - DEBUG - Đã định dạng 82 deals cho XAUUSD.
2025-10-10 04:20:32,165 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:32,167 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: spread_current, default: None
2025-10-10 04:20:32,168 - APP.utils.threading_utils - DEBUG - Task song song 'get_history_deals' hoàn tất thành công.
2025-10-10 04:20:32,172 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:20:32,179 - APP.services.mt5_service - DEBUG - Tìm thấy key 'spread_current' trong dict. Giá trị: 37
2025-10-10 04:20:32,186 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:32,188 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:32,189 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:20:32,190 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:32,191 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:32,192 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:32,192 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.02s
2025-10-10 04:20:32,193 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:32,194 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:32,194 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:20:32,194 - APP.utils.safe_data - DEBUG - Get tick value 'bid': 3955.392
2025-10-10 04:20:32,195 - APP.utils.safe_data - DEBUG - Get top-level key 'key_levels_nearby': [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 102641.00000000007}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 10759.999999999764}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 15353.000000000065}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 34597.000000000204}]
2025-10-10 04:20:32,196 - APP.utils.threading_utils - DEBUG - Task song song 'check_no_trade_conditions' hoàn tất thành công.
2025-10-10 04:20:32,197 - APP.utils.threading_utils - DEBUG - Task 'chart.info' (group=chart.refresh) hoàn tất sau 1.03s
2025-10-10 04:20:32,226 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:32,355 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:32,357 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:20:32,358 - APP.utils.safe_data - DEBUG - Get top-level key 'account': {'balance': 164.34, 'equity': 164.34, 'free_margin': 164.34, 'currency': 'USD', 'leverage': 2000}
2025-10-10 04:20:32,359 - APP.utils.safe_data - DEBUG - Get top-level key 'positions': []
2025-10-10 04:20:32,361 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:20:33,173 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:33,174 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:33,175 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:20:33,177 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:20:33,178 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:33,179 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:20:33,179 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:33,180 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.00s
2025-10-10 04:20:33,209 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:20:33,209 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:20:33,210 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:20:33,210 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:20:33,211 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:20:33,212 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:20:33,212 - APP.services.mt5_service - DEBUG - Bắt đầu build_context cho symbol: XAUUSD
2025-10-10 04:20:33,213 - APP.services.mt5_service - DEBUG - Đã đảm bảo symbol 'XAUUSD' được chọn. Chờ 0.5s để đồng bộ.
2025-10-10 04:20:33,236 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:33,714 - APP.services.mt5_service - DEBUG - Đã lấy symbol info, account info, tick info.
2025-10-10 04:20:33,716 - APP.services.mt5_service - WARNING - Không thể xác định múi giờ từ TerminalInfo (thiếu thuộc tính hoặc rỗng), sử dụng UTC.
2025-10-10 04:20:33,716 - APP.services.mt5_service - DEBUG - Đã xây dựng info_obj, account_obj, rules_obj.
2025-10-10 04:20:33,717 - APP.services.mt5_service - DEBUG - Current price (cp): 3955.643
2025-10-10 04:20:33,723 - APP.services.mt5_service - DEBUG - Tick stats 5m: {'ticks_per_min': 382, 'median_spread': 37, 'p90_spread': 37}
2025-10-10 04:20:33,766 - APP.services.mt5_service - DEBUG - Tick stats 30m: {'ticks_per_min': 343, 'median_spread': 37, 'p90_spread': 37}
2025-10-10 04:20:33,767 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 120
2025-10-10 04:20:33,767 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:33,770 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 1.
2025-10-10 04:20:33,771 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:33,771 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 5, bars: 180
2025-10-10 04:20:33,790 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 5 ở lần thử 1.
2025-10-10 04:20:33,795 - APP.services.mt5_service - DEBUG - Đã lấy 180 bars cho XAUUSD 5.
2025-10-10 04:20:33,795 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:33,796 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 15, bars: 96
2025-10-10 04:20:33,796 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 15 ở lần thử 1.
2025-10-10 04:20:33,798 - APP.services.mt5_service - DEBUG - Đã lấy 96 bars cho XAUUSD 15.
2025-10-10 04:20:33,798 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:33,799 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 16385, bars: 120
2025-10-10 04:20:33,799 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 16385 ở lần thử 1.
2025-10-10 04:20:33,801 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 16385.
2025-10-10 04:20:33,802 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:33,802 - APP.services.mt5_service - DEBUG - Đã lấy OHLCV series cho các khung thời gian.
2025-10-10 04:20:33,802 - APP.services.mt5_service - DEBUG - Bắt đầu tính toán các mức khung thời gian lớn từ series H1.
2025-10-10 04:20:33,804 - APP.services.mt5_service - DEBUG - Đã lấy prev_day HL: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:20:33,805 - APP.services.mt5_service - DEBUG - Đã lấy prev_week HL: {'high': 3897.216, 'low': 3763.408}
2025-10-10 04:20:33,806 - APP.services.mt5_service - DEBUG - Đã tính toán xong các mức khung thời gian lớn.
2025-10-10 04:20:33,807 - APP.services.mt5_service - DEBUG - Đã enrich daily data: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}
2025-10-10 04:20:33,828 - APP.services.mt5_service - DEBUG - Bắt đầu session_ranges_today. M1 rates count: 120
2025-10-10 04:20:33,829 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:20:33,832 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:20:33.832149+07:00
2025-10-10 04:20:33,832 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:20:33.832149+07:00
2025-10-10 04:20:33,833 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:20:33.832149+07:00 trong DST: True
2025-10-10 04:20:33,833 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:20:33,833 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:20:33,834 - APP.services.mt5_service - DEBUG - Kết thúc session_ranges_today.
2025-10-10 04:20:33,835 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 120 rates.
2025-10-10 04:20:33,836 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3969.8028104537557
2025-10-10 04:20:33,840 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 39 rates.
2025-10-10 04:20:33,852 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3983.0204215041354
2025-10-10 04:20:33,860 - APP.services.mt5_service - DEBUG - Đã tính toán sessions, session liquidity và VWAPs: {'day': 3969.8028104537557, 'asia': None, 'london': None, 'newyork_am': None, 'newyork_pm': 3983.0204215041354}
2025-10-10 04:20:33,862 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:20:33,862 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3961.853743324952
2025-10-10 04:20:33,863 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:20:33,863 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.350266214552
2025-10-10 04:20:33,864 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 50
2025-10-10 04:20:33,864 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.139381600642
2025-10-10 04:20:33,865 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 200
2025-10-10 04:20:33,865 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3991.4145251129753
2025-10-10 04:20:33,866 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 50
2025-10-10 04:20:33,866 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3983.5908914210595
2025-10-10 04:20:33,866 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 200
2025-10-10 04:20:33,867 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 4010.020160375636
2025-10-10 04:20:33,867 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:20:33,868 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3998.606812372888
2025-10-10 04:20:33,868 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:20:33,869 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3944.0825800611983
2025-10-10 04:20:33,869 - APP.services.mt5_service - DEBUG - Đã tính toán EMA: {'M1': {'ema50': 3961.853743324952, 'ema200': 3973.350266214552}, 'M5': {'ema50': 3973.139381600642, 'ema200': 3991.4145251129753}, 'M15': {'ema50': 3983.5908914210595, 'ema200': 4010.020160375636}, 'H1': {'ema50': 3998.606812372888, 'ema200': 3944.0825800611983}}
2025-10-10 04:20:33,870 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 180 rates, period: 14
2025-10-10 04:20:33,870 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 5.219299474229781, TRs count: 179
2025-10-10 04:20:33,871 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:20:33,872 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 2.4519601784080876, TRs count: 119
2025-10-10 04:20:33,873 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 96 rates, period: 14
2025-10-10 04:20:33,873 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 9.098558611333601, TRs count: 95
2025-10-10 04:20:33,874 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:20:33,892 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 18.80645617391291, TRs count: 119
2025-10-10 04:20:33,897 - APP.services.mt5_service - DEBUG - Đã tính toán ATR: {'M5': 5.219299474229781, 'M1': 2.4519601784080876, 'M15': 9.098558611333601, 'H1': 18.80645617391291}
2025-10-10 04:20:33,898 - APP.services.mt5_service - DEBUG - Volatility regime: trending
2025-10-10 04:20:33,899 - APP.services.mt5_service - DEBUG - Bắt đầu _nearby_key_levels cho cp: 3955.643, daily: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}, prev_day: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:20:33,899 - APP.services.mt5_service - DEBUG - Thêm PDH: 4058.033
2025-10-10 04:20:33,899 - APP.services.mt5_service - DEBUG - Thêm PDL: 3944.632
2025-10-10 04:20:33,900 - APP.services.mt5_service - DEBUG - Thêm EQ50_D: 3970.745
2025-10-10 04:20:33,900 - APP.services.mt5_service - DEBUG - Thêm DO: 3989.989
2025-10-10 04:20:33,900 - APP.services.mt5_service - DEBUG - Key level: PDH, Price: 4058.033, Relation: ABOVE, Distance: 102389.99999999987
2025-10-10 04:20:33,901 - APP.services.mt5_service - DEBUG - Key level: PDL, Price: 3944.632, Relation: BELOW, Distance: 11010.999999999967
2025-10-10 04:20:33,901 - APP.services.mt5_service - DEBUG - Key level: EQ50_D, Price: 3970.745, Relation: ABOVE, Distance: 15101.999999999862
2025-10-10 04:20:33,902 - APP.services.mt5_service - DEBUG - Key level: DO, Price: 3989.989, Relation: ABOVE, Distance: 34346.0
2025-10-10 04:20:33,902 - APP.services.mt5_service - DEBUG - Kết thúc _nearby_key_levels. Số key levels: 4
2025-10-10 04:20:33,902 - APP.services.mt5_service - DEBUG - Key levels nearby: [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 102389.99999999987}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11010.999999999967}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 15101.999999999862}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 34346.0}]
2025-10-10 04:20:33,903 - APP.services.mt5_service - DEBUG - Bắt đầu adr_stats cho symbol: XAUUSD, n: 20
2025-10-10 04:20:33,903 - APP.services.mt5_service - DEBUG - Kết thúc adr_stats. Kết quả: {'d5': 71.51500000000006, 'd10': 67.97180000000003, 'd20': 56.30675000000001}
2025-10-10 04:20:33,905 - APP.services.mt5_service - DEBUG - Prev day close: 3989.994
2025-10-10 04:20:33,906 - APP.services.mt5_service - DEBUG - Day range: 47.48799999999983, Day range % of ADR20: 84.33802341637517
2025-10-10 04:20:33,906 - APP.services.mt5_service - DEBUG - Position in day range: 0.18198281671158728
2025-10-10 04:20:33,907 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:20:33,907 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:20:33.907479+07:00
2025-10-10 04:20:33,911 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:20:33.907479+07:00
2025-10-10 04:20:33,925 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:20:33.907479+07:00 trong DST: True
2025-10-10 04:20:33,927 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:20:33,928 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:20:33,929 - APP.services.mt5_service - DEBUG - Killzone active: None, Mins to next killzone: 100
2025-10-10 04:20:33,929 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:33,929 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:33,930 - APP.services.mt5_service - DEBUG - Round levels: [{'level': '6400', 'price': 3955.64, 'distance_pips': 0.3}, {'level': '6425', 'price': 3955.642, 'distance_pips': 0.05}, {'level': '6450', 'price': 3955.645, 'distance_pips': 0.2}, {'level': '6475', 'price': 3955.648, 'distance_pips': 0.45}]
2025-10-10 04:20:33,930 - APP.services.mt5_service - DEBUG - ATR normalized spread: {'spread_as_pct_of_atr_m5': 0.7089073961456739}
2025-10-10 04:20:33,931 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:33,931 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:33,931 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:20:33,933 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3955.643
2025-10-10 04:20:33,933 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:20:33,934 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:20:33,935 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:33,935 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe H1.
2025-10-10 04:20:33,936 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 96 rates, lookback: 200
2025-10-10 04:20:33,937 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 96 rates, current_price: 3955.643
2025-10-10 04:20:33,937 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:20:33,938 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 96 rates, lookback: 100
2025-10-10 04:20:33,938 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:33,939 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M15.
2025-10-10 04:20:33,940 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 180 rates, lookback: 200
2025-10-10 04:20:33,940 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 180 rates, current_price: 3955.643
2025-10-10 04:20:33,941 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:20:33,964 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 180 rates, lookback: 100
2025-10-10 04:20:33,965 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:33,966 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M5.
2025-10-10 04:20:33,968 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:20:33,968 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3955.643
2025-10-10 04:20:33,969 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:20:33,969 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:20:33,970 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:33,971 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M1.
2025-10-10 04:20:33,971 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:33,972 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:33,973 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:20:33,973 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:20:33,973 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:20:33,974 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:20:33,997 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:20:34,002 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:20:34,004 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:20:34,005 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:20:34,006 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:20:34,007 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:20:34,007 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:20:34,008 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:20:34,008 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:20:34,008 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:20:34,009 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:20:34,034 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:20:34,035 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:34,036 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:34,036 - APP.services.mt5_service - DEBUG - Đã xây dựng payload MT5_DATA.
2025-10-10 04:20:34,037 - APP.utils.safe_data - DEBUG - Khởi tạo SafeData với data có: True
2025-10-10 04:20:34,037 - APP.services.mt5_service - DEBUG - Đã tạo SafeData object.
2025-10-10 04:20:34,037 - APP.services.mt5_service - DEBUG - Kết thúc build_context.
2025-10-10 04:20:34,038 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:20:34,040 - APP.core.trading.conditions - DEBUG - Bắt đầu kiểm tra các điều kiện NO-TRADE.
2025-10-10 04:20:34,041 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:34,050 - APP.utils.threading_utils - DEBUG - Task song song 'get_upcoming_events' hoàn tất thành công.
2025-10-10 04:20:34,060 - APP.services.mt5_service - DEBUG - Bắt đầu lấy lịch sử deals cho XAUUSD trong 7 ngày qua.
2025-10-10 04:20:34,070 - APP.utils.safe_data - DEBUG - Get top-level key 'tick': {'bid': 3955.643, 'ask': 3955.68, 'last': 0.0, 'time': 1760070033}
2025-10-10 04:20:34,075 - APP.services.mt5_service - DEBUG - Đã định dạng 82 deals cho XAUUSD.
2025-10-10 04:20:34,097 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: spread_current, default: None
2025-10-10 04:20:34,098 - APP.utils.threading_utils - DEBUG - Task song song 'get_history_deals' hoàn tất thành công.
2025-10-10 04:20:34,098 - APP.services.mt5_service - DEBUG - Tìm thấy key 'spread_current' trong dict. Giá trị: 37
2025-10-10 04:20:34,100 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:34,100 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:34,101 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:34,101 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:34,102 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:34,102 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:20:34,103 - APP.utils.safe_data - DEBUG - Get tick value 'bid': 3955.643
2025-10-10 04:20:34,103 - APP.utils.safe_data - DEBUG - Get top-level key 'key_levels_nearby': [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 102389.99999999987}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11010.999999999967}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 15101.999999999862}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 34346.0}]
2025-10-10 04:20:34,104 - APP.utils.threading_utils - DEBUG - Task song song 'check_no_trade_conditions' hoàn tất thành công.
2025-10-10 04:20:34,105 - APP.utils.threading_utils - DEBUG - Task 'chart.info' (group=chart.refresh) hoàn tất sau 0.93s
2025-10-10 04:20:34,170 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:34,171 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:20:34,171 - APP.utils.safe_data - DEBUG - Get top-level key 'account': {'balance': 164.34, 'equity': 164.34, 'free_margin': 164.34, 'currency': 'USD', 'leverage': 2000}
2025-10-10 04:20:34,172 - APP.utils.safe_data - DEBUG - Get top-level key 'positions': []
2025-10-10 04:20:34,174 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:20:34,218 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:34,219 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:34,220 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:20:34,222 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:20:34,223 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:34,225 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:20:34,225 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:34,226 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.00s
2025-10-10 04:20:34,232 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:20:34,233 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:20:34,233 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:20:34,234 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:20:34,234 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:20:34,235 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:20:34,235 - APP.services.mt5_service - DEBUG - Bắt đầu build_context cho symbol: XAUUSD
2025-10-10 04:20:34,235 - APP.services.mt5_service - DEBUG - Đã đảm bảo symbol 'XAUUSD' được chọn. Chờ 0.5s để đồng bộ.
2025-10-10 04:20:34,280 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:34,737 - APP.services.mt5_service - DEBUG - Đã lấy symbol info, account info, tick info.
2025-10-10 04:20:34,738 - APP.services.mt5_service - WARNING - Không thể xác định múi giờ từ TerminalInfo (thiếu thuộc tính hoặc rỗng), sử dụng UTC.
2025-10-10 04:20:34,739 - APP.services.mt5_service - DEBUG - Đã xây dựng info_obj, account_obj, rules_obj.
2025-10-10 04:20:34,739 - APP.services.mt5_service - DEBUG - Current price (cp): 3955.493
2025-10-10 04:20:34,745 - APP.services.mt5_service - DEBUG - Tick stats 5m: {'ticks_per_min': 382, 'median_spread': 37.0, 'p90_spread': 37}
2025-10-10 04:20:34,792 - APP.services.mt5_service - DEBUG - Tick stats 30m: {'ticks_per_min': 343, 'median_spread': 37, 'p90_spread': 37}
2025-10-10 04:20:34,792 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 120
2025-10-10 04:20:34,793 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:34,795 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 1.
2025-10-10 04:20:34,795 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:34,796 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 5, bars: 180
2025-10-10 04:20:34,796 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 5 ở lần thử 1.
2025-10-10 04:20:34,799 - APP.services.mt5_service - DEBUG - Đã lấy 180 bars cho XAUUSD 5.
2025-10-10 04:20:34,800 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:34,800 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 15, bars: 96
2025-10-10 04:20:34,801 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 15 ở lần thử 1.
2025-10-10 04:20:34,802 - APP.services.mt5_service - DEBUG - Đã lấy 96 bars cho XAUUSD 15.
2025-10-10 04:20:34,803 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:34,803 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 16385, bars: 120
2025-10-10 04:20:34,803 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 16385 ở lần thử 1.
2025-10-10 04:20:34,807 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 16385.
2025-10-10 04:20:34,807 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:34,808 - APP.services.mt5_service - DEBUG - Đã lấy OHLCV series cho các khung thời gian.
2025-10-10 04:20:34,808 - APP.services.mt5_service - DEBUG - Bắt đầu tính toán các mức khung thời gian lớn từ series H1.
2025-10-10 04:20:34,813 - APP.services.mt5_service - DEBUG - Đã lấy prev_day HL: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:20:34,833 - APP.services.mt5_service - DEBUG - Đã lấy prev_week HL: {'high': 3897.216, 'low': 3763.408}
2025-10-10 04:20:34,833 - APP.services.mt5_service - DEBUG - Đã tính toán xong các mức khung thời gian lớn.
2025-10-10 04:20:34,834 - APP.services.mt5_service - DEBUG - Đã enrich daily data: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}
2025-10-10 04:20:34,835 - APP.services.mt5_service - DEBUG - Bắt đầu session_ranges_today. M1 rates count: 120
2025-10-10 04:20:34,835 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:20:34,835 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:20:34.835891+07:00
2025-10-10 04:20:34,836 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:20:34.835891+07:00
2025-10-10 04:20:34,836 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:20:34.835891+07:00 trong DST: True
2025-10-10 04:20:34,836 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:20:34,837 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:20:34,837 - APP.services.mt5_service - DEBUG - Kết thúc session_ranges_today.
2025-10-10 04:20:34,838 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 120 rates.
2025-10-10 04:20:34,839 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3969.7996882811894
2025-10-10 04:20:34,850 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 39 rates.
2025-10-10 04:20:34,864 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3983.0204215041354
2025-10-10 04:20:34,865 - APP.services.mt5_service - DEBUG - Đã tính toán sessions, session liquidity và VWAPs: {'day': 3969.7996882811894, 'asia': None, 'london': None, 'newyork_am': None, 'newyork_pm': 3983.0204215041354}
2025-10-10 04:20:34,866 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:20:34,867 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3961.8478609720105
2025-10-10 04:20:34,867 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:20:34,868 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.3487736772386
2025-10-10 04:20:34,868 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 50
2025-10-10 04:20:34,869 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.1334992477005
2025-10-10 04:20:34,869 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 200
2025-10-10 04:20:34,870 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3991.413032575662
2025-10-10 04:20:34,870 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 50
2025-10-10 04:20:34,870 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3983.585009068118
2025-10-10 04:20:34,871 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 200
2025-10-10 04:20:34,871 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 4010.0186678383225
2025-10-10 04:20:34,872 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:20:34,872 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3998.6009300199466
2025-10-10 04:20:34,873 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:20:34,874 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3944.081087523885
2025-10-10 04:20:34,874 - APP.services.mt5_service - DEBUG - Đã tính toán EMA: {'M1': {'ema50': 3961.8478609720105, 'ema200': 3973.3487736772386}, 'M5': {'ema50': 3973.1334992477005, 'ema200': 3991.413032575662}, 'M15': {'ema50': 3983.585009068118, 'ema200': 4010.0186678383225}, 'H1': {'ema50': 3998.6009300199466, 'ema200': 3944.081087523885}}
2025-10-10 04:20:34,875 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 180 rates, period: 14
2025-10-10 04:20:34,878 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 5.219299474229781, TRs count: 179
2025-10-10 04:20:34,899 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:20:34,899 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 2.4519601784080876, TRs count: 119
2025-10-10 04:20:34,900 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 96 rates, period: 14
2025-10-10 04:20:34,901 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 9.098558611333601, TRs count: 95
2025-10-10 04:20:34,901 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:20:34,902 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 18.80645617391291, TRs count: 119
2025-10-10 04:20:34,902 - APP.services.mt5_service - DEBUG - Đã tính toán ATR: {'M5': 5.219299474229781, 'M1': 2.4519601784080876, 'M15': 9.098558611333601, 'H1': 18.80645617391291}
2025-10-10 04:20:34,903 - APP.services.mt5_service - DEBUG - Volatility regime: trending
2025-10-10 04:20:34,903 - APP.services.mt5_service - DEBUG - Bắt đầu _nearby_key_levels cho cp: 3955.493, daily: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}, prev_day: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:20:34,904 - APP.services.mt5_service - DEBUG - Thêm PDH: 4058.033
2025-10-10 04:20:34,904 - APP.services.mt5_service - DEBUG - Thêm PDL: 3944.632
2025-10-10 04:20:34,904 - APP.services.mt5_service - DEBUG - Thêm EQ50_D: 3970.745
2025-10-10 04:20:34,905 - APP.services.mt5_service - DEBUG - Thêm DO: 3989.989
2025-10-10 04:20:34,905 - APP.services.mt5_service - DEBUG - Key level: PDH, Price: 4058.033, Relation: ABOVE, Distance: 102539.99999999996
2025-10-10 04:20:34,905 - APP.services.mt5_service - DEBUG - Key level: PDL, Price: 3944.632, Relation: BELOW, Distance: 10860.999999999876
2025-10-10 04:20:34,906 - APP.services.mt5_service - DEBUG - Key level: EQ50_D, Price: 3970.745, Relation: ABOVE, Distance: 15251.999999999953
2025-10-10 04:20:34,907 - APP.services.mt5_service - DEBUG - Key level: DO, Price: 3989.989, Relation: ABOVE, Distance: 34496.000000000095
2025-10-10 04:20:34,908 - APP.services.mt5_service - DEBUG - Kết thúc _nearby_key_levels. Số key levels: 4
2025-10-10 04:20:34,908 - APP.services.mt5_service - DEBUG - Key levels nearby: [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 102539.99999999996}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 10860.999999999876}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 15251.999999999953}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 34496.000000000095}]
2025-10-10 04:20:34,913 - APP.services.mt5_service - DEBUG - Bắt đầu adr_stats cho symbol: XAUUSD, n: 20
2025-10-10 04:20:34,933 - APP.services.mt5_service - DEBUG - Kết thúc adr_stats. Kết quả: {'d5': 71.51500000000006, 'd10': 67.97180000000003, 'd20': 56.30675000000001}
2025-10-10 04:20:34,934 - APP.services.mt5_service - DEBUG - Prev day close: 3989.994
2025-10-10 04:20:34,934 - APP.services.mt5_service - DEBUG - Day range: 47.48799999999983, Day range % of ADR20: 84.33802341637517
2025-10-10 04:20:34,935 - APP.services.mt5_service - DEBUG - Position in day range: 0.17882412398921338
2025-10-10 04:20:34,935 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:20:34,936 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:20:34.936019+07:00
2025-10-10 04:20:34,936 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:20:34.936019+07:00
2025-10-10 04:20:34,936 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:20:34.936019+07:00 trong DST: True
2025-10-10 04:20:34,937 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:20:34,937 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:20:34,937 - APP.services.mt5_service - DEBUG - Killzone active: None, Mins to next killzone: 100
2025-10-10 04:20:34,938 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:34,938 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:34,939 - APP.services.mt5_service - DEBUG - Round levels: [{'level': '4900', 'price': 3955.49, 'distance_pips': 0.3}, {'level': '4925', 'price': 3955.493, 'distance_pips': 0.05}, {'level': '4950', 'price': 3955.495, 'distance_pips': 0.2}, {'level': '4975', 'price': 3955.498, 'distance_pips': 0.45}]
2025-10-10 04:20:34,939 - APP.services.mt5_service - DEBUG - ATR normalized spread: {'spread_as_pct_of_atr_m5': 0.7089073961543868}
2025-10-10 04:20:34,940 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:34,940 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:34,941 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:20:34,941 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3955.493
2025-10-10 04:20:34,942 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:20:34,942 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:20:34,945 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:34,965 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe H1.
2025-10-10 04:20:34,966 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 96 rates, lookback: 200
2025-10-10 04:20:34,966 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 96 rates, current_price: 3955.493
2025-10-10 04:20:34,967 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:20:34,968 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 96 rates, lookback: 100
2025-10-10 04:20:34,969 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:34,969 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M15.
2025-10-10 04:20:34,970 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 180 rates, lookback: 200
2025-10-10 04:20:34,971 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 180 rates, current_price: 3955.493
2025-10-10 04:20:34,971 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:20:34,971 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 180 rates, lookback: 100
2025-10-10 04:20:34,972 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:34,973 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M5.
2025-10-10 04:20:34,973 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:20:34,974 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3955.493
2025-10-10 04:20:34,975 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:20:34,975 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:20:34,976 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:34,978 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M1.
2025-10-10 04:20:34,987 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:35,000 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:35,002 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:20:35,003 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:20:35,004 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:20:35,004 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:20:35,005 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:20:35,005 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:20:35,005 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:20:35,006 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:20:35,006 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:20:35,006 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:20:35,007 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:20:35,007 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:20:35,007 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:20:35,009 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:20:35,010 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:20:35,010 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:20:35,034 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:35,036 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:35,037 - APP.services.mt5_service - DEBUG - Đã xây dựng payload MT5_DATA.
2025-10-10 04:20:35,037 - APP.utils.safe_data - DEBUG - Khởi tạo SafeData với data có: True
2025-10-10 04:20:35,038 - APP.services.mt5_service - DEBUG - Đã tạo SafeData object.
2025-10-10 04:20:35,038 - APP.services.mt5_service - DEBUG - Kết thúc build_context.
2025-10-10 04:20:35,039 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:20:35,041 - APP.core.trading.conditions - DEBUG - Bắt đầu kiểm tra các điều kiện NO-TRADE.
2025-10-10 04:20:35,042 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:35,042 - APP.utils.threading_utils - DEBUG - Task song song 'get_upcoming_events' hoàn tất thành công.
2025-10-10 04:20:35,043 - APP.services.mt5_service - DEBUG - Bắt đầu lấy lịch sử deals cho XAUUSD trong 7 ngày qua.
2025-10-10 04:20:35,043 - APP.utils.safe_data - DEBUG - Get top-level key 'tick': {'bid': 3955.493, 'ask': 3955.53, 'last': 0.0, 'time': 1760070034}
2025-10-10 04:20:35,071 - APP.services.mt5_service - DEBUG - Đã định dạng 82 deals cho XAUUSD.
2025-10-10 04:20:35,092 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: spread_current, default: None
2025-10-10 04:20:35,094 - APP.utils.threading_utils - DEBUG - Task song song 'get_history_deals' hoàn tất thành công.
2025-10-10 04:20:35,095 - APP.services.mt5_service - DEBUG - Tìm thấy key 'spread_current' trong dict. Giá trị: 37
2025-10-10 04:20:35,096 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:35,098 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:35,120 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:35,121 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:35,121 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:35,142 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:20:35,143 - APP.utils.safe_data - DEBUG - Get tick value 'bid': 3955.493
2025-10-10 04:20:35,143 - APP.utils.safe_data - DEBUG - Get top-level key 'key_levels_nearby': [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 102539.99999999996}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 10860.999999999876}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 15251.999999999953}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 34496.000000000095}]
2025-10-10 04:20:35,145 - APP.utils.threading_utils - DEBUG - Task song song 'check_no_trade_conditions' hoàn tất thành công.
2025-10-10 04:20:35,146 - APP.utils.threading_utils - DEBUG - Task 'chart.info' (group=chart.refresh) hoàn tất sau 0.93s
2025-10-10 04:20:35,223 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:35,224 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:35,226 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:20:35,227 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:20:35,228 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:35,229 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:20:35,230 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:35,231 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.00s
2025-10-10 04:20:35,256 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:35,257 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:20:35,258 - APP.utils.safe_data - DEBUG - Get top-level key 'account': {'balance': 164.34, 'equity': 164.34, 'free_margin': 164.34, 'currency': 'USD', 'leverage': 2000}
2025-10-10 04:20:35,259 - APP.utils.safe_data - DEBUG - Get top-level key 'positions': []
2025-10-10 04:20:35,261 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:20:35,263 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:35,480 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:20:35,481 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:20:35,481 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:20:35,482 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:20:35,482 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:20:35,483 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:20:35,483 - APP.services.mt5_service - DEBUG - Bắt đầu build_context cho symbol: XAUUSD
2025-10-10 04:20:35,484 - APP.services.mt5_service - DEBUG - Đã đảm bảo symbol 'XAUUSD' được chọn. Chờ 0.5s để đồng bộ.
2025-10-10 04:20:35,985 - APP.services.mt5_service - DEBUG - Đã lấy symbol info, account info, tick info.
2025-10-10 04:20:35,986 - APP.services.mt5_service - WARNING - Không thể xác định múi giờ từ TerminalInfo (thiếu thuộc tính hoặc rỗng), sử dụng UTC.
2025-10-10 04:20:35,987 - APP.services.mt5_service - DEBUG - Đã xây dựng info_obj, account_obj, rules_obj.
2025-10-10 04:20:35,987 - APP.services.mt5_service - DEBUG - Current price (cp): 3955.708
2025-10-10 04:20:35,993 - APP.services.mt5_service - DEBUG - Tick stats 5m: {'ticks_per_min': 382, 'median_spread': 37.0, 'p90_spread': 37}
2025-10-10 04:20:36,057 - APP.services.mt5_service - DEBUG - Tick stats 30m: {'ticks_per_min': 343, 'median_spread': 37.0, 'p90_spread': 37}
2025-10-10 04:20:36,058 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 120
2025-10-10 04:20:36,058 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:36,060 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 1.
2025-10-10 04:20:36,061 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:36,061 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 5, bars: 180
2025-10-10 04:20:36,062 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 5 ở lần thử 1.
2025-10-10 04:20:36,065 - APP.services.mt5_service - DEBUG - Đã lấy 180 bars cho XAUUSD 5.
2025-10-10 04:20:36,065 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:36,065 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 15, bars: 96
2025-10-10 04:20:36,066 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 15 ở lần thử 1.
2025-10-10 04:20:36,067 - APP.services.mt5_service - DEBUG - Đã lấy 96 bars cho XAUUSD 15.
2025-10-10 04:20:36,068 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:36,068 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 16385, bars: 120
2025-10-10 04:20:36,069 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 16385 ở lần thử 1.
2025-10-10 04:20:36,071 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 16385.
2025-10-10 04:20:36,071 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:36,072 - APP.services.mt5_service - DEBUG - Đã lấy OHLCV series cho các khung thời gian.
2025-10-10 04:20:36,072 - APP.services.mt5_service - DEBUG - Bắt đầu tính toán các mức khung thời gian lớn từ series H1.
2025-10-10 04:20:36,075 - APP.services.mt5_service - DEBUG - Đã lấy prev_day HL: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:20:36,078 - APP.services.mt5_service - DEBUG - Đã lấy prev_week HL: {'high': 3897.216, 'low': 3763.408}
2025-10-10 04:20:36,081 - APP.services.mt5_service - DEBUG - Đã tính toán xong các mức khung thời gian lớn.
2025-10-10 04:20:36,101 - APP.services.mt5_service - DEBUG - Đã enrich daily data: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}
2025-10-10 04:20:36,102 - APP.services.mt5_service - DEBUG - Bắt đầu session_ranges_today. M1 rates count: 120
2025-10-10 04:20:36,102 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:20:36,103 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:20:36.103202+07:00
2025-10-10 04:20:36,103 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:20:36.103202+07:00
2025-10-10 04:20:36,104 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:20:36.103202+07:00 trong DST: True
2025-10-10 04:20:36,104 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:20:36,104 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:20:36,105 - APP.services.mt5_service - DEBUG - Kết thúc session_ranges_today.
2025-10-10 04:20:36,106 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 120 rates.
2025-10-10 04:20:36,107 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3969.7972118371995
2025-10-10 04:20:36,111 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 39 rates.
2025-10-10 04:20:36,134 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3983.0204215041354
2025-10-10 04:20:36,136 - APP.services.mt5_service - DEBUG - Đã tính toán sessions, session liquidity và VWAPs: {'day': 3969.7972118371995, 'asia': None, 'london': None, 'newyork_am': None, 'newyork_pm': 3983.0204215041354}
2025-10-10 04:20:36,136 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:20:36,137 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3961.8562923445597
2025-10-10 04:20:36,137 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:20:36,137 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.350912980721
2025-10-10 04:20:36,138 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 50
2025-10-10 04:20:36,139 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.1419306202497
2025-10-10 04:20:36,139 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 200
2025-10-10 04:20:36,139 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3991.4151718791445
2025-10-10 04:20:36,140 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 50
2025-10-10 04:20:36,140 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3983.593440440667
2025-10-10 04:20:36,141 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 200
2025-10-10 04:20:36,141 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 4010.020807141805
2025-10-10 04:20:36,142 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:20:36,142 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3998.6093613924954
2025-10-10 04:20:36,142 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:20:36,143 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3944.0832268273675
2025-10-10 04:20:36,144 - APP.services.mt5_service - DEBUG - Đã tính toán EMA: {'M1': {'ema50': 3961.8562923445597, 'ema200': 3973.350912980721}, 'M5': {'ema50': 3973.1419306202497, 'ema200': 3991.4151718791445}, 'M15': {'ema50': 3983.593440440667, 'ema200': 4010.020807141805}, 'H1': {'ema50': 3998.6093613924954, 'ema200': 3944.0832268273675}}
2025-10-10 04:20:36,145 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 180 rates, period: 14
2025-10-10 04:20:36,146 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 5.219299474229781, TRs count: 179
2025-10-10 04:20:36,148 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:20:36,168 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 2.4519601784080876, TRs count: 119
2025-10-10 04:20:36,171 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 96 rates, period: 14
2025-10-10 04:20:36,172 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 9.098558611333601, TRs count: 95
2025-10-10 04:20:36,172 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:20:36,173 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 18.80645617391291, TRs count: 119
2025-10-10 04:20:36,173 - APP.services.mt5_service - DEBUG - Đã tính toán ATR: {'M5': 5.219299474229781, 'M1': 2.4519601784080876, 'M15': 9.098558611333601, 'H1': 18.80645617391291}
2025-10-10 04:20:36,173 - APP.services.mt5_service - DEBUG - Volatility regime: trending
2025-10-10 04:20:36,174 - APP.services.mt5_service - DEBUG - Bắt đầu _nearby_key_levels cho cp: 3955.708, daily: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}, prev_day: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:20:36,174 - APP.services.mt5_service - DEBUG - Thêm PDH: 4058.033
2025-10-10 04:20:36,174 - APP.services.mt5_service - DEBUG - Thêm PDL: 3944.632
2025-10-10 04:20:36,175 - APP.services.mt5_service - DEBUG - Thêm EQ50_D: 3970.745
2025-10-10 04:20:36,175 - APP.services.mt5_service - DEBUG - Thêm DO: 3989.989
2025-10-10 04:20:36,176 - APP.services.mt5_service - DEBUG - Key level: PDH, Price: 4058.033, Relation: ABOVE, Distance: 102324.99999999981
2025-10-10 04:20:36,177 - APP.services.mt5_service - DEBUG - Key level: PDL, Price: 3944.632, Relation: BELOW, Distance: 11076.000000000022
2025-10-10 04:20:36,177 - APP.services.mt5_service - DEBUG - Key level: EQ50_D, Price: 3970.745, Relation: ABOVE, Distance: 15036.999999999807
2025-10-10 04:20:36,178 - APP.services.mt5_service - DEBUG - Key level: DO, Price: 3989.989, Relation: ABOVE, Distance: 34280.99999999995
2025-10-10 04:20:36,178 - APP.services.mt5_service - DEBUG - Kết thúc _nearby_key_levels. Số key levels: 4
2025-10-10 04:20:36,179 - APP.services.mt5_service - DEBUG - Key levels nearby: [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 102324.99999999981}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11076.000000000022}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 15036.999999999807}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 34280.99999999995}]
2025-10-10 04:20:36,200 - APP.services.mt5_service - DEBUG - Bắt đầu adr_stats cho symbol: XAUUSD, n: 20
2025-10-10 04:20:36,203 - APP.services.mt5_service - DEBUG - Kết thúc adr_stats. Kết quả: {'d5': 71.51500000000006, 'd10': 67.97180000000003, 'd20': 56.30675000000001}
2025-10-10 04:20:36,204 - APP.services.mt5_service - DEBUG - Prev day close: 3989.994
2025-10-10 04:20:36,204 - APP.services.mt5_service - DEBUG - Day range: 47.48799999999983, Day range % of ADR20: 84.33802341637517
2025-10-10 04:20:36,205 - APP.services.mt5_service - DEBUG - Position in day range: 0.18335158355794962
2025-10-10 04:20:36,205 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:20:36,205 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:20:36.205791+07:00
2025-10-10 04:20:36,206 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:20:36.205791+07:00
2025-10-10 04:20:36,206 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:20:36.205791+07:00 trong DST: True
2025-10-10 04:20:36,207 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:20:36,207 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:20:36,208 - APP.services.mt5_service - DEBUG - Killzone active: None, Mins to next killzone: 100
2025-10-10 04:20:36,209 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:36,209 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:36,210 - APP.services.mt5_service - DEBUG - Round levels: [{'level': '7000', 'price': 3955.7, 'distance_pips': 0.8}, {'level': '7025', 'price': 3955.703, 'distance_pips': 0.55}, {'level': '7050', 'price': 3955.705, 'distance_pips': 0.3}, {'level': '7075', 'price': 3955.708, 'distance_pips': 0.05}]
2025-10-10 04:20:36,212 - APP.services.mt5_service - DEBUG - ATR normalized spread: {'spread_as_pct_of_atr_m5': 0.7089073961456739}
2025-10-10 04:20:36,229 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:36,235 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:36,237 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:20:36,238 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:36,238 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:36,239 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:20:36,241 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:20:36,242 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3955.708
2025-10-10 04:20:36,242 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:36,242 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:20:36,243 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.01s
2025-10-10 04:20:36,244 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:20:36,247 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:36,272 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe H1.
2025-10-10 04:20:36,273 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 96 rates, lookback: 200
2025-10-10 04:20:36,274 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 96 rates, current_price: 3955.708
2025-10-10 04:20:36,274 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:20:36,275 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 96 rates, lookback: 100
2025-10-10 04:20:36,276 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:36,277 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M15.
2025-10-10 04:20:36,277 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 180 rates, lookback: 200
2025-10-10 04:20:36,278 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 180 rates, current_price: 3955.708
2025-10-10 04:20:36,287 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:36,288 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:20:36,316 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 180 rates, lookback: 100
2025-10-10 04:20:36,365 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:36,422 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M5.
2025-10-10 04:20:36,432 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:20:36,466 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3955.708
2025-10-10 04:20:36,512 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:20:36,514 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:20:36,515 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:36,528 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M1.
2025-10-10 04:20:36,558 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:36,586 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:36,589 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:20:36,591 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:20:36,592 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:20:36,594 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:20:36,596 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:20:36,622 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:20:36,624 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:20:36,625 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:20:36,628 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:20:36,652 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:20:36,654 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:20:36,656 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:20:36,657 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:20:36,659 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:20:36,661 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:20:36,662 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:20:36,694 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:36,727 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:36,731 - APP.services.mt5_service - DEBUG - Đã xây dựng payload MT5_DATA.
2025-10-10 04:20:36,732 - APP.utils.safe_data - DEBUG - Khởi tạo SafeData với data có: True
2025-10-10 04:20:36,733 - APP.services.mt5_service - DEBUG - Đã tạo SafeData object.
2025-10-10 04:20:36,734 - APP.services.mt5_service - DEBUG - Kết thúc build_context.
2025-10-10 04:20:36,736 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:20:36,740 - APP.core.trading.conditions - DEBUG - Bắt đầu kiểm tra các điều kiện NO-TRADE.
2025-10-10 04:20:36,741 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:36,741 - APP.utils.threading_utils - DEBUG - Task song song 'get_upcoming_events' hoàn tất thành công.
2025-10-10 04:20:36,742 - APP.services.mt5_service - DEBUG - Bắt đầu lấy lịch sử deals cho XAUUSD trong 7 ngày qua.
2025-10-10 04:20:36,742 - APP.utils.safe_data - DEBUG - Get top-level key 'tick': {'bid': 3955.708, 'ask': 3955.745, 'last': 0.0, 'time': 1760070035}
2025-10-10 04:20:36,745 - APP.services.mt5_service - DEBUG - Đã định dạng 82 deals cho XAUUSD.
2025-10-10 04:20:36,775 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: spread_current, default: None
2025-10-10 04:20:36,801 - APP.utils.threading_utils - DEBUG - Task song song 'get_history_deals' hoàn tất thành công.
2025-10-10 04:20:36,802 - APP.services.mt5_service - DEBUG - Tìm thấy key 'spread_current' trong dict. Giá trị: 37
2025-10-10 04:20:36,804 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:36,806 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:36,807 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:36,808 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:36,809 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:36,809 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:20:36,812 - APP.utils.safe_data - DEBUG - Get tick value 'bid': 3955.708
2025-10-10 04:20:36,835 - APP.utils.safe_data - DEBUG - Get top-level key 'key_levels_nearby': [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 102324.99999999981}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11076.000000000022}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 15036.999999999807}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 34280.99999999995}]
2025-10-10 04:20:36,841 - APP.utils.threading_utils - DEBUG - Task song song 'check_no_trade_conditions' hoàn tất thành công.
2025-10-10 04:20:36,844 - APP.utils.threading_utils - DEBUG - Task 'chart.info' (group=chart.refresh) hoàn tất sau 1.62s
2025-10-10 04:20:36,903 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:36,904 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:20:36,905 - APP.utils.safe_data - DEBUG - Get top-level key 'account': {'balance': 164.34, 'equity': 164.34, 'free_margin': 164.34, 'currency': 'USD', 'leverage': 2000}
2025-10-10 04:20:36,905 - APP.utils.safe_data - DEBUG - Get top-level key 'positions': []
2025-10-10 04:20:36,907 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:20:37,238 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:37,239 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:37,240 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:20:37,242 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:20:37,242 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:37,243 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:20:37,244 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:37,244 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.00s
2025-10-10 04:20:37,274 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:20:37,275 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:20:37,276 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:20:37,277 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:20:37,277 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:20:37,277 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:20:37,278 - APP.services.mt5_service - DEBUG - Bắt đầu build_context cho symbol: XAUUSD
2025-10-10 04:20:37,279 - APP.services.mt5_service - DEBUG - Đã đảm bảo symbol 'XAUUSD' được chọn. Chờ 0.5s để đồng bộ.
2025-10-10 04:20:37,310 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:37,780 - APP.services.mt5_service - DEBUG - Đã lấy symbol info, account info, tick info.
2025-10-10 04:20:37,782 - APP.services.mt5_service - WARNING - Không thể xác định múi giờ từ TerminalInfo (thiếu thuộc tính hoặc rỗng), sử dụng UTC.
2025-10-10 04:20:37,782 - APP.services.mt5_service - DEBUG - Đã xây dựng info_obj, account_obj, rules_obj.
2025-10-10 04:20:37,783 - APP.services.mt5_service - DEBUG - Current price (cp): 3955.477
2025-10-10 04:20:37,788 - APP.services.mt5_service - DEBUG - Tick stats 5m: {'ticks_per_min': 378, 'median_spread': 37.0, 'p90_spread': 37}
2025-10-10 04:20:37,850 - APP.services.mt5_service - DEBUG - Tick stats 30m: {'ticks_per_min': 344, 'median_spread': 37, 'p90_spread': 37}
2025-10-10 04:20:37,851 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 120
2025-10-10 04:20:37,851 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:37,853 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 1.
2025-10-10 04:20:37,854 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:37,854 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 5, bars: 180
2025-10-10 04:20:37,854 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 5 ở lần thử 1.
2025-10-10 04:20:37,857 - APP.services.mt5_service - DEBUG - Đã lấy 180 bars cho XAUUSD 5.
2025-10-10 04:20:37,858 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:37,858 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 15, bars: 96
2025-10-10 04:20:37,859 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 15 ở lần thử 1.
2025-10-10 04:20:37,860 - APP.services.mt5_service - DEBUG - Đã lấy 96 bars cho XAUUSD 15.
2025-10-10 04:20:37,861 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:37,861 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 16385, bars: 120
2025-10-10 04:20:37,861 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 16385 ở lần thử 1.
2025-10-10 04:20:37,864 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 16385.
2025-10-10 04:20:37,864 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:37,890 - APP.services.mt5_service - DEBUG - Đã lấy OHLCV series cho các khung thời gian.
2025-10-10 04:20:37,890 - APP.services.mt5_service - DEBUG - Bắt đầu tính toán các mức khung thời gian lớn từ series H1.
2025-10-10 04:20:37,893 - APP.services.mt5_service - DEBUG - Đã lấy prev_day HL: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:20:37,894 - APP.services.mt5_service - DEBUG - Đã lấy prev_week HL: {'high': 3897.216, 'low': 3763.408}
2025-10-10 04:20:37,894 - APP.services.mt5_service - DEBUG - Đã tính toán xong các mức khung thời gian lớn.
2025-10-10 04:20:37,895 - APP.services.mt5_service - DEBUG - Đã enrich daily data: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}
2025-10-10 04:20:37,895 - APP.services.mt5_service - DEBUG - Bắt đầu session_ranges_today. M1 rates count: 120
2025-10-10 04:20:37,896 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:20:37,897 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:20:37.896956+07:00
2025-10-10 04:20:37,897 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:20:37.896956+07:00
2025-10-10 04:20:37,898 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:20:37.896956+07:00 trong DST: True
2025-10-10 04:20:37,898 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:20:37,898 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:20:37,919 - APP.services.mt5_service - DEBUG - Kết thúc session_ranges_today.
2025-10-10 04:20:37,922 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 120 rates.
2025-10-10 04:20:37,923 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3969.794423160576
2025-10-10 04:20:37,926 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 39 rates.
2025-10-10 04:20:37,926 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3983.0204215041354
2025-10-10 04:20:37,927 - APP.services.mt5_service - DEBUG - Đã tính toán sessions, session liquidity và VWAPs: {'day': 3969.794423160576, 'asia': None, 'london': None, 'newyork_am': None, 'newyork_pm': 3983.0204215041354}
2025-10-10 04:20:37,927 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:20:37,927 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3961.8491158739716
2025-10-10 04:20:37,928 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:20:37,928 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.349092085199
2025-10-10 04:20:37,929 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 50
2025-10-10 04:20:37,929 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.1347541496616
2025-10-10 04:20:37,930 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 200
2025-10-10 04:20:37,930 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3991.4133509836224
2025-10-10 04:20:37,930 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 50
2025-10-10 04:20:37,931 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3983.586263970079
2025-10-10 04:20:37,931 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 200
2025-10-10 04:20:37,932 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 4010.018986246283
2025-10-10 04:20:37,932 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:20:37,932 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3998.6021849219073
2025-10-10 04:20:37,954 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:20:37,955 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3944.0814059318454
2025-10-10 04:20:37,956 - APP.services.mt5_service - DEBUG - Đã tính toán EMA: {'M1': {'ema50': 3961.8491158739716, 'ema200': 3973.349092085199}, 'M5': {'ema50': 3973.1347541496616, 'ema200': 3991.4133509836224}, 'M15': {'ema50': 3983.586263970079, 'ema200': 4010.018986246283}, 'H1': {'ema50': 3998.6021849219073, 'ema200': 3944.0814059318454}}
2025-10-10 04:20:37,957 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 180 rates, period: 14
2025-10-10 04:20:37,958 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 5.219299474229781, TRs count: 179
2025-10-10 04:20:37,958 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:20:37,959 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 2.4519601784080876, TRs count: 119
2025-10-10 04:20:37,959 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 96 rates, period: 14
2025-10-10 04:20:37,960 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 9.098558611333601, TRs count: 95
2025-10-10 04:20:37,960 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:20:37,961 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 18.80645617391291, TRs count: 119
2025-10-10 04:20:37,961 - APP.services.mt5_service - DEBUG - Đã tính toán ATR: {'M5': 5.219299474229781, 'M1': 2.4519601784080876, 'M15': 9.098558611333601, 'H1': 18.80645617391291}
2025-10-10 04:20:37,961 - APP.services.mt5_service - DEBUG - Volatility regime: trending
2025-10-10 04:20:37,962 - APP.services.mt5_service - DEBUG - Bắt đầu _nearby_key_levels cho cp: 3955.477, daily: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}, prev_day: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:20:37,962 - APP.services.mt5_service - DEBUG - Thêm PDH: 4058.033
2025-10-10 04:20:37,964 - APP.services.mt5_service - DEBUG - Thêm PDL: 3944.632
2025-10-10 04:20:37,964 - APP.services.mt5_service - DEBUG - Thêm EQ50_D: 3970.745
2025-10-10 04:20:37,965 - APP.services.mt5_service - DEBUG - Thêm DO: 3989.989
2025-10-10 04:20:37,965 - APP.services.mt5_service - DEBUG - Key level: PDH, Price: 4058.033, Relation: ABOVE, Distance: 102556.00000000004
2025-10-10 04:20:37,988 - APP.services.mt5_service - DEBUG - Key level: PDL, Price: 3944.632, Relation: BELOW, Distance: 10844.9999999998
2025-10-10 04:20:37,989 - APP.services.mt5_service - DEBUG - Key level: EQ50_D, Price: 3970.745, Relation: ABOVE, Distance: 15268.00000000003
2025-10-10 04:20:37,989 - APP.services.mt5_service - DEBUG - Key level: DO, Price: 3989.989, Relation: ABOVE, Distance: 34512.00000000017
2025-10-10 04:20:37,990 - APP.services.mt5_service - DEBUG - Kết thúc _nearby_key_levels. Số key levels: 4
2025-10-10 04:20:37,990 - APP.services.mt5_service - DEBUG - Key levels nearby: [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 102556.00000000004}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 10844.9999999998}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 15268.00000000003}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 34512.00000000017}]
2025-10-10 04:20:37,991 - APP.services.mt5_service - DEBUG - Bắt đầu adr_stats cho symbol: XAUUSD, n: 20
2025-10-10 04:20:37,992 - APP.services.mt5_service - DEBUG - Kết thúc adr_stats. Kết quả: {'d5': 71.51500000000006, 'd10': 67.97180000000003, 'd20': 56.30675000000001}
2025-10-10 04:20:37,992 - APP.services.mt5_service - DEBUG - Prev day close: 3989.994
2025-10-10 04:20:37,993 - APP.services.mt5_service - DEBUG - Day range: 47.48799999999983, Day range % of ADR20: 84.33802341637517
2025-10-10 04:20:37,993 - APP.services.mt5_service - DEBUG - Position in day range: 0.1784871967654921
2025-10-10 04:20:37,993 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:20:37,993 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:20:37.993893+07:00
2025-10-10 04:20:37,994 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:20:37.993893+07:00
2025-10-10 04:20:37,994 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:20:37.993893+07:00 trong DST: True
2025-10-10 04:20:37,995 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:20:37,995 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:20:37,995 - APP.services.mt5_service - DEBUG - Killzone active: None, Mins to next killzone: 100
2025-10-10 04:20:37,996 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:37,997 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:37,998 - APP.services.mt5_service - DEBUG - Round levels: [{'level': '4700', 'price': 3955.47, 'distance_pips': 0.7}, {'level': '4725', 'price': 3955.473, 'distance_pips': 0.45}, {'level': '4750', 'price': 3955.475, 'distance_pips': 0.2}, {'level': '4775', 'price': 3955.478, 'distance_pips': 0.05}]
2025-10-10 04:20:37,999 - APP.services.mt5_service - DEBUG - ATR normalized spread: {'spread_as_pct_of_atr_m5': 0.7089073961543868}
2025-10-10 04:20:38,021 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:38,021 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:38,022 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:20:38,024 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3955.477
2025-10-10 04:20:38,024 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:20:38,024 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:20:38,025 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:38,026 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe H1.
2025-10-10 04:20:38,026 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 96 rates, lookback: 200
2025-10-10 04:20:38,027 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 96 rates, current_price: 3955.477
2025-10-10 04:20:38,027 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:20:38,028 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 96 rates, lookback: 100
2025-10-10 04:20:38,028 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:38,029 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M15.
2025-10-10 04:20:38,029 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 180 rates, lookback: 200
2025-10-10 04:20:38,030 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 180 rates, current_price: 3955.477
2025-10-10 04:20:38,031 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:20:38,031 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 180 rates, lookback: 100
2025-10-10 04:20:38,036 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:38,057 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M5.
2025-10-10 04:20:38,058 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:20:38,059 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3955.477
2025-10-10 04:20:38,059 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:20:38,060 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:20:38,061 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:38,061 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M1.
2025-10-10 04:20:38,062 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:38,062 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:38,062 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:20:38,063 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:20:38,064 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:20:38,064 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:20:38,065 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:20:38,065 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:20:38,066 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:20:38,069 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:20:38,078 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:20:38,089 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:20:38,089 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:20:38,090 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:20:38,090 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:20:38,091 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:20:38,092 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:20:38,092 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:20:38,092 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:38,093 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:38,093 - APP.services.mt5_service - DEBUG - Đã xây dựng payload MT5_DATA.
2025-10-10 04:20:38,093 - APP.utils.safe_data - DEBUG - Khởi tạo SafeData với data có: True
2025-10-10 04:20:38,094 - APP.services.mt5_service - DEBUG - Đã tạo SafeData object.
2025-10-10 04:20:38,094 - APP.services.mt5_service - DEBUG - Kết thúc build_context.
2025-10-10 04:20:38,095 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:20:38,096 - APP.core.trading.conditions - DEBUG - Bắt đầu kiểm tra các điều kiện NO-TRADE.
2025-10-10 04:20:38,097 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:38,098 - APP.utils.safe_data - DEBUG - Get top-level key 'tick': {'bid': 3955.477, 'ask': 3955.514, 'last': 0.0, 'time': 1760070037}
2025-10-10 04:20:38,101 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: spread_current, default: None
2025-10-10 04:20:38,120 - APP.services.mt5_service - DEBUG - Tìm thấy key 'spread_current' trong dict. Giá trị: 37
2025-10-10 04:20:38,123 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:38,124 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:38,125 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:38,126 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:38,126 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:38,127 - APP.utils.threading_utils - DEBUG - Task song song 'get_upcoming_events' hoàn tất thành công.
2025-10-10 04:20:38,127 - APP.services.mt5_service - DEBUG - Bắt đầu lấy lịch sử deals cho XAUUSD trong 7 ngày qua.
2025-10-10 04:20:38,127 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:20:38,136 - APP.services.mt5_service - DEBUG - Đã định dạng 82 deals cho XAUUSD.
2025-10-10 04:20:38,151 - APP.utils.safe_data - DEBUG - Get tick value 'bid': 3955.477
2025-10-10 04:20:38,152 - APP.utils.threading_utils - DEBUG - Task song song 'get_history_deals' hoàn tất thành công.
2025-10-10 04:20:38,154 - APP.utils.safe_data - DEBUG - Get top-level key 'key_levels_nearby': [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 102556.00000000004}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 10844.9999999998}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 15268.00000000003}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 34512.00000000017}]
2025-10-10 04:20:38,155 - APP.utils.threading_utils - DEBUG - Task song song 'check_no_trade_conditions' hoàn tất thành công.
2025-10-10 04:20:38,156 - APP.utils.threading_utils - DEBUG - Task 'chart.info' (group=chart.refresh) hoàn tất sau 0.92s
2025-10-10 04:20:38,160 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:38,161 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:20:38,162 - APP.utils.safe_data - DEBUG - Get top-level key 'account': {'balance': 164.34, 'equity': 164.34, 'free_margin': 164.34, 'currency': 'USD', 'leverage': 2000}
2025-10-10 04:20:38,162 - APP.utils.safe_data - DEBUG - Get top-level key 'positions': []
2025-10-10 04:20:38,173 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:20:38,242 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:38,243 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:38,244 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:20:38,246 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:20:38,247 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:38,248 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:20:38,248 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:38,249 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.00s
2025-10-10 04:20:38,280 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:20:38,281 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:20:38,282 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:20:38,283 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:20:38,284 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:20:38,284 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:20:38,285 - APP.services.mt5_service - DEBUG - Bắt đầu build_context cho symbol: XAUUSD
2025-10-10 04:20:38,287 - APP.services.mt5_service - DEBUG - Đã đảm bảo symbol 'XAUUSD' được chọn. Chờ 0.5s để đồng bộ.
2025-10-10 04:20:38,296 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:38,804 - APP.services.mt5_service - DEBUG - Đã lấy symbol info, account info, tick info.
2025-10-10 04:20:38,806 - APP.services.mt5_service - WARNING - Không thể xác định múi giờ từ TerminalInfo (thiếu thuộc tính hoặc rỗng), sử dụng UTC.
2025-10-10 04:20:38,806 - APP.services.mt5_service - DEBUG - Đã xây dựng info_obj, account_obj, rules_obj.
2025-10-10 04:20:38,807 - APP.services.mt5_service - DEBUG - Current price (cp): 3955.925
2025-10-10 04:20:38,812 - APP.services.mt5_service - DEBUG - Tick stats 5m: {'ticks_per_min': 378, 'median_spread': 37.0, 'p90_spread': 37}
2025-10-10 04:20:38,874 - APP.services.mt5_service - DEBUG - Tick stats 30m: {'ticks_per_min': 344, 'median_spread': 37, 'p90_spread': 37}
2025-10-10 04:20:38,875 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 120
2025-10-10 04:20:38,875 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:38,877 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 1.
2025-10-10 04:20:38,878 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:38,878 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 5, bars: 180
2025-10-10 04:20:38,879 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 5 ở lần thử 1.
2025-10-10 04:20:38,882 - APP.services.mt5_service - DEBUG - Đã lấy 180 bars cho XAUUSD 5.
2025-10-10 04:20:38,883 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:38,885 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 15, bars: 96
2025-10-10 04:20:38,907 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 15 ở lần thử 1.
2025-10-10 04:20:38,910 - APP.services.mt5_service - DEBUG - Đã lấy 96 bars cho XAUUSD 15.
2025-10-10 04:20:38,912 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:38,912 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 16385, bars: 120
2025-10-10 04:20:38,913 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 16385 ở lần thử 1.
2025-10-10 04:20:38,916 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 16385.
2025-10-10 04:20:38,916 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:38,939 - APP.services.mt5_service - DEBUG - Đã lấy OHLCV series cho các khung thời gian.
2025-10-10 04:20:38,939 - APP.services.mt5_service - DEBUG - Bắt đầu tính toán các mức khung thời gian lớn từ series H1.
2025-10-10 04:20:38,943 - APP.services.mt5_service - DEBUG - Đã lấy prev_day HL: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:20:38,944 - APP.services.mt5_service - DEBUG - Đã lấy prev_week HL: {'high': 3897.216, 'low': 3763.408}
2025-10-10 04:20:38,945 - APP.services.mt5_service - DEBUG - Đã tính toán xong các mức khung thời gian lớn.
2025-10-10 04:20:38,945 - APP.services.mt5_service - DEBUG - Đã enrich daily data: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}
2025-10-10 04:20:38,946 - APP.services.mt5_service - DEBUG - Bắt đầu session_ranges_today. M1 rates count: 120
2025-10-10 04:20:38,946 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:20:38,946 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:20:38.946563+07:00
2025-10-10 04:20:38,946 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:20:38.946563+07:00
2025-10-10 04:20:38,947 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:20:38.946563+07:00 trong DST: True
2025-10-10 04:20:38,947 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:20:38,949 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:20:38,971 - APP.services.mt5_service - DEBUG - Kết thúc session_ranges_today.
2025-10-10 04:20:38,974 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 120 rates.
2025-10-10 04:20:38,974 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3969.787270322808
2025-10-10 04:20:38,978 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 39 rates.
2025-10-10 04:20:38,979 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3983.0204215041354
2025-10-10 04:20:38,979 - APP.services.mt5_service - DEBUG - Đã tính toán sessions, session liquidity và VWAPs: {'day': 3969.787270322808, 'asia': None, 'london': None, 'newyork_am': None, 'newyork_pm': 3983.0204215041354}
2025-10-10 04:20:38,980 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:20:38,980 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3961.8648021484814
2025-10-10 04:20:38,981 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:20:38,982 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.3530721847014
2025-10-10 04:20:38,982 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 50
2025-10-10 04:20:38,983 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.1504404241714
2025-10-10 04:20:38,983 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 200
2025-10-10 04:20:39,004 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3991.4173310831247
2025-10-10 04:20:39,005 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 50
2025-10-10 04:20:39,006 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3983.601950244589
2025-10-10 04:20:39,006 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 200
2025-10-10 04:20:39,007 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 4010.0229663457853
2025-10-10 04:20:39,007 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:20:39,008 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3998.617871196417
2025-10-10 04:20:39,008 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:20:39,008 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3944.0853860313478
2025-10-10 04:20:39,009 - APP.services.mt5_service - DEBUG - Đã tính toán EMA: {'M1': {'ema50': 3961.8648021484814, 'ema200': 3973.3530721847014}, 'M5': {'ema50': 3973.1504404241714, 'ema200': 3991.4173310831247}, 'M15': {'ema50': 3983.601950244589, 'ema200': 4010.0229663457853}, 'H1': {'ema50': 3998.617871196417, 'ema200': 3944.0853860313478}}
2025-10-10 04:20:39,009 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 180 rates, period: 14
2025-10-10 04:20:39,010 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 5.226156617086924, TRs count: 179
2025-10-10 04:20:39,011 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:20:39,012 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 2.4588173212652307, TRs count: 119
2025-10-10 04:20:39,012 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 96 rates, period: 14
2025-10-10 04:20:39,013 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 9.098558611333601, TRs count: 95
2025-10-10 04:20:39,013 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:20:39,013 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 18.80645617391291, TRs count: 119
2025-10-10 04:20:39,014 - APP.services.mt5_service - DEBUG - Đã tính toán ATR: {'M5': 5.226156617086924, 'M1': 2.4588173212652307, 'M15': 9.098558611333601, 'H1': 18.80645617391291}
2025-10-10 04:20:39,015 - APP.services.mt5_service - DEBUG - Volatility regime: trending
2025-10-10 04:20:39,016 - APP.services.mt5_service - DEBUG - Bắt đầu _nearby_key_levels cho cp: 3955.925, daily: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}, prev_day: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:20:39,017 - APP.services.mt5_service - DEBUG - Thêm PDH: 4058.033
2025-10-10 04:20:39,019 - APP.services.mt5_service - DEBUG - Thêm PDL: 3944.632
2025-10-10 04:20:39,038 - APP.services.mt5_service - DEBUG - Thêm EQ50_D: 3970.745
2025-10-10 04:20:39,039 - APP.services.mt5_service - DEBUG - Thêm DO: 3989.989
2025-10-10 04:20:39,039 - APP.services.mt5_service - DEBUG - Key level: PDH, Price: 4058.033, Relation: ABOVE, Distance: 102107.99999999972
2025-10-10 04:20:39,040 - APP.services.mt5_service - DEBUG - Key level: PDL, Price: 3944.632, Relation: BELOW, Distance: 11293.00000000012
2025-10-10 04:20:39,041 - APP.services.mt5_service - DEBUG - Key level: EQ50_D, Price: 3970.745, Relation: ABOVE, Distance: 14819.999999999709
2025-10-10 04:20:39,041 - APP.services.mt5_service - DEBUG - Key level: DO, Price: 3989.989, Relation: ABOVE, Distance: 34063.99999999985
2025-10-10 04:20:39,042 - APP.services.mt5_service - DEBUG - Kết thúc _nearby_key_levels. Số key levels: 4
2025-10-10 04:20:39,042 - APP.services.mt5_service - DEBUG - Key levels nearby: [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 102107.99999999972}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11293.00000000012}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 14819.999999999709}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 34063.99999999985}]
2025-10-10 04:20:39,043 - APP.services.mt5_service - DEBUG - Bắt đầu adr_stats cho symbol: XAUUSD, n: 20
2025-10-10 04:20:39,043 - APP.services.mt5_service - DEBUG - Kết thúc adr_stats. Kết quả: {'d5': 71.51500000000006, 'd10': 67.97180000000003, 'd20': 56.30675000000001}
2025-10-10 04:20:39,044 - APP.services.mt5_service - DEBUG - Prev day close: 3989.994
2025-10-10 04:20:39,044 - APP.services.mt5_service - DEBUG - Day range: 47.48799999999983, Day range % of ADR20: 84.33802341637517
2025-10-10 04:20:39,045 - APP.services.mt5_service - DEBUG - Position in day range: 0.18792115902964981
2025-10-10 04:20:39,045 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:20:39,045 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:20:39.045636+07:00
2025-10-10 04:20:39,046 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:20:39.045636+07:00
2025-10-10 04:20:39,047 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:20:39.045636+07:00 trong DST: True
2025-10-10 04:20:39,047 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:20:39,048 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:20:39,048 - APP.services.mt5_service - DEBUG - Killzone active: None, Mins to next killzone: 100
2025-10-10 04:20:39,048 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:39,049 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:39,050 - APP.services.mt5_service - DEBUG - Round levels: [{'level': '9200', 'price': 3955.92, 'distance_pips': 0.5}, {'level': '9225', 'price': 3955.923, 'distance_pips': 0.25}, {'level': '9250', 'price': 3955.925, 'distance_pips': 0.0}, {'level': '9275', 'price': 3955.928, 'distance_pips': 0.25}]
2025-10-10 04:20:39,050 - APP.services.mt5_service - DEBUG - ATR normalized spread: {'spread_as_pct_of_atr_m5': 0.7079772519414297}
2025-10-10 04:20:39,051 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:39,072 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:39,073 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:20:39,074 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3955.925
2025-10-10 04:20:39,075 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:20:39,075 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:20:39,076 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:39,077 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe H1.
2025-10-10 04:20:39,077 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 96 rates, lookback: 200
2025-10-10 04:20:39,078 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 96 rates, current_price: 3955.925
2025-10-10 04:20:39,078 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:20:39,079 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 96 rates, lookback: 100
2025-10-10 04:20:39,080 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:39,080 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M15.
2025-10-10 04:20:39,081 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 180 rates, lookback: 200
2025-10-10 04:20:39,082 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 180 rates, current_price: 3955.925
2025-10-10 04:20:39,083 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:20:39,084 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 180 rates, lookback: 100
2025-10-10 04:20:39,109 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:39,110 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M5.
2025-10-10 04:20:39,111 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:20:39,112 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3955.925
2025-10-10 04:20:39,112 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:20:39,112 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:20:39,113 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:39,114 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M1.
2025-10-10 04:20:39,114 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:39,115 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:39,115 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:20:39,116 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:20:39,116 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:20:39,117 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:20:39,118 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:20:39,141 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:20:39,141 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:20:39,143 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:20:39,144 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:20:39,144 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:20:39,145 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:20:39,145 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:20:39,146 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:20:39,146 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:20:39,146 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:20:39,146 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:20:39,147 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:39,147 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:39,148 - APP.services.mt5_service - DEBUG - Đã xây dựng payload MT5_DATA.
2025-10-10 04:20:39,149 - APP.utils.safe_data - DEBUG - Khởi tạo SafeData với data có: True
2025-10-10 04:20:39,150 - APP.services.mt5_service - DEBUG - Đã tạo SafeData object.
2025-10-10 04:20:39,150 - APP.services.mt5_service - DEBUG - Kết thúc build_context.
2025-10-10 04:20:39,151 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:20:39,176 - APP.core.trading.conditions - DEBUG - Bắt đầu kiểm tra các điều kiện NO-TRADE.
2025-10-10 04:20:39,177 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:39,178 - APP.utils.threading_utils - DEBUG - Task song song 'get_upcoming_events' hoàn tất thành công.
2025-10-10 04:20:39,178 - APP.utils.safe_data - DEBUG - Get top-level key 'tick': {'bid': 3955.925, 'ask': 3955.962, 'last': 0.0, 'time': 1760070038}
2025-10-10 04:20:39,178 - APP.services.mt5_service - DEBUG - Bắt đầu lấy lịch sử deals cho XAUUSD trong 7 ngày qua.
2025-10-10 04:20:39,179 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: spread_current, default: None
2025-10-10 04:20:39,181 - APP.services.mt5_service - DEBUG - Đã định dạng 82 deals cho XAUUSD.
2025-10-10 04:20:39,182 - APP.services.mt5_service - DEBUG - Tìm thấy key 'spread_current' trong dict. Giá trị: 37
2025-10-10 04:20:39,183 - APP.utils.threading_utils - DEBUG - Task song song 'get_history_deals' hoàn tất thành công.
2025-10-10 04:20:39,183 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:39,184 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:39,203 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:39,207 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:39,208 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:39,208 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:20:39,209 - APP.utils.safe_data - DEBUG - Get tick value 'bid': 3955.925
2025-10-10 04:20:39,209 - APP.utils.safe_data - DEBUG - Get top-level key 'key_levels_nearby': [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 102107.99999999972}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11293.00000000012}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 14819.999999999709}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 34063.99999999985}]
2025-10-10 04:20:39,210 - APP.utils.threading_utils - DEBUG - Task song song 'check_no_trade_conditions' hoàn tất thành công.
2025-10-10 04:20:39,211 - APP.utils.threading_utils - DEBUG - Task 'chart.info' (group=chart.refresh) hoàn tất sau 0.97s
2025-10-10 04:20:39,246 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:39,276 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:39,278 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:20:39,280 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:20:39,280 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:39,283 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:39,283 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:20:39,340 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:20:39,345 - APP.utils.safe_data - DEBUG - Get top-level key 'account': {'balance': 164.34, 'equity': 164.34, 'free_margin': 164.34, 'currency': 'USD', 'leverage': 2000}
2025-10-10 04:20:39,430 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:39,436 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.16s
2025-10-10 04:20:39,437 - APP.utils.safe_data - DEBUG - Get top-level key 'positions': []
2025-10-10 04:20:39,521 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:20:39,568 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:39,827 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:20:39,827 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:20:39,828 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:20:39,829 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:20:39,829 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:20:39,830 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:20:39,830 - APP.services.mt5_service - DEBUG - Bắt đầu build_context cho symbol: XAUUSD
2025-10-10 04:20:39,830 - APP.services.mt5_service - DEBUG - Đã đảm bảo symbol 'XAUUSD' được chọn. Chờ 0.5s để đồng bộ.
2025-10-10 04:20:40,280 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:40,332 - APP.services.mt5_service - DEBUG - Đã lấy symbol info, account info, tick info.
2025-10-10 04:20:40,333 - APP.services.mt5_service - WARNING - Không thể xác định múi giờ từ TerminalInfo (thiếu thuộc tính hoặc rỗng), sử dụng UTC.
2025-10-10 04:20:40,334 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:20:40,335 - APP.services.mt5_service - DEBUG - Đã xây dựng info_obj, account_obj, rules_obj.
2025-10-10 04:20:40,336 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:40,336 - APP.services.mt5_service - DEBUG - Current price (cp): 3955.855
2025-10-10 04:20:40,338 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:20:40,348 - APP.services.mt5_service - DEBUG - Tick stats 5m: {'ticks_per_min': 382, 'median_spread': 37, 'p90_spread': 37}
2025-10-10 04:20:40,364 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:40,405 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.12s
2025-10-10 04:20:40,432 - APP.services.mt5_service - DEBUG - Tick stats 30m: {'ticks_per_min': 344, 'median_spread': 37.0, 'p90_spread': 37}
2025-10-10 04:20:40,433 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 120
2025-10-10 04:20:40,435 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:40,453 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 1.
2025-10-10 04:20:40,456 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:40,457 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 5, bars: 180
2025-10-10 04:20:40,458 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 5 ở lần thử 1.
2025-10-10 04:20:40,461 - APP.services.mt5_service - DEBUG - Đã lấy 180 bars cho XAUUSD 5.
2025-10-10 04:20:40,462 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:40,462 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 15, bars: 96
2025-10-10 04:20:40,463 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 15 ở lần thử 1.
2025-10-10 04:20:40,466 - APP.services.mt5_service - DEBUG - Đã lấy 96 bars cho XAUUSD 15.
2025-10-10 04:20:40,466 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:40,466 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 16385, bars: 120
2025-10-10 04:20:40,467 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 16385 ở lần thử 1.
2025-10-10 04:20:40,469 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 16385.
2025-10-10 04:20:40,489 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:40,491 - APP.services.mt5_service - DEBUG - Đã lấy OHLCV series cho các khung thời gian.
2025-10-10 04:20:40,491 - APP.services.mt5_service - DEBUG - Bắt đầu tính toán các mức khung thời gian lớn từ series H1.
2025-10-10 04:20:40,494 - APP.services.mt5_service - DEBUG - Đã lấy prev_day HL: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:20:40,495 - APP.services.mt5_service - DEBUG - Đã lấy prev_week HL: {'high': 3897.216, 'low': 3763.408}
2025-10-10 04:20:40,496 - APP.services.mt5_service - DEBUG - Đã tính toán xong các mức khung thời gian lớn.
2025-10-10 04:20:40,496 - APP.services.mt5_service - DEBUG - Đã enrich daily data: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}
2025-10-10 04:20:40,497 - APP.services.mt5_service - DEBUG - Bắt đầu session_ranges_today. M1 rates count: 120
2025-10-10 04:20:40,497 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:20:40,498 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:20:40.498152+07:00
2025-10-10 04:20:40,498 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:20:40.498152+07:00
2025-10-10 04:20:40,498 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:20:40.498152+07:00 trong DST: True
2025-10-10 04:20:40,499 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:20:40,499 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:20:40,500 - APP.services.mt5_service - DEBUG - Kết thúc session_ranges_today.
2025-10-10 04:20:40,503 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 120 rates.
2025-10-10 04:20:40,524 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3969.7855071189874
2025-10-10 04:20:40,528 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 39 rates.
2025-10-10 04:20:40,529 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3983.0204215041354
2025-10-10 04:20:40,529 - APP.services.mt5_service - DEBUG - Đã tính toán sessions, session liquidity và VWAPs: {'day': 3969.7855071189874, 'asia': None, 'london': None, 'newyork_am': None, 'newyork_pm': 3983.0204215041354}
2025-10-10 04:20:40,530 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:20:40,530 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3961.862057050442
2025-10-10 04:20:40,531 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:20:40,531 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.3523756672885
2025-10-10 04:20:40,532 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 50
2025-10-10 04:20:40,532 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.147695326132
2025-10-10 04:20:40,532 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 200
2025-10-10 04:20:40,533 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3991.416634565712
2025-10-10 04:20:40,533 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 50
2025-10-10 04:20:40,534 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:40,535 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3983.5992051465496
2025-10-10 04:20:40,564 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 200
2025-10-10 04:20:40,594 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 4010.0222698283724
2025-10-10 04:20:40,673 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:20:40,678 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3998.615126098378
2025-10-10 04:20:40,763 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:20:40,769 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3944.084689513935
2025-10-10 04:20:40,769 - APP.services.mt5_service - DEBUG - Đã tính toán EMA: {'M1': {'ema50': 3961.862057050442, 'ema200': 3973.3523756672885}, 'M5': {'ema50': 3973.147695326132, 'ema200': 3991.416634565712}, 'M15': {'ema50': 3983.5992051465496, 'ema200': 4010.0222698283724}, 'H1': {'ema50': 3998.615126098378, 'ema200': 3944.084689513935}}
2025-10-10 04:20:40,770 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 180 rates, period: 14
2025-10-10 04:20:40,782 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 5.226156617086924, TRs count: 179
2025-10-10 04:20:40,825 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:20:40,841 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 2.4588173212652307, TRs count: 119
2025-10-10 04:20:40,843 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 96 rates, period: 14
2025-10-10 04:20:40,844 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 9.098558611333601, TRs count: 95
2025-10-10 04:20:40,845 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:20:40,846 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 18.80645617391291, TRs count: 119
2025-10-10 04:20:40,847 - APP.services.mt5_service - DEBUG - Đã tính toán ATR: {'M5': 5.226156617086924, 'M1': 2.4588173212652307, 'M15': 9.098558611333601, 'H1': 18.80645617391291}
2025-10-10 04:20:40,848 - APP.services.mt5_service - DEBUG - Volatility regime: trending
2025-10-10 04:20:40,849 - APP.services.mt5_service - DEBUG - Bắt đầu _nearby_key_levels cho cp: 3955.855, daily: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}, prev_day: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:20:40,850 - APP.services.mt5_service - DEBUG - Thêm PDH: 4058.033
2025-10-10 04:20:40,852 - APP.services.mt5_service - DEBUG - Thêm PDL: 3944.632
2025-10-10 04:20:40,877 - APP.services.mt5_service - DEBUG - Thêm EQ50_D: 3970.745
2025-10-10 04:20:40,880 - APP.services.mt5_service - DEBUG - Thêm DO: 3989.989
2025-10-10 04:20:40,881 - APP.services.mt5_service - DEBUG - Key level: PDH, Price: 4058.033, Relation: ABOVE, Distance: 102177.99999999988
2025-10-10 04:20:40,882 - APP.services.mt5_service - DEBUG - Key level: PDL, Price: 3944.632, Relation: BELOW, Distance: 11222.999999999956
2025-10-10 04:20:40,884 - APP.services.mt5_service - DEBUG - Key level: EQ50_D, Price: 3970.745, Relation: ABOVE, Distance: 14889.999999999873
2025-10-10 04:20:40,909 - APP.services.mt5_service - DEBUG - Key level: DO, Price: 3989.989, Relation: ABOVE, Distance: 34134.000000000015
2025-10-10 04:20:40,910 - APP.services.mt5_service - DEBUG - Kết thúc _nearby_key_levels. Số key levels: 4
2025-10-10 04:20:40,913 - APP.services.mt5_service - DEBUG - Key levels nearby: [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 102177.99999999988}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11222.999999999956}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 14889.999999999873}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 34134.000000000015}]
2025-10-10 04:20:40,914 - APP.services.mt5_service - DEBUG - Bắt đầu adr_stats cho symbol: XAUUSD, n: 20
2025-10-10 04:20:40,915 - APP.services.mt5_service - DEBUG - Kết thúc adr_stats. Kết quả: {'d5': 71.51500000000006, 'd10': 67.97180000000003, 'd20': 56.30675000000001}
2025-10-10 04:20:40,916 - APP.services.mt5_service - DEBUG - Prev day close: 3989.994
2025-10-10 04:20:40,917 - APP.services.mt5_service - DEBUG - Day range: 47.48799999999983, Day range % of ADR20: 84.33802341637517
2025-10-10 04:20:40,920 - APP.services.mt5_service - DEBUG - Position in day range: 0.18644710242587278
2025-10-10 04:20:40,951 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:20:40,977 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:20:40.976964+07:00
2025-10-10 04:20:40,980 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:20:40.976964+07:00
2025-10-10 04:20:40,983 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:20:40.976964+07:00 trong DST: True
2025-10-10 04:20:40,986 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:20:40,986 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:20:41,008 - APP.services.mt5_service - DEBUG - Killzone active: None, Mins to next killzone: 100
2025-10-10 04:20:41,010 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:41,011 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:41,013 - APP.services.mt5_service - DEBUG - Round levels: [{'level': '8500', 'price': 3955.85, 'distance_pips': 0.5}, {'level': '8525', 'price': 3955.852, 'distance_pips': 0.25}, {'level': '8550', 'price': 3955.855, 'distance_pips': 0.0}, {'level': '8575', 'price': 3955.858, 'distance_pips': 0.25}]
2025-10-10 04:20:41,013 - APP.services.mt5_service - DEBUG - ATR normalized spread: {'spread_as_pct_of_atr_m5': 0.7079772519414297}
2025-10-10 04:20:41,031 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:41,047 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:41,049 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:20:41,052 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3955.855
2025-10-10 04:20:41,053 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:20:41,078 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:20:41,080 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:41,082 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe H1.
2025-10-10 04:20:41,084 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 96 rates, lookback: 200
2025-10-10 04:20:41,085 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 96 rates, current_price: 3955.855
2025-10-10 04:20:41,141 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:20:41,145 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 96 rates, lookback: 100
2025-10-10 04:20:41,147 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:41,148 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M15.
2025-10-10 04:20:41,153 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 180 rates, lookback: 200
2025-10-10 04:20:41,179 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 180 rates, current_price: 3955.855
2025-10-10 04:20:41,184 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:20:41,185 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 180 rates, lookback: 100
2025-10-10 04:20:41,187 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:41,220 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M5.
2025-10-10 04:20:41,245 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:20:41,246 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3955.855
2025-10-10 04:20:41,246 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:20:41,247 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:20:41,248 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:41,249 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M1.
2025-10-10 04:20:41,249 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:41,250 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:41,252 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:20:41,252 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:20:41,253 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:20:41,285 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:41,308 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:20:41,312 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:20:41,313 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:20:41,313 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:20:41,313 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:20:41,314 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:20:41,315 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:20:41,316 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:20:41,316 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:20:41,317 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:20:41,317 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:20:41,318 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:20:41,318 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:20:41,319 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:20:41,319 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:41,320 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:41,321 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:41,325 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:20:41,346 - APP.services.mt5_service - DEBUG - Đã xây dựng payload MT5_DATA.
2025-10-10 04:20:41,347 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:41,349 - APP.utils.safe_data - DEBUG - Khởi tạo SafeData với data có: True
2025-10-10 04:20:41,350 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.04s
2025-10-10 04:20:41,350 - APP.services.mt5_service - DEBUG - Đã tạo SafeData object.
2025-10-10 04:20:41,351 - APP.services.mt5_service - DEBUG - Kết thúc build_context.
2025-10-10 04:20:41,352 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:20:41,353 - APP.core.trading.conditions - DEBUG - Bắt đầu kiểm tra các điều kiện NO-TRADE.
2025-10-10 04:20:41,355 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:41,355 - APP.utils.threading_utils - DEBUG - Task song song 'get_upcoming_events' hoàn tất thành công.
2025-10-10 04:20:41,359 - APP.services.mt5_service - DEBUG - Bắt đầu lấy lịch sử deals cho XAUUSD trong 7 ngày qua.
2025-10-10 04:20:41,372 - APP.utils.safe_data - DEBUG - Get top-level key 'tick': {'bid': 3955.855, 'ask': 3955.892, 'last': 0.0, 'time': 1760070039}
2025-10-10 04:20:41,381 - APP.services.mt5_service - DEBUG - Đã định dạng 82 deals cho XAUUSD.
2025-10-10 04:20:41,381 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: spread_current, default: None
2025-10-10 04:20:41,382 - APP.utils.threading_utils - DEBUG - Task song song 'get_history_deals' hoàn tất thành công.
2025-10-10 04:20:41,382 - APP.services.mt5_service - DEBUG - Tìm thấy key 'spread_current' trong dict. Giá trị: 37
2025-10-10 04:20:41,383 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:41,383 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:41,384 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:41,384 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:41,386 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:41,386 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:20:41,387 - APP.utils.safe_data - DEBUG - Get tick value 'bid': 3955.855
2025-10-10 04:20:41,398 - APP.utils.safe_data - DEBUG - Get top-level key 'key_levels_nearby': [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 102177.99999999988}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11222.999999999956}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 14889.999999999873}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 34134.000000000015}]
2025-10-10 04:20:41,410 - APP.utils.threading_utils - DEBUG - Task song song 'check_no_trade_conditions' hoàn tất thành công.
2025-10-10 04:20:41,412 - APP.utils.threading_utils - DEBUG - Task 'chart.info' (group=chart.refresh) hoàn tất sau 2.13s
2025-10-10 04:20:41,448 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:41,570 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:41,571 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:20:41,571 - APP.utils.safe_data - DEBUG - Get top-level key 'account': {'balance': 164.34, 'equity': 164.34, 'free_margin': 164.34, 'currency': 'USD', 'leverage': 2000}
2025-10-10 04:20:41,574 - APP.utils.safe_data - DEBUG - Get top-level key 'positions': []
2025-10-10 04:20:41,576 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:20:42,313 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:42,314 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:42,315 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:20:42,317 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:20:42,317 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:42,319 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:20:42,319 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:42,319 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.00s
2025-10-10 04:20:42,347 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:42,567 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:20:42,568 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:20:42,569 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:20:42,569 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:20:42,570 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:20:42,570 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:20:42,571 - APP.services.mt5_service - DEBUG - Bắt đầu build_context cho symbol: XAUUSD
2025-10-10 04:20:42,571 - APP.services.mt5_service - DEBUG - Đã đảm bảo symbol 'XAUUSD' được chọn. Chờ 0.5s để đồng bộ.
2025-10-10 04:20:43,073 - APP.services.mt5_service - DEBUG - Đã lấy symbol info, account info, tick info.
2025-10-10 04:20:43,074 - APP.services.mt5_service - WARNING - Không thể xác định múi giờ từ TerminalInfo (thiếu thuộc tính hoặc rỗng), sử dụng UTC.
2025-10-10 04:20:43,075 - APP.services.mt5_service - DEBUG - Đã xây dựng info_obj, account_obj, rules_obj.
2025-10-10 04:20:43,075 - APP.services.mt5_service - DEBUG - Current price (cp): 3955.878
2025-10-10 04:20:43,081 - APP.services.mt5_service - DEBUG - Tick stats 5m: {'ticks_per_min': 380, 'median_spread': 37.0, 'p90_spread': 37}
2025-10-10 04:20:43,134 - APP.services.mt5_service - DEBUG - Tick stats 30m: {'ticks_per_min': 345, 'median_spread': 37, 'p90_spread': 37}
2025-10-10 04:20:43,144 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 120
2025-10-10 04:20:43,146 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:43,149 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 1.
2025-10-10 04:20:43,149 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:43,150 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 5, bars: 180
2025-10-10 04:20:43,150 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 5 ở lần thử 1.
2025-10-10 04:20:43,153 - APP.services.mt5_service - DEBUG - Đã lấy 180 bars cho XAUUSD 5.
2025-10-10 04:20:43,153 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:43,154 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 15, bars: 96
2025-10-10 04:20:43,154 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 15 ở lần thử 1.
2025-10-10 04:20:43,156 - APP.services.mt5_service - DEBUG - Đã lấy 96 bars cho XAUUSD 15.
2025-10-10 04:20:43,157 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:43,157 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 16385, bars: 120
2025-10-10 04:20:43,158 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 16385 ở lần thử 1.
2025-10-10 04:20:43,162 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 16385.
2025-10-10 04:20:43,181 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:43,182 - APP.services.mt5_service - DEBUG - Đã lấy OHLCV series cho các khung thời gian.
2025-10-10 04:20:43,182 - APP.services.mt5_service - DEBUG - Bắt đầu tính toán các mức khung thời gian lớn từ series H1.
2025-10-10 04:20:43,185 - APP.services.mt5_service - DEBUG - Đã lấy prev_day HL: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:20:43,186 - APP.services.mt5_service - DEBUG - Đã lấy prev_week HL: {'high': 3897.216, 'low': 3763.408}
2025-10-10 04:20:43,186 - APP.services.mt5_service - DEBUG - Đã tính toán xong các mức khung thời gian lớn.
2025-10-10 04:20:43,187 - APP.services.mt5_service - DEBUG - Đã enrich daily data: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}
2025-10-10 04:20:43,187 - APP.services.mt5_service - DEBUG - Bắt đầu session_ranges_today. M1 rates count: 120
2025-10-10 04:20:43,188 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:20:43,188 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:20:43.188436+07:00
2025-10-10 04:20:43,188 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:20:43.188436+07:00
2025-10-10 04:20:43,189 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:20:43.188436+07:00 trong DST: True
2025-10-10 04:20:43,189 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:20:43,190 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:20:43,191 - APP.services.mt5_service - DEBUG - Kết thúc session_ranges_today.
2025-10-10 04:20:43,192 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 120 rates.
2025-10-10 04:20:43,195 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3969.779089130704
2025-10-10 04:20:43,219 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 39 rates.
2025-10-10 04:20:43,220 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3983.0204215041354
2025-10-10 04:20:43,220 - APP.services.mt5_service - DEBUG - Đã tính toán sessions, session liquidity và VWAPs: {'day': 3969.779089130704, 'asia': None, 'london': None, 'newyork_am': None, 'newyork_pm': 3983.0204215041354}
2025-10-10 04:20:43,221 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:20:43,221 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3961.8629590112264
2025-10-10 04:20:43,222 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:20:43,222 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.35260452301
2025-10-10 04:20:43,222 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 50
2025-10-10 04:20:43,223 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.1485972869164
2025-10-10 04:20:43,223 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 200
2025-10-10 04:20:43,224 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3991.4168634214334
2025-10-10 04:20:43,224 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 50
2025-10-10 04:20:43,225 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3983.6001071073338
2025-10-10 04:20:43,225 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 200
2025-10-10 04:20:43,225 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 4010.022498684094
2025-10-10 04:20:43,226 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:20:43,247 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3998.616028059162
2025-10-10 04:20:43,248 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:20:43,249 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3944.0849183696564
2025-10-10 04:20:43,249 - APP.services.mt5_service - DEBUG - Đã tính toán EMA: {'M1': {'ema50': 3961.8629590112264, 'ema200': 3973.35260452301}, 'M5': {'ema50': 3973.1485972869164, 'ema200': 3991.4168634214334}, 'M15': {'ema50': 3983.6001071073338, 'ema200': 4010.022498684094}, 'H1': {'ema50': 3998.616028059162, 'ema200': 3944.0849183696564}}
2025-10-10 04:20:43,250 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 180 rates, period: 14
2025-10-10 04:20:43,250 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 5.226156617086924, TRs count: 179
2025-10-10 04:20:43,251 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:20:43,251 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 2.4588173212652307, TRs count: 119
2025-10-10 04:20:43,251 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 96 rates, period: 14
2025-10-10 04:20:43,252 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 9.098558611333601, TRs count: 95
2025-10-10 04:20:43,252 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:20:43,253 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 18.80645617391291, TRs count: 119
2025-10-10 04:20:43,253 - APP.services.mt5_service - DEBUG - Đã tính toán ATR: {'M5': 5.226156617086924, 'M1': 2.4588173212652307, 'M15': 9.098558611333601, 'H1': 18.80645617391291}
2025-10-10 04:20:43,254 - APP.services.mt5_service - DEBUG - Volatility regime: trending
2025-10-10 04:20:43,254 - APP.services.mt5_service - DEBUG - Bắt đầu _nearby_key_levels cho cp: 3955.878, daily: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}, prev_day: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:20:43,254 - APP.services.mt5_service - DEBUG - Thêm PDH: 4058.033
2025-10-10 04:20:43,255 - APP.services.mt5_service - DEBUG - Thêm PDL: 3944.632
2025-10-10 04:20:43,255 - APP.services.mt5_service - DEBUG - Thêm EQ50_D: 3970.745
2025-10-10 04:20:43,256 - APP.services.mt5_service - DEBUG - Thêm DO: 3989.989
2025-10-10 04:20:43,257 - APP.services.mt5_service - DEBUG - Key level: PDH, Price: 4058.033, Relation: ABOVE, Distance: 102154.99999999974
2025-10-10 04:20:43,257 - APP.services.mt5_service - DEBUG - Key level: PDL, Price: 3944.632, Relation: BELOW, Distance: 11246.000000000095
2025-10-10 04:20:43,258 - APP.services.mt5_service - DEBUG - Key level: EQ50_D, Price: 3970.745, Relation: ABOVE, Distance: 14866.999999999734
2025-10-10 04:20:43,258 - APP.services.mt5_service - DEBUG - Key level: DO, Price: 3989.989, Relation: ABOVE, Distance: 34110.999999999876
2025-10-10 04:20:43,258 - APP.services.mt5_service - DEBUG - Kết thúc _nearby_key_levels. Số key levels: 4
2025-10-10 04:20:43,259 - APP.services.mt5_service - DEBUG - Key levels nearby: [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 102154.99999999974}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11246.000000000095}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 14866.999999999734}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 34110.999999999876}]
2025-10-10 04:20:43,259 - APP.services.mt5_service - DEBUG - Bắt đầu adr_stats cho symbol: XAUUSD, n: 20
2025-10-10 04:20:43,262 - APP.services.mt5_service - DEBUG - Kết thúc adr_stats. Kết quả: {'d5': 71.51500000000006, 'd10': 67.97180000000003, 'd20': 56.30675000000001}
2025-10-10 04:20:43,286 - APP.services.mt5_service - DEBUG - Prev day close: 3989.994
2025-10-10 04:20:43,287 - APP.services.mt5_service - DEBUG - Day range: 47.48799999999983, Day range % of ADR20: 84.33802341637517
2025-10-10 04:20:43,287 - APP.services.mt5_service - DEBUG - Position in day range: 0.18693143530997272
2025-10-10 04:20:43,288 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:20:43,289 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:20:43.289126+07:00
2025-10-10 04:20:43,289 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:20:43.289126+07:00
2025-10-10 04:20:43,289 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:20:43.289126+07:00 trong DST: True
2025-10-10 04:20:43,290 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:20:43,291 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:20:43,292 - APP.services.mt5_service - DEBUG - Killzone active: None, Mins to next killzone: 100
2025-10-10 04:20:43,292 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:43,292 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:43,293 - APP.services.mt5_service - DEBUG - Round levels: [{'level': '8700', 'price': 3955.87, 'distance_pips': 0.8}, {'level': '8725', 'price': 3955.872, 'distance_pips': 0.55}, {'level': '8750', 'price': 3955.875, 'distance_pips': 0.3}, {'level': '8775', 'price': 3955.878, 'distance_pips': 0.05}]
2025-10-10 04:20:43,293 - APP.services.mt5_service - DEBUG - ATR normalized spread: {'spread_as_pct_of_atr_m5': 0.7079772519414297}
2025-10-10 04:20:43,314 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:43,315 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:43,317 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:43,318 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:20:43,320 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:20:43,320 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3955.878
2025-10-10 04:20:43,321 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:43,322 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:20:43,323 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:20:43,323 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:20:43,324 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:43,325 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:43,326 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.01s
2025-10-10 04:20:43,326 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe H1.
2025-10-10 04:20:43,350 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 96 rates, lookback: 200
2025-10-10 04:20:43,351 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 96 rates, current_price: 3955.878
2025-10-10 04:20:43,352 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:20:43,352 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 96 rates, lookback: 100
2025-10-10 04:20:43,353 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:43,354 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M15.
2025-10-10 04:20:43,354 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 180 rates, lookback: 200
2025-10-10 04:20:43,355 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 180 rates, current_price: 3955.878
2025-10-10 04:20:43,356 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:20:43,356 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 180 rates, lookback: 100
2025-10-10 04:20:43,357 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:43,358 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M5.
2025-10-10 04:20:43,359 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:20:43,359 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3955.878
2025-10-10 04:20:43,362 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:20:43,382 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:43,385 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:20:43,444 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:43,476 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M1.
2025-10-10 04:20:43,482 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:43,515 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:43,578 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:20:43,630 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:20:43,632 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:20:43,640 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:20:43,673 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:20:43,699 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:20:43,701 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:20:43,702 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:20:43,703 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:20:43,704 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:20:43,705 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:20:43,708 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:20:43,735 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:20:43,737 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:20:43,738 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:20:43,739 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:20:43,741 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:43,768 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:43,769 - APP.services.mt5_service - DEBUG - Đã xây dựng payload MT5_DATA.
2025-10-10 04:20:43,771 - APP.utils.safe_data - DEBUG - Khởi tạo SafeData với data có: True
2025-10-10 04:20:43,772 - APP.services.mt5_service - DEBUG - Đã tạo SafeData object.
2025-10-10 04:20:43,775 - APP.services.mt5_service - DEBUG - Kết thúc build_context.
2025-10-10 04:20:43,800 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:20:43,803 - APP.core.trading.conditions - DEBUG - Bắt đầu kiểm tra các điều kiện NO-TRADE.
2025-10-10 04:20:43,834 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:43,835 - APP.utils.threading_utils - DEBUG - Task song song 'get_upcoming_events' hoàn tất thành công.
2025-10-10 04:20:43,849 - APP.services.mt5_service - DEBUG - Bắt đầu lấy lịch sử deals cho XAUUSD trong 7 ngày qua.
2025-10-10 04:20:43,856 - APP.utils.safe_data - DEBUG - Get top-level key 'tick': {'bid': 3955.878, 'ask': 3955.915, 'last': 0.0, 'time': 1760070042}
2025-10-10 04:20:43,862 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: spread_current, default: None
2025-10-10 04:20:43,867 - APP.services.mt5_service - DEBUG - Đã định dạng 82 deals cho XAUUSD.
2025-10-10 04:20:43,868 - APP.services.mt5_service - DEBUG - Tìm thấy key 'spread_current' trong dict. Giá trị: 37
2025-10-10 04:20:43,869 - APP.utils.threading_utils - DEBUG - Task song song 'get_history_deals' hoàn tất thành công.
2025-10-10 04:20:43,869 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:43,871 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:43,872 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:43,872 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:43,874 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:43,900 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:20:43,906 - APP.utils.safe_data - DEBUG - Get tick value 'bid': 3955.878
2025-10-10 04:20:43,928 - APP.utils.safe_data - DEBUG - Get top-level key 'key_levels_nearby': [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 102154.99999999974}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11246.000000000095}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 14866.999999999734}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 34110.999999999876}]
2025-10-10 04:20:43,937 - APP.utils.threading_utils - DEBUG - Task song song 'check_no_trade_conditions' hoàn tất thành công.
2025-10-10 04:20:43,940 - APP.utils.threading_utils - DEBUG - Task 'chart.info' (group=chart.refresh) hoàn tất sau 1.63s
2025-10-10 04:20:44,008 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:20:44,009 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:20:44,010 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:20:44,011 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:44,012 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:20:44,012 - APP.utils.safe_data - DEBUG - Get top-level key 'account': {'balance': 164.34, 'equity': 164.34, 'free_margin': 164.34, 'currency': 'USD', 'leverage': 2000}
2025-10-10 04:20:44,013 - APP.utils.safe_data - DEBUG - Get top-level key 'positions': []
2025-10-10 04:20:44,015 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:20:44,016 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:20:44,321 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:44,322 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:44,324 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:20:44,326 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:20:44,328 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:44,330 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:20:44,330 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:44,332 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.01s
2025-10-10 04:20:44,360 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:20:44,380 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:20:44,382 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:20:44,383 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:20:44,384 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:20:44,385 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:20:44,386 - APP.services.mt5_service - DEBUG - Bắt đầu build_context cho symbol: XAUUSD
2025-10-10 04:20:44,386 - APP.services.mt5_service - DEBUG - Đã đảm bảo symbol 'XAUUSD' được chọn. Chờ 0.5s để đồng bộ.
2025-10-10 04:20:44,419 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:44,888 - APP.services.mt5_service - DEBUG - Đã lấy symbol info, account info, tick info.
2025-10-10 04:20:44,889 - APP.services.mt5_service - WARNING - Không thể xác định múi giờ từ TerminalInfo (thiếu thuộc tính hoặc rỗng), sử dụng UTC.
2025-10-10 04:20:44,890 - APP.services.mt5_service - DEBUG - Đã xây dựng info_obj, account_obj, rules_obj.
2025-10-10 04:20:44,890 - APP.services.mt5_service - DEBUG - Current price (cp): 3956.032
2025-10-10 04:20:44,896 - APP.services.mt5_service - DEBUG - Tick stats 5m: {'ticks_per_min': 379, 'median_spread': 37.0, 'p90_spread': 37}
2025-10-10 04:20:44,941 - APP.services.mt5_service - DEBUG - Tick stats 30m: {'ticks_per_min': 345, 'median_spread': 37, 'p90_spread': 37}
2025-10-10 04:20:44,941 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 120
2025-10-10 04:20:44,942 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:44,945 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 1.
2025-10-10 04:20:44,945 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:44,946 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 5, bars: 180
2025-10-10 04:20:44,963 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 5 ở lần thử 1.
2025-10-10 04:20:44,969 - APP.services.mt5_service - DEBUG - Đã lấy 180 bars cho XAUUSD 5.
2025-10-10 04:20:44,969 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:44,969 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 15, bars: 96
2025-10-10 04:20:44,970 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 15 ở lần thử 1.
2025-10-10 04:20:44,972 - APP.services.mt5_service - DEBUG - Đã lấy 96 bars cho XAUUSD 15.
2025-10-10 04:20:44,972 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:44,973 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 16385, bars: 120
2025-10-10 04:20:44,973 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 16385 ở lần thử 1.
2025-10-10 04:20:44,976 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 16385.
2025-10-10 04:20:44,977 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:44,977 - APP.services.mt5_service - DEBUG - Đã lấy OHLCV series cho các khung thời gian.
2025-10-10 04:20:44,978 - APP.services.mt5_service - DEBUG - Bắt đầu tính toán các mức khung thời gian lớn từ series H1.
2025-10-10 04:20:44,996 - APP.services.mt5_service - DEBUG - Đã lấy prev_day HL: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:20:45,001 - APP.services.mt5_service - DEBUG - Đã lấy prev_week HL: {'high': 3897.216, 'low': 3763.408}
2025-10-10 04:20:45,003 - APP.services.mt5_service - DEBUG - Đã tính toán xong các mức khung thời gian lớn.
2025-10-10 04:20:45,003 - APP.services.mt5_service - DEBUG - Đã enrich daily data: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}
2025-10-10 04:20:45,004 - APP.services.mt5_service - DEBUG - Bắt đầu session_ranges_today. M1 rates count: 120
2025-10-10 04:20:45,004 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:20:45,005 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:20:45.005334+07:00
2025-10-10 04:20:45,005 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:20:45.005334+07:00
2025-10-10 04:20:45,006 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:20:45.005334+07:00 trong DST: True
2025-10-10 04:20:45,006 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:20:45,006 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:20:45,007 - APP.services.mt5_service - DEBUG - Kết thúc session_ranges_today.
2025-10-10 04:20:45,008 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 120 rates.
2025-10-10 04:20:45,008 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3969.778784974638
2025-10-10 04:20:45,014 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 39 rates.
2025-10-10 04:20:45,034 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3983.0204215041354
2025-10-10 04:20:45,034 - APP.services.mt5_service - DEBUG - Đã tính toán sessions, session liquidity và VWAPs: {'day': 3969.778784974638, 'asia': None, 'london': None, 'newyork_am': None, 'newyork_pm': 3983.0204215041354}
2025-10-10 04:20:45,035 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:20:45,035 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3961.8646845014223
2025-10-10 04:20:45,036 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:20:45,036 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.3530423339553
2025-10-10 04:20:45,036 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 50
2025-10-10 04:20:45,037 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.1503227771123
2025-10-10 04:20:45,037 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 200
2025-10-10 04:20:45,038 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3991.4173012323786
2025-10-10 04:20:45,038 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 50
2025-10-10 04:20:45,038 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3983.6018325975297
2025-10-10 04:20:45,039 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 200
2025-10-10 04:20:45,039 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 4010.022936495039
2025-10-10 04:20:45,040 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:20:45,040 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3998.617753549358
2025-10-10 04:20:45,040 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:20:45,041 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3944.0853561806016
2025-10-10 04:20:45,041 - APP.services.mt5_service - DEBUG - Đã tính toán EMA: {'M1': {'ema50': 3961.8646845014223, 'ema200': 3973.3530423339553}, 'M5': {'ema50': 3973.1503227771123, 'ema200': 3991.4173012323786}, 'M15': {'ema50': 3983.6018325975297, 'ema200': 4010.022936495039}, 'H1': {'ema50': 3998.617753549358, 'ema200': 3944.0853561806016}}
2025-10-10 04:20:45,042 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 180 rates, period: 14
2025-10-10 04:20:45,042 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 5.226156617086924, TRs count: 179
2025-10-10 04:20:45,043 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:20:45,044 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 2.4588173212652307, TRs count: 119
2025-10-10 04:20:45,045 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 96 rates, period: 14
2025-10-10 04:20:45,047 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 9.098558611333601, TRs count: 95
2025-10-10 04:20:45,065 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:20:45,067 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 18.80645617391291, TRs count: 119
2025-10-10 04:20:45,068 - APP.services.mt5_service - DEBUG - Đã tính toán ATR: {'M5': 5.226156617086924, 'M1': 2.4588173212652307, 'M15': 9.098558611333601, 'H1': 18.80645617391291}
2025-10-10 04:20:45,068 - APP.services.mt5_service - DEBUG - Volatility regime: trending
2025-10-10 04:20:45,069 - APP.services.mt5_service - DEBUG - Bắt đầu _nearby_key_levels cho cp: 3956.032, daily: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}, prev_day: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:20:45,069 - APP.services.mt5_service - DEBUG - Thêm PDH: 4058.033
2025-10-10 04:20:45,070 - APP.services.mt5_service - DEBUG - Thêm PDL: 3944.632
2025-10-10 04:20:45,070 - APP.services.mt5_service - DEBUG - Thêm EQ50_D: 3970.745
2025-10-10 04:20:45,071 - APP.services.mt5_service - DEBUG - Thêm DO: 3989.989
2025-10-10 04:20:45,071 - APP.services.mt5_service - DEBUG - Key level: PDH, Price: 4058.033, Relation: ABOVE, Distance: 102000.99999999975
2025-10-10 04:20:45,071 - APP.services.mt5_service - DEBUG - Key level: PDL, Price: 3944.632, Relation: BELOW, Distance: 11400.000000000091
2025-10-10 04:20:45,072 - APP.services.mt5_service - DEBUG - Key level: EQ50_D, Price: 3970.745, Relation: ABOVE, Distance: 14712.999999999738
2025-10-10 04:20:45,072 - APP.services.mt5_service - DEBUG - Key level: DO, Price: 3989.989, Relation: ABOVE, Distance: 33956.999999999876
2025-10-10 04:20:45,072 - APP.services.mt5_service - DEBUG - Kết thúc _nearby_key_levels. Số key levels: 4
2025-10-10 04:20:45,073 - APP.services.mt5_service - DEBUG - Key levels nearby: [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 102000.99999999975}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11400.000000000091}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 14712.999999999738}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 33956.999999999876}]
2025-10-10 04:20:45,074 - APP.services.mt5_service - DEBUG - Bắt đầu adr_stats cho symbol: XAUUSD, n: 20
2025-10-10 04:20:45,075 - APP.services.mt5_service - DEBUG - Kết thúc adr_stats. Kết quả: {'d5': 71.51500000000006, 'd10': 67.97180000000003, 'd20': 56.30675000000001}
2025-10-10 04:20:45,075 - APP.services.mt5_service - DEBUG - Prev day close: 3989.994
2025-10-10 04:20:45,075 - APP.services.mt5_service - DEBUG - Day range: 47.48799999999983, Day range % of ADR20: 84.33802341637517
2025-10-10 04:20:45,076 - APP.services.mt5_service - DEBUG - Position in day range: 0.19017435983827455
2025-10-10 04:20:45,076 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:20:45,077 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:20:45.077504+07:00
2025-10-10 04:20:45,078 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:20:45.077504+07:00
2025-10-10 04:20:45,078 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:20:45.077504+07:00 trong DST: True
2025-10-10 04:20:45,078 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:20:45,097 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:20:45,098 - APP.services.mt5_service - DEBUG - Killzone active: None, Mins to next killzone: 100
2025-10-10 04:20:45,098 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:45,099 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:45,101 - APP.services.mt5_service - DEBUG - Round levels: [{'level': '300', 'price': 3956.03, 'distance_pips': 0.2}, {'level': '325', 'price': 3956.033, 'distance_pips': 0.05}, {'level': '350', 'price': 3956.035, 'distance_pips': 0.3}, {'level': '375', 'price': 3956.038, 'distance_pips': 0.55}]
2025-10-10 04:20:45,101 - APP.services.mt5_service - DEBUG - ATR normalized spread: {'spread_as_pct_of_atr_m5': 0.7079772519414297}
2025-10-10 04:20:45,102 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:45,103 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:45,103 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:20:45,105 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3956.032
2025-10-10 04:20:45,105 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:20:45,106 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:20:45,107 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:45,107 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe H1.
2025-10-10 04:20:45,107 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 96 rates, lookback: 200
2025-10-10 04:20:45,108 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 96 rates, current_price: 3956.032
2025-10-10 04:20:45,109 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:20:45,109 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 96 rates, lookback: 100
2025-10-10 04:20:45,111 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:45,112 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M15.
2025-10-10 04:20:45,112 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 180 rates, lookback: 200
2025-10-10 04:20:45,128 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 180 rates, current_price: 3956.032
2025-10-10 04:20:45,138 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:20:45,139 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 180 rates, lookback: 100
2025-10-10 04:20:45,140 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:45,141 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M5.
2025-10-10 04:20:45,141 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:20:45,142 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3956.032
2025-10-10 04:20:45,143 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:20:45,143 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:20:45,145 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:45,146 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M1.
2025-10-10 04:20:45,151 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:45,169 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:45,170 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:20:45,171 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:20:45,172 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:20:45,173 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:20:45,173 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:20:45,174 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:20:45,174 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:20:45,174 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:20:45,175 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:20:45,175 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:20:45,175 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:20:45,176 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:20:45,176 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:20:45,176 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:20:45,177 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:20:45,178 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:20:45,179 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:45,179 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:45,180 - APP.services.mt5_service - DEBUG - Đã xây dựng payload MT5_DATA.
2025-10-10 04:20:45,180 - APP.utils.safe_data - DEBUG - Khởi tạo SafeData với data có: True
2025-10-10 04:20:45,181 - APP.services.mt5_service - DEBUG - Đã tạo SafeData object.
2025-10-10 04:20:45,181 - APP.services.mt5_service - DEBUG - Kết thúc build_context.
2025-10-10 04:20:45,205 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:20:45,209 - APP.core.trading.conditions - DEBUG - Bắt đầu kiểm tra các điều kiện NO-TRADE.
2025-10-10 04:20:45,210 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:45,211 - APP.utils.threading_utils - DEBUG - Task song song 'get_upcoming_events' hoàn tất thành công.
2025-10-10 04:20:45,212 - APP.services.mt5_service - DEBUG - Bắt đầu lấy lịch sử deals cho XAUUSD trong 7 ngày qua.
2025-10-10 04:20:45,212 - APP.utils.safe_data - DEBUG - Get top-level key 'tick': {'bid': 3956.032, 'ask': 3956.069, 'last': 0.0, 'time': 1760070044}
2025-10-10 04:20:45,232 - APP.services.mt5_service - DEBUG - Đã định dạng 82 deals cho XAUUSD.
2025-10-10 04:20:45,233 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: spread_current, default: None
2025-10-10 04:20:45,234 - APP.utils.threading_utils - DEBUG - Task song song 'get_history_deals' hoàn tất thành công.
2025-10-10 04:20:45,234 - APP.services.mt5_service - DEBUG - Tìm thấy key 'spread_current' trong dict. Giá trị: 37
2025-10-10 04:20:45,235 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:45,236 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:45,236 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:45,237 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:45,237 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:45,237 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:20:45,238 - APP.utils.safe_data - DEBUG - Get tick value 'bid': 3956.032
2025-10-10 04:20:45,238 - APP.utils.safe_data - DEBUG - Get top-level key 'key_levels_nearby': [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 102000.99999999975}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11400.000000000091}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 14712.999999999738}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 33956.999999999876}]
2025-10-10 04:20:45,239 - APP.utils.threading_utils - DEBUG - Task song song 'check_no_trade_conditions' hoàn tất thành công.
2025-10-10 04:20:45,240 - APP.utils.threading_utils - DEBUG - Task 'chart.info' (group=chart.refresh) hoàn tất sau 0.92s
2025-10-10 04:20:45,275 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:45,277 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:20:45,278 - APP.utils.safe_data - DEBUG - Get top-level key 'account': {'balance': 164.34, 'equity': 164.34, 'free_margin': 164.34, 'currency': 'USD', 'leverage': 2000}
2025-10-10 04:20:45,279 - APP.utils.safe_data - DEBUG - Get top-level key 'positions': []
2025-10-10 04:20:45,301 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:20:45,383 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:45,384 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:45,386 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:20:45,388 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:20:45,388 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:45,390 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:20:45,391 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:45,391 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.00s
2025-10-10 04:20:45,411 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:20:45,412 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:45,418 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:20:45,430 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:20:45,458 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:20:45,471 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:20:45,523 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:20:45,590 - APP.services.mt5_service - DEBUG - Bắt đầu build_context cho symbol: XAUUSD
2025-10-10 04:20:45,653 - APP.services.mt5_service - DEBUG - Đã đảm bảo symbol 'XAUUSD' được chọn. Chờ 0.5s để đồng bộ.
2025-10-10 04:20:46,355 - APP.services.mt5_service - DEBUG - Đã lấy symbol info, account info, tick info.
2025-10-10 04:20:46,357 - APP.services.mt5_service - WARNING - Không thể xác định múi giờ từ TerminalInfo (thiếu thuộc tính hoặc rỗng), sử dụng UTC.
2025-10-10 04:20:46,358 - APP.services.mt5_service - DEBUG - Đã xây dựng info_obj, account_obj, rules_obj.
2025-10-10 04:20:46,358 - APP.services.mt5_service - DEBUG - Current price (cp): 3956.083
2025-10-10 04:20:46,364 - APP.services.mt5_service - DEBUG - Tick stats 5m: {'ticks_per_min': 368, 'median_spread': 37.0, 'p90_spread': 37}
2025-10-10 04:20:46,406 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:46,409 - APP.services.mt5_service - DEBUG - Tick stats 30m: {'ticks_per_min': 345, 'median_spread': 37, 'p90_spread': 37}
2025-10-10 04:20:46,411 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:20:46,412 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 120
2025-10-10 04:20:46,412 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:46,413 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:46,416 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:20:46,436 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 1.
2025-10-10 04:20:46,437 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:46,437 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:46,438 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.03s
2025-10-10 04:20:46,438 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 5, bars: 180
2025-10-10 04:20:46,439 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 5 ở lần thử 1.
2025-10-10 04:20:46,442 - APP.services.mt5_service - DEBUG - Đã lấy 180 bars cho XAUUSD 5.
2025-10-10 04:20:46,442 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:46,443 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 15, bars: 96
2025-10-10 04:20:46,443 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 15 ở lần thử 1.
2025-10-10 04:20:46,446 - APP.services.mt5_service - DEBUG - Đã lấy 96 bars cho XAUUSD 15.
2025-10-10 04:20:46,446 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:46,446 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 16385, bars: 120
2025-10-10 04:20:46,449 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 16385 ở lần thử 1.
2025-10-10 04:20:46,469 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 16385.
2025-10-10 04:20:46,471 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:46,471 - APP.services.mt5_service - DEBUG - Đã lấy OHLCV series cho các khung thời gian.
2025-10-10 04:20:46,472 - APP.services.mt5_service - DEBUG - Bắt đầu tính toán các mức khung thời gian lớn từ series H1.
2025-10-10 04:20:46,474 - APP.services.mt5_service - DEBUG - Đã lấy prev_day HL: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:20:46,475 - APP.services.mt5_service - DEBUG - Đã lấy prev_week HL: {'high': 3897.216, 'low': 3763.408}
2025-10-10 04:20:46,475 - APP.services.mt5_service - DEBUG - Đã tính toán xong các mức khung thời gian lớn.
2025-10-10 04:20:46,476 - APP.services.mt5_service - DEBUG - Đã enrich daily data: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}
2025-10-10 04:20:46,476 - APP.services.mt5_service - DEBUG - Bắt đầu session_ranges_today. M1 rates count: 120
2025-10-10 04:20:46,477 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:20:46,477 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:20:46.477711+07:00
2025-10-10 04:20:46,478 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:20:46.477711+07:00
2025-10-10 04:20:46,479 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:20:46.477711+07:00 trong DST: True
2025-10-10 04:20:46,479 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:20:46,480 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:20:46,480 - APP.services.mt5_service - DEBUG - Kết thúc session_ranges_today.
2025-10-10 04:20:46,505 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 120 rates.
2025-10-10 04:20:46,509 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3969.7775423532557
2025-10-10 04:20:46,509 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:46,515 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 39 rates.
2025-10-10 04:20:46,566 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3983.0204215041354
2025-10-10 04:20:46,575 - APP.services.mt5_service - DEBUG - Đã tính toán sessions, session liquidity và VWAPs: {'day': 3969.7775423532557, 'asia': None, 'london': None, 'newyork_am': None, 'newyork_pm': 3983.0204215041354}
2025-10-10 04:20:46,612 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:20:46,697 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3961.870998226913
2025-10-10 04:20:46,700 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:20:46,702 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.3546443240048
2025-10-10 04:20:46,715 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 50
2025-10-10 04:20:46,736 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.156636502603
2025-10-10 04:20:46,764 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 200
2025-10-10 04:20:46,791 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3991.418903222428
2025-10-10 04:20:46,798 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 50
2025-10-10 04:20:46,800 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3983.6081463230203
2025-10-10 04:20:46,801 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 200
2025-10-10 04:20:46,803 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 4010.0245384850887
2025-10-10 04:20:46,828 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:20:46,830 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3998.6240672748486
2025-10-10 04:20:46,832 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:20:46,832 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3944.086958170651
2025-10-10 04:20:46,833 - APP.services.mt5_service - DEBUG - Đã tính toán EMA: {'M1': {'ema50': 3961.870998226913, 'ema200': 3973.3546443240048}, 'M5': {'ema50': 3973.156636502603, 'ema200': 3991.418903222428}, 'M15': {'ema50': 3983.6081463230203, 'ema200': 4010.0245384850887}, 'H1': {'ema50': 3998.6240672748486, 'ema200': 3944.086958170651}}
2025-10-10 04:20:46,835 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 180 rates, period: 14
2025-10-10 04:20:46,839 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 5.226156617086924, TRs count: 179
2025-10-10 04:20:46,860 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:20:46,861 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 2.4588173212652307, TRs count: 119
2025-10-10 04:20:46,862 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 96 rates, period: 14
2025-10-10 04:20:46,864 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 9.098558611333601, TRs count: 95
2025-10-10 04:20:46,864 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:20:46,866 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 18.80645617391291, TRs count: 119
2025-10-10 04:20:46,894 - APP.services.mt5_service - DEBUG - Đã tính toán ATR: {'M5': 5.226156617086924, 'M1': 2.4588173212652307, 'M15': 9.098558611333601, 'H1': 18.80645617391291}
2025-10-10 04:20:46,897 - APP.services.mt5_service - DEBUG - Volatility regime: trending
2025-10-10 04:20:46,913 - APP.services.mt5_service - DEBUG - Bắt đầu _nearby_key_levels cho cp: 3956.083, daily: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}, prev_day: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:20:46,933 - APP.services.mt5_service - DEBUG - Thêm PDH: 4058.033
2025-10-10 04:20:46,946 - APP.services.mt5_service - DEBUG - Thêm PDL: 3944.632
2025-10-10 04:20:46,964 - APP.services.mt5_service - DEBUG - Thêm EQ50_D: 3970.745
2025-10-10 04:20:46,982 - APP.services.mt5_service - DEBUG - Thêm DO: 3989.989
2025-10-10 04:20:46,992 - APP.services.mt5_service - DEBUG - Key level: PDH, Price: 4058.033, Relation: ABOVE, Distance: 101949.99999999981
2025-10-10 04:20:46,992 - APP.services.mt5_service - DEBUG - Key level: PDL, Price: 3944.632, Relation: BELOW, Distance: 11451.000000000022
2025-10-10 04:20:46,995 - APP.services.mt5_service - DEBUG - Key level: EQ50_D, Price: 3970.745, Relation: ABOVE, Distance: 14661.999999999807
2025-10-10 04:20:46,998 - APP.services.mt5_service - DEBUG - Key level: DO, Price: 3989.989, Relation: ABOVE, Distance: 33905.99999999995
2025-10-10 04:20:46,999 - APP.services.mt5_service - DEBUG - Kết thúc _nearby_key_levels. Số key levels: 4
2025-10-10 04:20:46,999 - APP.services.mt5_service - DEBUG - Key levels nearby: [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 101949.99999999981}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11451.000000000022}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 14661.999999999807}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 33905.99999999995}]
2025-10-10 04:20:47,000 - APP.services.mt5_service - DEBUG - Bắt đầu adr_stats cho symbol: XAUUSD, n: 20
2025-10-10 04:20:47,026 - APP.services.mt5_service - DEBUG - Kết thúc adr_stats. Kết quả: {'d5': 71.51500000000006, 'd10': 67.97180000000003, 'd20': 56.30675000000001}
2025-10-10 04:20:47,033 - APP.services.mt5_service - DEBUG - Prev day close: 3989.994
2025-10-10 04:20:47,037 - APP.services.mt5_service - DEBUG - Day range: 47.48799999999983, Day range % of ADR20: 84.33802341637517
2025-10-10 04:20:47,065 - APP.services.mt5_service - DEBUG - Position in day range: 0.19124831536387957
2025-10-10 04:20:47,068 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:20:47,070 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:20:47.070601+07:00
2025-10-10 04:20:47,093 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:20:47.070601+07:00
2025-10-10 04:20:47,094 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:20:47.070601+07:00 trong DST: True
2025-10-10 04:20:47,094 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:20:47,096 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:20:47,099 - APP.services.mt5_service - DEBUG - Killzone active: None, Mins to next killzone: 100
2025-10-10 04:20:47,099 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:47,100 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:47,102 - APP.services.mt5_service - DEBUG - Round levels: [{'level': '800', 'price': 3956.08, 'distance_pips': 0.3}, {'level': '825', 'price': 3956.082, 'distance_pips': 0.05}, {'level': '850', 'price': 3956.085, 'distance_pips': 0.2}, {'level': '875', 'price': 3956.088, 'distance_pips': 0.45}]
2025-10-10 04:20:47,134 - APP.services.mt5_service - DEBUG - ATR normalized spread: {'spread_as_pct_of_atr_m5': 0.7079772519414297}
2025-10-10 04:20:47,164 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:47,167 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:47,168 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:20:47,192 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3956.083
2025-10-10 04:20:47,195 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:20:47,196 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:20:47,200 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:47,201 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe H1.
2025-10-10 04:20:47,204 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 96 rates, lookback: 200
2025-10-10 04:20:47,232 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 96 rates, current_price: 3956.083
2025-10-10 04:20:47,233 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:20:47,234 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 96 rates, lookback: 100
2025-10-10 04:20:47,237 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:47,238 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M15.
2025-10-10 04:20:47,238 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 180 rates, lookback: 200
2025-10-10 04:20:47,268 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 180 rates, current_price: 3956.083
2025-10-10 04:20:47,268 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:20:47,272 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 180 rates, lookback: 100
2025-10-10 04:20:47,279 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:47,298 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M5.
2025-10-10 04:20:47,300 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:20:47,301 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3956.083
2025-10-10 04:20:47,301 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:20:47,302 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:20:47,303 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:47,304 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M1.
2025-10-10 04:20:47,305 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:47,305 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:47,312 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:20:47,328 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:20:47,330 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:20:47,331 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:20:47,332 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:20:47,357 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:20:47,358 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:20:47,358 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:20:47,368 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:20:47,382 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:20:47,383 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:20:47,383 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:20:47,386 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:20:47,386 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:20:47,389 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:20:47,389 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:20:47,390 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:47,390 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:47,391 - APP.services.mt5_service - DEBUG - Đã xây dựng payload MT5_DATA.
2025-10-10 04:20:47,393 - APP.utils.safe_data - DEBUG - Khởi tạo SafeData với data có: True
2025-10-10 04:20:47,415 - APP.services.mt5_service - DEBUG - Đã tạo SafeData object.
2025-10-10 04:20:47,416 - APP.services.mt5_service - DEBUG - Kết thúc build_context.
2025-10-10 04:20:47,417 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:47,419 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:20:47,421 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:20:47,445 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:47,449 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:20:47,449 - APP.core.trading.conditions - DEBUG - Bắt đầu kiểm tra các điều kiện NO-TRADE.
2025-10-10 04:20:47,450 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:47,451 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:47,452 - APP.utils.threading_utils - DEBUG - Task song song 'get_upcoming_events' hoàn tất thành công.
2025-10-10 04:20:47,452 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.03s
2025-10-10 04:20:47,452 - APP.services.mt5_service - DEBUG - Bắt đầu lấy lịch sử deals cho XAUUSD trong 7 ngày qua.
2025-10-10 04:20:47,452 - APP.utils.safe_data - DEBUG - Get top-level key 'tick': {'bid': 3956.083, 'ask': 3956.12, 'last': 0.0, 'time': 1760070045}
2025-10-10 04:20:47,460 - APP.services.mt5_service - DEBUG - Đã định dạng 82 deals cho XAUUSD.
2025-10-10 04:20:47,477 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: spread_current, default: None
2025-10-10 04:20:47,478 - APP.utils.threading_utils - DEBUG - Task song song 'get_history_deals' hoàn tất thành công.
2025-10-10 04:20:47,478 - APP.services.mt5_service - DEBUG - Tìm thấy key 'spread_current' trong dict. Giá trị: 37
2025-10-10 04:20:47,480 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:47,480 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:47,481 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:47,481 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:47,482 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:47,482 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:20:47,483 - APP.utils.safe_data - DEBUG - Get tick value 'bid': 3956.083
2025-10-10 04:20:47,483 - APP.utils.safe_data - DEBUG - Get top-level key 'key_levels_nearby': [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 101949.99999999981}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11451.000000000022}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 14661.999999999807}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 33905.99999999995}]
2025-10-10 04:20:47,484 - APP.utils.threading_utils - DEBUG - Task song song 'check_no_trade_conditions' hoàn tất thành công.
2025-10-10 04:20:47,485 - APP.utils.threading_utils - DEBUG - Task 'chart.info' (group=chart.refresh) hoàn tất sau 2.10s
2025-10-10 04:20:47,517 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:47,659 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:47,661 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:20:47,661 - APP.utils.safe_data - DEBUG - Get top-level key 'account': {'balance': 164.34, 'equity': 164.34, 'free_margin': 164.34, 'currency': 'USD', 'leverage': 2000}
2025-10-10 04:20:47,663 - APP.utils.safe_data - DEBUG - Get top-level key 'positions': []
2025-10-10 04:20:47,666 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:20:48,420 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:48,421 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:48,422 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:20:48,423 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:20:48,424 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:48,425 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:20:48,425 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:48,426 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.00s
2025-10-10 04:20:48,430 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:20:48,437 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:48,452 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:20:48,463 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:20:48,489 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:20:48,490 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:20:48,497 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:20:48,550 - APP.services.mt5_service - DEBUG - Bắt đầu build_context cho symbol: XAUUSD
2025-10-10 04:20:48,586 - APP.services.mt5_service - DEBUG - Đã đảm bảo symbol 'XAUUSD' được chọn. Chờ 0.5s để đồng bộ.
2025-10-10 04:20:49,124 - APP.services.mt5_service - DEBUG - Đã lấy symbol info, account info, tick info.
2025-10-10 04:20:49,125 - APP.services.mt5_service - WARNING - Không thể xác định múi giờ từ TerminalInfo (thiếu thuộc tính hoặc rỗng), sử dụng UTC.
2025-10-10 04:20:49,126 - APP.services.mt5_service - DEBUG - Đã xây dựng info_obj, account_obj, rules_obj.
2025-10-10 04:20:49,127 - APP.services.mt5_service - DEBUG - Current price (cp): 3955.939
2025-10-10 04:20:49,132 - APP.services.mt5_service - DEBUG - Tick stats 5m: {'ticks_per_min': 365, 'median_spread': 37, 'p90_spread': 37}
2025-10-10 04:20:49,173 - APP.services.mt5_service - DEBUG - Tick stats 30m: {'ticks_per_min': 345, 'median_spread': 37, 'p90_spread': 37}
2025-10-10 04:20:49,173 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 120
2025-10-10 04:20:49,174 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:49,189 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 1.
2025-10-10 04:20:49,196 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:49,197 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 5, bars: 180
2025-10-10 04:20:49,197 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 5 ở lần thử 1.
2025-10-10 04:20:49,200 - APP.services.mt5_service - DEBUG - Đã lấy 180 bars cho XAUUSD 5.
2025-10-10 04:20:49,201 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:49,201 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 15, bars: 96
2025-10-10 04:20:49,202 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 15 ở lần thử 1.
2025-10-10 04:20:49,203 - APP.services.mt5_service - DEBUG - Đã lấy 96 bars cho XAUUSD 15.
2025-10-10 04:20:49,204 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:49,204 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 16385, bars: 120
2025-10-10 04:20:49,204 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 16385 ở lần thử 1.
2025-10-10 04:20:49,206 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 16385.
2025-10-10 04:20:49,231 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:49,232 - APP.services.mt5_service - DEBUG - Đã lấy OHLCV series cho các khung thời gian.
2025-10-10 04:20:49,233 - APP.services.mt5_service - DEBUG - Bắt đầu tính toán các mức khung thời gian lớn từ series H1.
2025-10-10 04:20:49,236 - APP.services.mt5_service - DEBUG - Đã lấy prev_day HL: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:20:49,237 - APP.services.mt5_service - DEBUG - Đã lấy prev_week HL: {'high': 3897.216, 'low': 3763.408}
2025-10-10 04:20:49,237 - APP.services.mt5_service - DEBUG - Đã tính toán xong các mức khung thời gian lớn.
2025-10-10 04:20:49,238 - APP.services.mt5_service - DEBUG - Đã enrich daily data: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}
2025-10-10 04:20:49,238 - APP.services.mt5_service - DEBUG - Bắt đầu session_ranges_today. M1 rates count: 120
2025-10-10 04:20:49,238 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:20:49,239 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:20:49.239292+07:00
2025-10-10 04:20:49,239 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:20:49.239292+07:00
2025-10-10 04:20:49,240 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:20:49.239292+07:00 trong DST: True
2025-10-10 04:20:49,240 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:20:49,241 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:20:49,241 - APP.services.mt5_service - DEBUG - Kết thúc session_ranges_today.
2025-10-10 04:20:49,243 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 120 rates.
2025-10-10 04:20:49,243 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3969.7775423532557
2025-10-10 04:20:49,249 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 39 rates.
2025-10-10 04:20:49,266 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3983.0204215041354
2025-10-10 04:20:49,267 - APP.services.mt5_service - DEBUG - Đã tính toán sessions, session liquidity và VWAPs: {'day': 3969.7775423532557, 'asia': None, 'london': None, 'newyork_am': None, 'newyork_pm': 3983.0204215041354}
2025-10-10 04:20:49,267 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:20:49,268 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3961.870998226913
2025-10-10 04:20:49,269 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:20:49,269 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.3546443240048
2025-10-10 04:20:49,270 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 50
2025-10-10 04:20:49,270 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.156636502603
2025-10-10 04:20:49,271 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 200
2025-10-10 04:20:49,271 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3991.418903222428
2025-10-10 04:20:49,272 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 50
2025-10-10 04:20:49,272 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3983.6081463230203
2025-10-10 04:20:49,272 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 200
2025-10-10 04:20:49,272 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 4010.0245384850887
2025-10-10 04:20:49,273 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:20:49,273 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3998.6240672748486
2025-10-10 04:20:49,273 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:20:49,274 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3944.086958170651
2025-10-10 04:20:49,274 - APP.services.mt5_service - DEBUG - Đã tính toán EMA: {'M1': {'ema50': 3961.870998226913, 'ema200': 3973.3546443240048}, 'M5': {'ema50': 3973.156636502603, 'ema200': 3991.418903222428}, 'M15': {'ema50': 3983.6081463230203, 'ema200': 4010.0245384850887}, 'H1': {'ema50': 3998.6240672748486, 'ema200': 3944.086958170651}}
2025-10-10 04:20:49,276 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 180 rates, period: 14
2025-10-10 04:20:49,277 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 5.226156617086924, TRs count: 179
2025-10-10 04:20:49,277 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:20:49,280 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 2.4588173212652307, TRs count: 119
2025-10-10 04:20:49,301 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 96 rates, period: 14
2025-10-10 04:20:49,303 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 9.098558611333601, TRs count: 95
2025-10-10 04:20:49,304 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:20:49,305 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 18.80645617391291, TRs count: 119
2025-10-10 04:20:49,306 - APP.services.mt5_service - DEBUG - Đã tính toán ATR: {'M5': 5.226156617086924, 'M1': 2.4588173212652307, 'M15': 9.098558611333601, 'H1': 18.80645617391291}
2025-10-10 04:20:49,307 - APP.services.mt5_service - DEBUG - Volatility regime: trending
2025-10-10 04:20:49,307 - APP.services.mt5_service - DEBUG - Bắt đầu _nearby_key_levels cho cp: 3955.939, daily: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}, prev_day: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:20:49,310 - APP.services.mt5_service - DEBUG - Thêm PDH: 4058.033
2025-10-10 04:20:49,310 - APP.services.mt5_service - DEBUG - Thêm PDL: 3944.632
2025-10-10 04:20:49,311 - APP.services.mt5_service - DEBUG - Thêm EQ50_D: 3970.745
2025-10-10 04:20:49,337 - APP.services.mt5_service - DEBUG - Thêm DO: 3989.989
2025-10-10 04:20:49,338 - APP.services.mt5_service - DEBUG - Key level: PDH, Price: 4058.033, Relation: ABOVE, Distance: 102094.00000000004
2025-10-10 04:20:49,340 - APP.services.mt5_service - DEBUG - Key level: PDL, Price: 3944.632, Relation: BELOW, Distance: 11306.999999999789
2025-10-10 04:20:49,342 - APP.services.mt5_service - DEBUG - Key level: EQ50_D, Price: 3970.745, Relation: ABOVE, Distance: 14806.00000000004
2025-10-10 04:20:49,343 - APP.services.mt5_service - DEBUG - Key level: DO, Price: 3989.989, Relation: ABOVE, Distance: 34050.00000000018
2025-10-10 04:20:49,343 - APP.services.mt5_service - DEBUG - Kết thúc _nearby_key_levels. Số key levels: 4
2025-10-10 04:20:49,344 - APP.services.mt5_service - DEBUG - Key levels nearby: [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 102094.00000000004}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11306.999999999789}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 14806.00000000004}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 34050.00000000018}]
2025-10-10 04:20:49,344 - APP.services.mt5_service - DEBUG - Bắt đầu adr_stats cho symbol: XAUUSD, n: 20
2025-10-10 04:20:49,364 - APP.services.mt5_service - DEBUG - Kết thúc adr_stats. Kết quả: {'d5': 71.51500000000006, 'd10': 67.97180000000003, 'd20': 56.30675000000001}
2025-10-10 04:20:49,365 - APP.services.mt5_service - DEBUG - Prev day close: 3989.994
2025-10-10 04:20:49,366 - APP.services.mt5_service - DEBUG - Day range: 47.48799999999983, Day range % of ADR20: 84.33802341637517
2025-10-10 04:20:49,367 - APP.services.mt5_service - DEBUG - Position in day range: 0.18821597035039755
2025-10-10 04:20:49,368 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:20:49,368 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:20:49.368524+07:00
2025-10-10 04:20:49,368 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:20:49.368524+07:00
2025-10-10 04:20:49,369 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:20:49.368524+07:00 trong DST: True
2025-10-10 04:20:49,370 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:20:49,370 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:20:49,370 - APP.services.mt5_service - DEBUG - Killzone active: None, Mins to next killzone: 100
2025-10-10 04:20:49,371 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:49,371 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:49,371 - APP.services.mt5_service - DEBUG - Round levels: [{'level': '9300', 'price': 3955.93, 'distance_pips': 0.9}, {'level': '9325', 'price': 3955.933, 'distance_pips': 0.65}, {'level': '9350', 'price': 3955.935, 'distance_pips': 0.4}, {'level': '9375', 'price': 3955.938, 'distance_pips': 0.15}]
2025-10-10 04:20:49,372 - APP.services.mt5_service - DEBUG - ATR normalized spread: {'spread_as_pct_of_atr_m5': 0.7079772519501311}
2025-10-10 04:20:49,372 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:49,373 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:49,373 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:20:49,374 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3955.939
2025-10-10 04:20:49,374 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:20:49,375 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:20:49,376 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:49,378 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe H1.
2025-10-10 04:20:49,378 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 96 rates, lookback: 200
2025-10-10 04:20:49,402 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 96 rates, current_price: 3955.939
2025-10-10 04:20:49,405 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:20:49,405 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 96 rates, lookback: 100
2025-10-10 04:20:49,410 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:49,414 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M15.
2025-10-10 04:20:49,417 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 180 rates, lookback: 200
2025-10-10 04:20:49,418 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 180 rates, current_price: 3955.939
2025-10-10 04:20:49,426 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:49,456 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:20:49,462 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:20:49,464 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 180 rates, lookback: 100
2025-10-10 04:20:49,467 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:49,470 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:49,472 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:20:49,475 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M5.
2025-10-10 04:20:49,475 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:49,476 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:20:49,478 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.02s
2025-10-10 04:20:49,479 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3955.939
2025-10-10 04:20:49,482 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:20:49,483 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:20:49,484 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:49,485 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M1.
2025-10-10 04:20:49,493 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:49,509 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:49,510 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:20:49,510 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:20:49,511 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:49,511 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:20:49,541 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:20:49,578 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:20:49,841 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:20:49,894 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:20:49,902 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:20:49,906 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:20:49,914 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:20:49,998 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:20:49,999 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:20:50,001 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:20:50,059 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:20:50,068 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:20:50,098 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:20:50,130 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:50,131 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:50,131 - APP.services.mt5_service - DEBUG - Đã xây dựng payload MT5_DATA.
2025-10-10 04:20:50,134 - APP.utils.safe_data - DEBUG - Khởi tạo SafeData với data có: True
2025-10-10 04:20:50,136 - APP.services.mt5_service - DEBUG - Đã tạo SafeData object.
2025-10-10 04:20:50,136 - APP.services.mt5_service - DEBUG - Kết thúc build_context.
2025-10-10 04:20:50,139 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:20:50,145 - APP.core.trading.conditions - DEBUG - Bắt đầu kiểm tra các điều kiện NO-TRADE.
2025-10-10 04:20:50,177 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:50,177 - APP.utils.threading_utils - DEBUG - Task song song 'get_upcoming_events' hoàn tất thành công.
2025-10-10 04:20:50,177 - APP.services.mt5_service - DEBUG - Bắt đầu lấy lịch sử deals cho XAUUSD trong 7 ngày qua.
2025-10-10 04:20:50,178 - APP.utils.safe_data - DEBUG - Get top-level key 'tick': {'bid': 3955.939, 'ask': 3955.976, 'last': 0.0, 'time': 1760070048}
2025-10-10 04:20:50,184 - APP.services.mt5_service - DEBUG - Đã định dạng 82 deals cho XAUUSD.
2025-10-10 04:20:50,203 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: spread_current, default: None
2025-10-10 04:20:50,209 - APP.utils.threading_utils - DEBUG - Task song song 'get_history_deals' hoàn tất thành công.
2025-10-10 04:20:50,210 - APP.services.mt5_service - DEBUG - Tìm thấy key 'spread_current' trong dict. Giá trị: 37
2025-10-10 04:20:50,212 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:50,212 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:50,218 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:50,245 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:50,253 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:50,282 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:20:50,286 - APP.utils.safe_data - DEBUG - Get tick value 'bid': 3955.939
2025-10-10 04:20:50,312 - APP.utils.safe_data - DEBUG - Get top-level key 'key_levels_nearby': [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 102094.00000000004}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11306.999999999789}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 14806.00000000004}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 34050.00000000018}]
2025-10-10 04:20:50,313 - APP.utils.threading_utils - DEBUG - Task song song 'check_no_trade_conditions' hoàn tất thành công.
2025-10-10 04:20:50,314 - APP.utils.threading_utils - DEBUG - Task 'chart.info' (group=chart.refresh) hoàn tất sau 1.89s
2025-10-10 04:20:50,352 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:50,354 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:20:50,354 - APP.utils.safe_data - DEBUG - Get top-level key 'account': {'balance': 164.34, 'equity': 164.34, 'free_margin': 164.34, 'currency': 'USD', 'leverage': 2000}
2025-10-10 04:20:50,359 - APP.utils.safe_data - DEBUG - Get top-level key 'positions': []
2025-10-10 04:20:50,378 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:20:50,512 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:50,513 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:50,515 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:20:50,516 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:20:50,517 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:50,519 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:20:50,520 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:50,520 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.01s
2025-10-10 04:20:50,549 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:20:50,550 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:20:50,551 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:20:50,552 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:20:50,553 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:20:50,553 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:20:50,573 - APP.services.mt5_service - DEBUG - Bắt đầu build_context cho symbol: XAUUSD
2025-10-10 04:20:50,574 - APP.services.mt5_service - DEBUG - Đã đảm bảo symbol 'XAUUSD' được chọn. Chờ 0.5s để đồng bộ.
2025-10-10 04:20:50,618 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:51,077 - APP.services.mt5_service - DEBUG - Đã lấy symbol info, account info, tick info.
2025-10-10 04:20:51,078 - APP.services.mt5_service - WARNING - Không thể xác định múi giờ từ TerminalInfo (thiếu thuộc tính hoặc rỗng), sử dụng UTC.
2025-10-10 04:20:51,079 - APP.services.mt5_service - DEBUG - Đã xây dựng info_obj, account_obj, rules_obj.
2025-10-10 04:20:51,079 - APP.services.mt5_service - DEBUG - Current price (cp): 3955.99
2025-10-10 04:20:51,086 - APP.services.mt5_service - DEBUG - Tick stats 5m: {'ticks_per_min': 362, 'median_spread': 37, 'p90_spread': 37}
2025-10-10 04:20:51,155 - APP.services.mt5_service - DEBUG - Tick stats 30m: {'ticks_per_min': 344, 'median_spread': 37.0, 'p90_spread': 37}
2025-10-10 04:20:51,174 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 120
2025-10-10 04:20:51,174 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:51,179 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 1.
2025-10-10 04:20:51,180 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:51,180 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 5, bars: 180
2025-10-10 04:20:51,181 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 5 ở lần thử 1.
2025-10-10 04:20:51,184 - APP.services.mt5_service - DEBUG - Đã lấy 180 bars cho XAUUSD 5.
2025-10-10 04:20:51,185 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:51,185 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 15, bars: 96
2025-10-10 04:20:51,187 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 15 ở lần thử 1.
2025-10-10 04:20:51,189 - APP.services.mt5_service - DEBUG - Đã lấy 96 bars cho XAUUSD 15.
2025-10-10 04:20:51,197 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:51,208 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 16385, bars: 120
2025-10-10 04:20:51,209 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 16385 ở lần thử 1.
2025-10-10 04:20:51,215 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 16385.
2025-10-10 04:20:51,216 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:51,217 - APP.services.mt5_service - DEBUG - Đã lấy OHLCV series cho các khung thời gian.
2025-10-10 04:20:51,218 - APP.services.mt5_service - DEBUG - Bắt đầu tính toán các mức khung thời gian lớn từ series H1.
2025-10-10 04:20:51,221 - APP.services.mt5_service - DEBUG - Đã lấy prev_day HL: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:20:51,224 - APP.services.mt5_service - DEBUG - Đã lấy prev_week HL: {'high': 3897.216, 'low': 3763.408}
2025-10-10 04:20:51,246 - APP.services.mt5_service - DEBUG - Đã tính toán xong các mức khung thời gian lớn.
2025-10-10 04:20:51,248 - APP.services.mt5_service - DEBUG - Đã enrich daily data: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}
2025-10-10 04:20:51,248 - APP.services.mt5_service - DEBUG - Bắt đầu session_ranges_today. M1 rates count: 120
2025-10-10 04:20:51,249 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:20:51,250 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:20:51.250326+07:00
2025-10-10 04:20:51,250 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:20:51.250326+07:00
2025-10-10 04:20:51,251 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:20:51.250326+07:00 trong DST: True
2025-10-10 04:20:51,251 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:20:51,252 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:20:51,252 - APP.services.mt5_service - DEBUG - Kết thúc session_ranges_today.
2025-10-10 04:20:51,254 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 120 rates.
2025-10-10 04:20:51,256 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3969.7775423532557
2025-10-10 04:20:51,265 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 39 rates.
2025-10-10 04:20:51,284 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3983.0204215041354
2025-10-10 04:20:51,286 - APP.services.mt5_service - DEBUG - Đã tính toán sessions, session liquidity và VWAPs: {'day': 3969.7775423532557, 'asia': None, 'london': None, 'newyork_am': None, 'newyork_pm': 3983.0204215041354}
2025-10-10 04:20:51,287 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:20:51,287 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3961.870998226913
2025-10-10 04:20:51,287 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:20:51,288 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.3546443240048
2025-10-10 04:20:51,288 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 50
2025-10-10 04:20:51,289 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.156636502603
2025-10-10 04:20:51,289 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 200
2025-10-10 04:20:51,290 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3991.418903222428
2025-10-10 04:20:51,290 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 50
2025-10-10 04:20:51,291 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3983.6081463230203
2025-10-10 04:20:51,291 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 200
2025-10-10 04:20:51,292 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 4010.0245384850887
2025-10-10 04:20:51,294 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:20:51,312 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3998.6240672748486
2025-10-10 04:20:51,313 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:20:51,314 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3944.086958170651
2025-10-10 04:20:51,316 - APP.services.mt5_service - DEBUG - Đã tính toán EMA: {'M1': {'ema50': 3961.870998226913, 'ema200': 3973.3546443240048}, 'M5': {'ema50': 3973.156636502603, 'ema200': 3991.418903222428}, 'M15': {'ema50': 3983.6081463230203, 'ema200': 4010.0245384850887}, 'H1': {'ema50': 3998.6240672748486, 'ema200': 3944.086958170651}}
2025-10-10 04:20:51,316 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 180 rates, period: 14
2025-10-10 04:20:51,317 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 5.226156617086924, TRs count: 179
2025-10-10 04:20:51,318 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:20:51,318 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 2.4588173212652307, TRs count: 119
2025-10-10 04:20:51,319 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 96 rates, period: 14
2025-10-10 04:20:51,319 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 9.098558611333601, TRs count: 95
2025-10-10 04:20:51,319 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:20:51,320 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 18.80645617391291, TRs count: 119
2025-10-10 04:20:51,320 - APP.services.mt5_service - DEBUG - Đã tính toán ATR: {'M5': 5.226156617086924, 'M1': 2.4588173212652307, 'M15': 9.098558611333601, 'H1': 18.80645617391291}
2025-10-10 04:20:51,321 - APP.services.mt5_service - DEBUG - Volatility regime: trending
2025-10-10 04:20:51,321 - APP.services.mt5_service - DEBUG - Bắt đầu _nearby_key_levels cho cp: 3955.99, daily: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}, prev_day: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:20:51,322 - APP.services.mt5_service - DEBUG - Thêm PDH: 4058.033
2025-10-10 04:20:51,323 - APP.services.mt5_service - DEBUG - Thêm PDL: 3944.632
2025-10-10 04:20:51,323 - APP.services.mt5_service - DEBUG - Thêm EQ50_D: 3970.745
2025-10-10 04:20:51,324 - APP.services.mt5_service - DEBUG - Thêm DO: 3989.989
2025-10-10 04:20:51,324 - APP.services.mt5_service - DEBUG - Key level: PDH, Price: 4058.033, Relation: ABOVE, Distance: 102043.00000000012
2025-10-10 04:20:51,325 - APP.services.mt5_service - DEBUG - Key level: PDL, Price: 3944.632, Relation: BELOW, Distance: 11357.99999999972
2025-10-10 04:20:51,325 - APP.services.mt5_service - DEBUG - Key level: EQ50_D, Price: 3970.745, Relation: ABOVE, Distance: 14755.00000000011
2025-10-10 04:20:51,329 - APP.services.mt5_service - DEBUG - Key level: DO, Price: 3989.989, Relation: ABOVE, Distance: 33999.00000000025
2025-10-10 04:20:51,342 - APP.services.mt5_service - DEBUG - Kết thúc _nearby_key_levels. Số key levels: 4
2025-10-10 04:20:51,347 - APP.services.mt5_service - DEBUG - Key levels nearby: [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 102043.00000000012}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11357.99999999972}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 14755.00000000011}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 33999.00000000025}]
2025-10-10 04:20:51,348 - APP.services.mt5_service - DEBUG - Bắt đầu adr_stats cho symbol: XAUUSD, n: 20
2025-10-10 04:20:51,349 - APP.services.mt5_service - DEBUG - Kết thúc adr_stats. Kết quả: {'d5': 71.51500000000006, 'd10': 67.97180000000003, 'd20': 56.30675000000001}
2025-10-10 04:20:51,349 - APP.services.mt5_service - DEBUG - Prev day close: 3989.994
2025-10-10 04:20:51,350 - APP.services.mt5_service - DEBUG - Day range: 47.48799999999983, Day range % of ADR20: 84.33802341637517
2025-10-10 04:20:51,350 - APP.services.mt5_service - DEBUG - Position in day range: 0.18928992587600257
2025-10-10 04:20:51,350 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:20:51,351 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:20:51.351265+07:00
2025-10-10 04:20:51,351 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:20:51.351265+07:00
2025-10-10 04:20:51,352 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:20:51.351265+07:00 trong DST: True
2025-10-10 04:20:51,352 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:20:51,352 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:20:51,353 - APP.services.mt5_service - DEBUG - Killzone active: None, Mins to next killzone: 100
2025-10-10 04:20:51,353 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:51,354 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:51,354 - APP.services.mt5_service - DEBUG - Round levels: [{'level': '9800', 'price': 3955.98, 'distance_pips': 1.0}, {'level': '9825', 'price': 3955.983, 'distance_pips': 0.75}, {'level': '9850', 'price': 3955.985, 'distance_pips': 0.5}, {'level': '9875', 'price': 3955.988, 'distance_pips': 0.25}]
2025-10-10 04:20:51,355 - APP.services.mt5_service - DEBUG - ATR normalized spread: {'spread_as_pct_of_atr_m5': 0.7079772519501311}
2025-10-10 04:20:51,355 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:51,356 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:51,356 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:20:51,357 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3955.99
2025-10-10 04:20:51,360 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:20:51,363 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:20:51,367 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:51,372 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe H1.
2025-10-10 04:20:51,376 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 96 rates, lookback: 200
2025-10-10 04:20:51,378 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 96 rates, current_price: 3955.99
2025-10-10 04:20:51,380 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:20:51,381 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 96 rates, lookback: 100
2025-10-10 04:20:51,382 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:51,382 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M15.
2025-10-10 04:20:51,383 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 180 rates, lookback: 200
2025-10-10 04:20:51,384 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 180 rates, current_price: 3955.99
2025-10-10 04:20:51,384 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:20:51,385 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 180 rates, lookback: 100
2025-10-10 04:20:51,386 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:51,387 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M5.
2025-10-10 04:20:51,387 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:20:51,388 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3955.99
2025-10-10 04:20:51,388 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:20:51,389 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:20:51,390 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:51,390 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M1.
2025-10-10 04:20:51,395 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:51,398 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:51,408 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:20:51,410 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:20:51,412 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:20:51,413 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:20:51,414 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:20:51,414 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:20:51,415 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:20:51,415 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:20:51,415 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:20:51,416 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:20:51,416 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:20:51,417 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:20:51,417 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:20:51,418 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:20:51,418 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:20:51,418 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:20:51,419 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:51,419 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:51,419 - APP.services.mt5_service - DEBUG - Đã xây dựng payload MT5_DATA.
2025-10-10 04:20:51,420 - APP.utils.safe_data - DEBUG - Khởi tạo SafeData với data có: True
2025-10-10 04:20:51,421 - APP.services.mt5_service - DEBUG - Đã tạo SafeData object.
2025-10-10 04:20:51,421 - APP.services.mt5_service - DEBUG - Kết thúc build_context.
2025-10-10 04:20:51,422 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:20:51,423 - APP.core.trading.conditions - DEBUG - Bắt đầu kiểm tra các điều kiện NO-TRADE.
2025-10-10 04:20:51,447 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:51,448 - APP.utils.safe_data - DEBUG - Get top-level key 'tick': {'bid': 3955.99, 'ask': 3956.027, 'last': 0.0, 'time': 1760070050}
2025-10-10 04:20:51,449 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: spread_current, default: None
2025-10-10 04:20:51,450 - APP.services.mt5_service - DEBUG - Tìm thấy key 'spread_current' trong dict. Giá trị: 37
2025-10-10 04:20:51,451 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:51,451 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:51,452 - APP.utils.threading_utils - DEBUG - Task song song 'get_upcoming_events' hoàn tất thành công.
2025-10-10 04:20:51,452 - APP.services.mt5_service - DEBUG - Bắt đầu lấy lịch sử deals cho XAUUSD trong 7 ngày qua.
2025-10-10 04:20:51,453 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:51,456 - APP.services.mt5_service - DEBUG - Đã định dạng 82 deals cho XAUUSD.
2025-10-10 04:20:51,456 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:51,457 - APP.utils.threading_utils - DEBUG - Task song song 'get_history_deals' hoàn tất thành công.
2025-10-10 04:20:51,475 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:51,477 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:20:51,478 - APP.utils.safe_data - DEBUG - Get tick value 'bid': 3955.99
2025-10-10 04:20:51,479 - APP.utils.safe_data - DEBUG - Get top-level key 'key_levels_nearby': [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 102043.00000000012}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11357.99999999972}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 14755.00000000011}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 33999.00000000025}]
2025-10-10 04:20:51,480 - APP.utils.threading_utils - DEBUG - Task song song 'check_no_trade_conditions' hoàn tất thành công.
2025-10-10 04:20:51,481 - APP.utils.threading_utils - DEBUG - Task 'chart.info' (group=chart.refresh) hoàn tất sau 0.97s
2025-10-10 04:20:51,490 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:51,502 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:20:51,513 - APP.utils.safe_data - DEBUG - Get top-level key 'account': {'balance': 164.34, 'equity': 164.34, 'free_margin': 164.34, 'currency': 'USD', 'leverage': 2000}
2025-10-10 04:20:51,516 - APP.utils.safe_data - DEBUG - Get top-level key 'positions': []
2025-10-10 04:20:51,520 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:20:51,523 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:51,527 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:51,536 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:20:51,548 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:20:51,550 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:51,555 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:20:51,562 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:51,565 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.02s
2025-10-10 04:20:51,718 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:51,966 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:20:51,966 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:20:51,967 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:20:51,968 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:20:51,968 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:20:51,969 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:20:51,970 - APP.services.mt5_service - DEBUG - Bắt đầu build_context cho symbol: XAUUSD
2025-10-10 04:20:51,970 - APP.services.mt5_service - DEBUG - Đã đảm bảo symbol 'XAUUSD' được chọn. Chờ 0.5s để đồng bộ.
2025-10-10 04:20:52,472 - APP.services.mt5_service - DEBUG - Đã lấy symbol info, account info, tick info.
2025-10-10 04:20:52,473 - APP.services.mt5_service - WARNING - Không thể xác định múi giờ từ TerminalInfo (thiếu thuộc tính hoặc rỗng), sử dụng UTC.
2025-10-10 04:20:52,474 - APP.services.mt5_service - DEBUG - Đã xây dựng info_obj, account_obj, rules_obj.
2025-10-10 04:20:52,474 - APP.services.mt5_service - DEBUG - Current price (cp): 3956.022
2025-10-10 04:20:52,484 - APP.services.mt5_service - DEBUG - Tick stats 5m: {'ticks_per_min': 360, 'median_spread': 37, 'p90_spread': 37}
2025-10-10 04:20:52,553 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:52,556 - APP.services.mt5_service - DEBUG - Tick stats 30m: {'ticks_per_min': 344, 'median_spread': 37.0, 'p90_spread': 37}
2025-10-10 04:20:52,558 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:20:52,558 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 120
2025-10-10 04:20:52,559 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:52,559 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:52,561 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:20:52,564 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 1.
2025-10-10 04:20:52,564 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:52,565 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:52,565 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.01s
2025-10-10 04:20:52,566 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 5, bars: 180
2025-10-10 04:20:52,567 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 5 ở lần thử 1.
2025-10-10 04:20:52,570 - APP.services.mt5_service - DEBUG - Đã lấy 180 bars cho XAUUSD 5.
2025-10-10 04:20:52,571 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:52,572 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 15, bars: 96
2025-10-10 04:20:52,572 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 15 ở lần thử 1.
2025-10-10 04:20:52,574 - APP.services.mt5_service - DEBUG - Đã lấy 96 bars cho XAUUSD 15.
2025-10-10 04:20:52,575 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:52,575 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 16385, bars: 120
2025-10-10 04:20:52,576 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 16385 ở lần thử 1.
2025-10-10 04:20:52,580 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 16385.
2025-10-10 04:20:52,585 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:52,588 - APP.services.mt5_service - DEBUG - Đã lấy OHLCV series cho các khung thời gian.
2025-10-10 04:20:52,594 - APP.services.mt5_service - DEBUG - Bắt đầu tính toán các mức khung thời gian lớn từ series H1.
2025-10-10 04:20:52,600 - APP.services.mt5_service - DEBUG - Đã lấy prev_day HL: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:20:52,601 - APP.services.mt5_service - DEBUG - Đã lấy prev_week HL: {'high': 3897.216, 'low': 3763.408}
2025-10-10 04:20:52,601 - APP.services.mt5_service - DEBUG - Đã tính toán xong các mức khung thời gian lớn.
2025-10-10 04:20:52,602 - APP.services.mt5_service - DEBUG - Đã enrich daily data: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}
2025-10-10 04:20:52,602 - APP.services.mt5_service - DEBUG - Bắt đầu session_ranges_today. M1 rates count: 120
2025-10-10 04:20:52,603 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:20:52,603 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:20:52.603319+07:00
2025-10-10 04:20:52,603 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:20:52.603319+07:00
2025-10-10 04:20:52,604 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:20:52.603319+07:00 trong DST: True
2025-10-10 04:20:52,604 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:20:52,604 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:20:52,605 - APP.services.mt5_service - DEBUG - Kết thúc session_ranges_today.
2025-10-10 04:20:52,607 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 120 rates.
2025-10-10 04:20:52,608 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3969.7775423532557
2025-10-10 04:20:52,636 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 39 rates.
2025-10-10 04:20:52,637 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3983.0204215041354
2025-10-10 04:20:52,637 - APP.services.mt5_service - DEBUG - Đã tính toán sessions, session liquidity và VWAPs: {'day': 3969.7775423532557, 'asia': None, 'london': None, 'newyork_am': None, 'newyork_pm': 3983.0204215041354}
2025-10-10 04:20:52,638 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:20:52,639 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3961.870998226913
2025-10-10 04:20:52,639 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:20:52,640 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.3546443240048
2025-10-10 04:20:52,641 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 50
2025-10-10 04:20:52,642 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.156636502603
2025-10-10 04:20:52,642 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 200
2025-10-10 04:20:52,652 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3991.418903222428
2025-10-10 04:20:52,663 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 50
2025-10-10 04:20:52,663 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3983.6081463230203
2025-10-10 04:20:52,664 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 200
2025-10-10 04:20:52,665 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 4010.0245384850887
2025-10-10 04:20:52,665 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:20:52,666 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3998.6240672748486
2025-10-10 04:20:52,666 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:20:52,666 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3944.086958170651
2025-10-10 04:20:52,667 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:52,667 - APP.services.mt5_service - DEBUG - Đã tính toán EMA: {'M1': {'ema50': 3961.870998226913, 'ema200': 3973.3546443240048}, 'M5': {'ema50': 3973.156636502603, 'ema200': 3991.418903222428}, 'M15': {'ema50': 3983.6081463230203, 'ema200': 4010.0245384850887}, 'H1': {'ema50': 3998.6240672748486, 'ema200': 3944.086958170651}}
2025-10-10 04:20:52,700 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 180 rates, period: 14
2025-10-10 04:20:52,737 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 5.226156617086924, TRs count: 179
2025-10-10 04:20:52,790 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:20:52,825 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 2.4588173212652307, TRs count: 119
2025-10-10 04:20:52,862 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 96 rates, period: 14
2025-10-10 04:20:52,880 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 9.098558611333601, TRs count: 95
2025-10-10 04:20:52,889 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:20:52,953 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 18.80645617391291, TRs count: 119
2025-10-10 04:20:52,954 - APP.services.mt5_service - DEBUG - Đã tính toán ATR: {'M5': 5.226156617086924, 'M1': 2.4588173212652307, 'M15': 9.098558611333601, 'H1': 18.80645617391291}
2025-10-10 04:20:52,956 - APP.services.mt5_service - DEBUG - Volatility regime: trending
2025-10-10 04:20:52,956 - APP.services.mt5_service - DEBUG - Bắt đầu _nearby_key_levels cho cp: 3956.022, daily: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}, prev_day: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:20:52,957 - APP.services.mt5_service - DEBUG - Thêm PDH: 4058.033
2025-10-10 04:20:52,958 - APP.services.mt5_service - DEBUG - Thêm PDL: 3944.632
2025-10-10 04:20:52,959 - APP.services.mt5_service - DEBUG - Thêm EQ50_D: 3970.745
2025-10-10 04:20:52,989 - APP.services.mt5_service - DEBUG - Thêm DO: 3989.989
2025-10-10 04:20:53,019 - APP.services.mt5_service - DEBUG - Key level: PDH, Price: 4058.033, Relation: ABOVE, Distance: 102010.99999999997
2025-10-10 04:20:53,026 - APP.services.mt5_service - DEBUG - Key level: PDL, Price: 3944.632, Relation: BELOW, Distance: 11389.999999999873
2025-10-10 04:20:53,056 - APP.services.mt5_service - DEBUG - Key level: EQ50_D, Price: 3970.745, Relation: ABOVE, Distance: 14722.999999999956
2025-10-10 04:20:53,060 - APP.services.mt5_service - DEBUG - Key level: DO, Price: 3989.989, Relation: ABOVE, Distance: 33967.000000000095
2025-10-10 04:20:53,107 - APP.services.mt5_service - DEBUG - Kết thúc _nearby_key_levels. Số key levels: 4
2025-10-10 04:20:53,171 - APP.services.mt5_service - DEBUG - Key levels nearby: [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 102010.99999999997}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11389.999999999873}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 14722.999999999956}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 33967.000000000095}]
2025-10-10 04:20:53,177 - APP.services.mt5_service - DEBUG - Bắt đầu adr_stats cho symbol: XAUUSD, n: 20
2025-10-10 04:20:53,179 - APP.services.mt5_service - DEBUG - Kết thúc adr_stats. Kết quả: {'d5': 71.51500000000006, 'd10': 67.97180000000003, 'd20': 56.30675000000001}
2025-10-10 04:20:53,181 - APP.services.mt5_service - DEBUG - Prev day close: 3989.994
2025-10-10 04:20:53,183 - APP.services.mt5_service - DEBUG - Day range: 47.48799999999983, Day range % of ADR20: 84.33802341637517
2025-10-10 04:20:53,184 - APP.services.mt5_service - DEBUG - Position in day range: 0.18996378032344516
2025-10-10 04:20:53,185 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:20:53,187 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:20:53.187022+07:00
2025-10-10 04:20:53,188 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:20:53.187022+07:00
2025-10-10 04:20:53,189 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:20:53.187022+07:00 trong DST: True
2025-10-10 04:20:53,190 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:20:53,191 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:20:53,193 - APP.services.mt5_service - DEBUG - Killzone active: None, Mins to next killzone: 100
2025-10-10 04:20:53,223 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:53,249 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:53,257 - APP.services.mt5_service - DEBUG - Round levels: [{'level': '200', 'price': 3956.02, 'distance_pips': 0.2}, {'level': '225', 'price': 3956.023, 'distance_pips': 0.05}, {'level': '250', 'price': 3956.025, 'distance_pips': 0.3}, {'level': '275', 'price': 3956.028, 'distance_pips': 0.55}]
2025-10-10 04:20:53,280 - APP.services.mt5_service - DEBUG - ATR normalized spread: {'spread_as_pct_of_atr_m5': 0.7079772519501311}
2025-10-10 04:20:53,287 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:53,288 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:53,291 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:20:53,296 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3956.022
2025-10-10 04:20:53,318 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:20:53,320 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:20:53,330 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:53,350 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe H1.
2025-10-10 04:20:53,377 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 96 rates, lookback: 200
2025-10-10 04:20:53,414 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 96 rates, current_price: 3956.022
2025-10-10 04:20:53,477 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:20:53,479 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 96 rates, lookback: 100
2025-10-10 04:20:53,480 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:53,482 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M15.
2025-10-10 04:20:53,486 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 180 rates, lookback: 200
2025-10-10 04:20:53,530 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 180 rates, current_price: 3956.022
2025-10-10 04:20:53,533 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:20:53,534 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 180 rates, lookback: 100
2025-10-10 04:20:53,535 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:53,536 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M5.
2025-10-10 04:20:53,537 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:20:53,537 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3956.022
2025-10-10 04:20:53,538 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:20:53,540 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:20:53,541 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:53,542 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M1.
2025-10-10 04:20:53,542 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:53,543 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:53,544 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:20:53,568 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:20:53,569 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:20:53,571 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:20:53,571 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:20:53,572 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:20:53,573 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:20:53,574 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:20:53,575 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:20:53,575 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:20:53,576 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:20:53,577 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:20:53,578 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:53,578 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:20:53,601 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:20:53,602 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:20:53,603 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:20:53,603 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:53,605 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:20:53,605 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:53,606 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:53,606 - APP.services.mt5_service - DEBUG - Đã xây dựng payload MT5_DATA.
2025-10-10 04:20:53,608 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:20:53,608 - APP.utils.safe_data - DEBUG - Khởi tạo SafeData với data có: True
2025-10-10 04:20:53,609 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:53,609 - APP.services.mt5_service - DEBUG - Đã tạo SafeData object.
2025-10-10 04:20:53,610 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.01s
2025-10-10 04:20:53,611 - APP.services.mt5_service - DEBUG - Kết thúc build_context.
2025-10-10 04:20:53,636 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:20:53,638 - APP.core.trading.conditions - DEBUG - Bắt đầu kiểm tra các điều kiện NO-TRADE.
2025-10-10 04:20:53,639 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:53,639 - APP.utils.threading_utils - DEBUG - Task song song 'get_upcoming_events' hoàn tất thành công.
2025-10-10 04:20:53,639 - APP.services.mt5_service - DEBUG - Bắt đầu lấy lịch sử deals cho XAUUSD trong 7 ngày qua.
2025-10-10 04:20:53,640 - APP.utils.safe_data - DEBUG - Get top-level key 'tick': {'bid': 3956.022, 'ask': 3956.059, 'last': 0.0, 'time': 1760070052}
2025-10-10 04:20:53,643 - APP.services.mt5_service - DEBUG - Đã định dạng 82 deals cho XAUUSD.
2025-10-10 04:20:53,644 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: spread_current, default: None
2025-10-10 04:20:53,644 - APP.utils.threading_utils - DEBUG - Task song song 'get_history_deals' hoàn tất thành công.
2025-10-10 04:20:53,664 - APP.services.mt5_service - DEBUG - Tìm thấy key 'spread_current' trong dict. Giá trị: 37
2025-10-10 04:20:53,666 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:53,667 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:53,668 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:53,668 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:53,669 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:53,669 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:20:53,670 - APP.utils.safe_data - DEBUG - Get tick value 'bid': 3956.022
2025-10-10 04:20:53,670 - APP.utils.safe_data - DEBUG - Get top-level key 'key_levels_nearby': [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 102010.99999999997}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11389.999999999873}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 14722.999999999956}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 33967.000000000095}]
2025-10-10 04:20:53,671 - APP.utils.threading_utils - DEBUG - Task song song 'check_no_trade_conditions' hoàn tất thành công.
2025-10-10 04:20:53,672 - APP.utils.threading_utils - DEBUG - Task 'chart.info' (group=chart.refresh) hoàn tất sau 2.14s
2025-10-10 04:20:53,679 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:53,802 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:53,803 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:20:53,804 - APP.utils.safe_data - DEBUG - Get top-level key 'account': {'balance': 164.34, 'equity': 164.34, 'free_margin': 164.34, 'currency': 'USD', 'leverage': 2000}
2025-10-10 04:20:53,804 - APP.utils.safe_data - DEBUG - Get top-level key 'positions': []
2025-10-10 04:20:53,806 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:20:54,579 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:54,580 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:54,581 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:20:54,583 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:20:54,584 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:54,585 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:20:54,586 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:54,587 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.00s
2025-10-10 04:20:54,614 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:20:54,615 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:20:54,616 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:20:54,616 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:20:54,617 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:20:54,617 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:20:54,618 - APP.services.mt5_service - DEBUG - Bắt đầu build_context cho symbol: XAUUSD
2025-10-10 04:20:54,618 - APP.services.mt5_service - DEBUG - Đã đảm bảo symbol 'XAUUSD' được chọn. Chờ 0.5s để đồng bộ.
2025-10-10 04:20:54,680 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:55,119 - APP.services.mt5_service - DEBUG - Đã lấy symbol info, account info, tick info.
2025-10-10 04:20:55,121 - APP.services.mt5_service - WARNING - Không thể xác định múi giờ từ TerminalInfo (thiếu thuộc tính hoặc rỗng), sử dụng UTC.
2025-10-10 04:20:55,122 - APP.services.mt5_service - DEBUG - Đã xây dựng info_obj, account_obj, rules_obj.
2025-10-10 04:20:55,122 - APP.services.mt5_service - DEBUG - Current price (cp): 3956.014
2025-10-10 04:20:55,128 - APP.services.mt5_service - DEBUG - Tick stats 5m: {'ticks_per_min': 356, 'median_spread': 37.0, 'p90_spread': 37}
2025-10-10 04:20:55,172 - APP.services.mt5_service - DEBUG - Tick stats 30m: {'ticks_per_min': 344, 'median_spread': 37.0, 'p90_spread': 37}
2025-10-10 04:20:55,173 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 120
2025-10-10 04:20:55,174 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:55,176 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 1.
2025-10-10 04:20:55,177 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:55,177 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 5, bars: 180
2025-10-10 04:20:55,178 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 5 ở lần thử 1.
2025-10-10 04:20:55,184 - APP.services.mt5_service - DEBUG - Đã lấy 180 bars cho XAUUSD 5.
2025-10-10 04:20:55,201 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:55,201 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 15, bars: 96
2025-10-10 04:20:55,202 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 15 ở lần thử 1.
2025-10-10 04:20:55,204 - APP.services.mt5_service - DEBUG - Đã lấy 96 bars cho XAUUSD 15.
2025-10-10 04:20:55,204 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:55,205 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 16385, bars: 120
2025-10-10 04:20:55,205 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 16385 ở lần thử 1.
2025-10-10 04:20:55,208 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 16385.
2025-10-10 04:20:55,209 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:55,209 - APP.services.mt5_service - DEBUG - Đã lấy OHLCV series cho các khung thời gian.
2025-10-10 04:20:55,210 - APP.services.mt5_service - DEBUG - Bắt đầu tính toán các mức khung thời gian lớn từ series H1.
2025-10-10 04:20:55,213 - APP.services.mt5_service - DEBUG - Đã lấy prev_day HL: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:20:55,213 - APP.services.mt5_service - DEBUG - Đã lấy prev_week HL: {'high': 3897.216, 'low': 3763.408}
2025-10-10 04:20:55,233 - APP.services.mt5_service - DEBUG - Đã tính toán xong các mức khung thời gian lớn.
2025-10-10 04:20:55,234 - APP.services.mt5_service - DEBUG - Đã enrich daily data: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}
2025-10-10 04:20:55,235 - APP.services.mt5_service - DEBUG - Bắt đầu session_ranges_today. M1 rates count: 120
2025-10-10 04:20:55,236 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:20:55,237 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:20:55.237494+07:00
2025-10-10 04:20:55,238 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:20:55.237494+07:00
2025-10-10 04:20:55,238 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:20:55.237494+07:00 trong DST: True
2025-10-10 04:20:55,239 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:20:55,239 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:20:55,240 - APP.services.mt5_service - DEBUG - Kết thúc session_ranges_today.
2025-10-10 04:20:55,241 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 120 rates.
2025-10-10 04:20:55,242 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3969.7775423532557
2025-10-10 04:20:55,270 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 39 rates.
2025-10-10 04:20:55,272 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3983.0204215041354
2025-10-10 04:20:55,273 - APP.services.mt5_service - DEBUG - Đã tính toán sessions, session liquidity và VWAPs: {'day': 3969.7775423532557, 'asia': None, 'london': None, 'newyork_am': None, 'newyork_pm': 3983.0204215041354}
2025-10-10 04:20:55,274 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:20:55,274 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3961.870998226913
2025-10-10 04:20:55,275 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:20:55,275 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.3546443240048
2025-10-10 04:20:55,276 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 50
2025-10-10 04:20:55,277 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.156636502603
2025-10-10 04:20:55,277 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 200
2025-10-10 04:20:55,277 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3991.418903222428
2025-10-10 04:20:55,278 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 50
2025-10-10 04:20:55,278 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3983.6081463230203
2025-10-10 04:20:55,279 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 200
2025-10-10 04:20:55,279 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 4010.0245384850887
2025-10-10 04:20:55,280 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:20:55,280 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3998.6240672748486
2025-10-10 04:20:55,281 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:20:55,281 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3944.086958170651
2025-10-10 04:20:55,285 - APP.services.mt5_service - DEBUG - Đã tính toán EMA: {'M1': {'ema50': 3961.870998226913, 'ema200': 3973.3546443240048}, 'M5': {'ema50': 3973.156636502603, 'ema200': 3991.418903222428}, 'M15': {'ema50': 3983.6081463230203, 'ema200': 4010.0245384850887}, 'H1': {'ema50': 3998.6240672748486, 'ema200': 3944.086958170651}}
2025-10-10 04:20:55,305 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 180 rates, period: 14
2025-10-10 04:20:55,307 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 5.226156617086924, TRs count: 179
2025-10-10 04:20:55,308 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:20:55,309 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 2.4588173212652307, TRs count: 119
2025-10-10 04:20:55,310 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 96 rates, period: 14
2025-10-10 04:20:55,310 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 9.098558611333601, TRs count: 95
2025-10-10 04:20:55,311 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:20:55,311 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 18.80645617391291, TRs count: 119
2025-10-10 04:20:55,313 - APP.services.mt5_service - DEBUG - Đã tính toán ATR: {'M5': 5.226156617086924, 'M1': 2.4588173212652307, 'M15': 9.098558611333601, 'H1': 18.80645617391291}
2025-10-10 04:20:55,314 - APP.services.mt5_service - DEBUG - Volatility regime: trending
2025-10-10 04:20:55,338 - APP.services.mt5_service - DEBUG - Bắt đầu _nearby_key_levels cho cp: 3956.014, daily: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}, prev_day: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:20:55,341 - APP.services.mt5_service - DEBUG - Thêm PDH: 4058.033
2025-10-10 04:20:55,342 - APP.services.mt5_service - DEBUG - Thêm PDL: 3944.632
2025-10-10 04:20:55,342 - APP.services.mt5_service - DEBUG - Thêm EQ50_D: 3970.745
2025-10-10 04:20:55,343 - APP.services.mt5_service - DEBUG - Thêm DO: 3989.989
2025-10-10 04:20:55,344 - APP.services.mt5_service - DEBUG - Key level: PDH, Price: 4058.033, Relation: ABOVE, Distance: 102018.99999999978
2025-10-10 04:20:55,344 - APP.services.mt5_service - DEBUG - Key level: PDL, Price: 3944.632, Relation: BELOW, Distance: 11382.000000000062
2025-10-10 04:20:55,345 - APP.services.mt5_service - DEBUG - Key level: EQ50_D, Price: 3970.745, Relation: ABOVE, Distance: 14730.999999999767
2025-10-10 04:20:55,345 - APP.services.mt5_service - DEBUG - Key level: DO, Price: 3989.989, Relation: ABOVE, Distance: 33974.999999999905
2025-10-10 04:20:55,347 - APP.services.mt5_service - DEBUG - Kết thúc _nearby_key_levels. Số key levels: 4
2025-10-10 04:20:55,348 - APP.services.mt5_service - DEBUG - Key levels nearby: [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 102018.99999999978}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11382.000000000062}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 14730.999999999767}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 33974.999999999905}]
2025-10-10 04:20:55,348 - APP.services.mt5_service - DEBUG - Bắt đầu adr_stats cho symbol: XAUUSD, n: 20
2025-10-10 04:20:55,368 - APP.services.mt5_service - DEBUG - Kết thúc adr_stats. Kết quả: {'d5': 71.51500000000006, 'd10': 67.97180000000003, 'd20': 56.30675000000001}
2025-10-10 04:20:55,369 - APP.services.mt5_service - DEBUG - Prev day close: 3989.994
2025-10-10 04:20:55,369 - APP.services.mt5_service - DEBUG - Day range: 47.48799999999983, Day range % of ADR20: 84.33802341637517
2025-10-10 04:20:55,370 - APP.services.mt5_service - DEBUG - Position in day range: 0.1897953167115893
2025-10-10 04:20:55,371 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:20:55,371 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:20:55.371483+07:00
2025-10-10 04:20:55,371 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:20:55.371483+07:00
2025-10-10 04:20:55,372 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:20:55.371483+07:00 trong DST: True
2025-10-10 04:20:55,372 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:20:55,373 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:20:55,373 - APP.services.mt5_service - DEBUG - Killzone active: None, Mins to next killzone: 100
2025-10-10 04:20:55,373 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:55,374 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:55,374 - APP.services.mt5_service - DEBUG - Round levels: [{'level': '100', 'price': 3956.01, 'distance_pips': 0.4}, {'level': '125', 'price': 3956.013, 'distance_pips': 0.15}, {'level': '150', 'price': 3956.015, 'distance_pips': 0.1}, {'level': '175', 'price': 3956.018, 'distance_pips': 0.35}]
2025-10-10 04:20:55,375 - APP.services.mt5_service - DEBUG - ATR normalized spread: {'spread_as_pct_of_atr_m5': 0.7079772519414297}
2025-10-10 04:20:55,375 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:55,376 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:55,378 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:20:55,379 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3956.014
2025-10-10 04:20:55,379 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:20:55,380 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:20:55,381 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:55,382 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe H1.
2025-10-10 04:20:55,382 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 96 rates, lookback: 200
2025-10-10 04:20:55,385 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 96 rates, current_price: 3956.014
2025-10-10 04:20:55,406 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:20:55,407 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 96 rates, lookback: 100
2025-10-10 04:20:55,410 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:55,410 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M15.
2025-10-10 04:20:55,411 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 180 rates, lookback: 200
2025-10-10 04:20:55,412 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 180 rates, current_price: 3956.014
2025-10-10 04:20:55,413 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:20:55,413 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 180 rates, lookback: 100
2025-10-10 04:20:55,414 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:55,417 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M5.
2025-10-10 04:20:55,439 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:20:55,440 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3956.014
2025-10-10 04:20:55,442 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:20:55,443 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:20:55,444 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:55,444 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M1.
2025-10-10 04:20:55,445 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:55,445 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:55,446 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:20:55,447 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:20:55,447 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:20:55,448 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:20:55,470 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:20:55,472 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:20:55,472 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:20:55,473 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:20:55,473 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:20:55,474 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:20:55,474 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:20:55,475 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:20:55,475 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:20:55,476 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:20:55,476 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:20:55,477 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:20:55,477 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:55,478 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:55,478 - APP.services.mt5_service - DEBUG - Đã xây dựng payload MT5_DATA.
2025-10-10 04:20:55,478 - APP.utils.safe_data - DEBUG - Khởi tạo SafeData với data có: True
2025-10-10 04:20:55,480 - APP.services.mt5_service - DEBUG - Đã tạo SafeData object.
2025-10-10 04:20:55,481 - APP.services.mt5_service - DEBUG - Kết thúc build_context.
2025-10-10 04:20:55,509 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:20:55,512 - APP.core.trading.conditions - DEBUG - Bắt đầu kiểm tra các điều kiện NO-TRADE.
2025-10-10 04:20:55,513 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:55,514 - APP.utils.threading_utils - DEBUG - Task song song 'get_upcoming_events' hoàn tất thành công.
2025-10-10 04:20:55,514 - APP.services.mt5_service - DEBUG - Bắt đầu lấy lịch sử deals cho XAUUSD trong 7 ngày qua.
2025-10-10 04:20:55,516 - APP.utils.safe_data - DEBUG - Get top-level key 'tick': {'bid': 3956.014, 'ask': 3956.051, 'last': 0.0, 'time': 1760070054}
2025-10-10 04:20:55,537 - APP.services.mt5_service - DEBUG - Đã định dạng 82 deals cho XAUUSD.
2025-10-10 04:20:55,537 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: spread_current, default: None
2025-10-10 04:20:55,538 - APP.utils.threading_utils - DEBUG - Task song song 'get_history_deals' hoàn tất thành công.
2025-10-10 04:20:55,539 - APP.services.mt5_service - DEBUG - Tìm thấy key 'spread_current' trong dict. Giá trị: 37
2025-10-10 04:20:55,539 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:55,540 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:55,540 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:55,541 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:55,541 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:55,542 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:20:55,542 - APP.utils.safe_data - DEBUG - Get tick value 'bid': 3956.014
2025-10-10 04:20:55,543 - APP.utils.safe_data - DEBUG - Get top-level key 'key_levels_nearby': [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 102018.99999999978}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11382.000000000062}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 14730.999999999767}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 33974.999999999905}]
2025-10-10 04:20:55,544 - APP.utils.threading_utils - DEBUG - Task song song 'check_no_trade_conditions' hoàn tất thành công.
2025-10-10 04:20:55,545 - APP.utils.threading_utils - DEBUG - Task 'chart.info' (group=chart.refresh) hoàn tất sau 0.96s
2025-10-10 04:20:55,576 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:55,578 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:20:55,579 - APP.utils.safe_data - DEBUG - Get top-level key 'account': {'balance': 164.34, 'equity': 164.34, 'free_margin': 164.34, 'currency': 'USD', 'leverage': 2000}
2025-10-10 04:20:55,596 - APP.utils.safe_data - DEBUG - Get top-level key 'positions': []
2025-10-10 04:20:55,606 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:20:55,608 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:55,609 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:55,610 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:20:55,612 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:20:55,613 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:55,615 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:20:55,637 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:55,639 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.03s
2025-10-10 04:20:55,752 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:56,003 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:20:56,004 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:20:56,005 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:20:56,005 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:20:56,006 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:20:56,007 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:20:56,007 - APP.services.mt5_service - DEBUG - Bắt đầu build_context cho symbol: XAUUSD
2025-10-10 04:20:56,007 - APP.services.mt5_service - DEBUG - Đã đảm bảo symbol 'XAUUSD' được chọn. Chờ 0.5s để đồng bộ.
2025-10-10 04:20:56,509 - APP.services.mt5_service - DEBUG - Đã lấy symbol info, account info, tick info.
2025-10-10 04:20:56,510 - APP.services.mt5_service - WARNING - Không thể xác định múi giờ từ TerminalInfo (thiếu thuộc tính hoặc rỗng), sử dụng UTC.
2025-10-10 04:20:56,511 - APP.services.mt5_service - DEBUG - Đã xây dựng info_obj, account_obj, rules_obj.
2025-10-10 04:20:56,511 - APP.services.mt5_service - DEBUG - Current price (cp): 3955.929
2025-10-10 04:20:56,518 - APP.services.mt5_service - DEBUG - Tick stats 5m: {'ticks_per_min': 356, 'median_spread': 37.0, 'p90_spread': 37}
2025-10-10 04:20:56,563 - APP.services.mt5_service - DEBUG - Tick stats 30m: {'ticks_per_min': 344, 'median_spread': 37, 'p90_spread': 37}
2025-10-10 04:20:56,564 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 120
2025-10-10 04:20:56,565 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:56,570 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 1.
2025-10-10 04:20:56,584 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:56,585 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 5, bars: 180
2025-10-10 04:20:56,586 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 5 ở lần thử 1.
2025-10-10 04:20:56,592 - APP.services.mt5_service - DEBUG - Đã lấy 180 bars cho XAUUSD 5.
2025-10-10 04:20:56,592 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:56,593 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 15, bars: 96
2025-10-10 04:20:56,594 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 15 ở lần thử 1.
2025-10-10 04:20:56,596 - APP.services.mt5_service - DEBUG - Đã lấy 96 bars cho XAUUSD 15.
2025-10-10 04:20:56,596 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:56,597 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 16385, bars: 120
2025-10-10 04:20:56,598 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 16385 ở lần thử 1.
2025-10-10 04:20:56,614 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 16385.
2025-10-10 04:20:56,618 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:56,623 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:56,625 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:20:56,625 - APP.services.mt5_service - DEBUG - Đã lấy OHLCV series cho các khung thời gian.
2025-10-10 04:20:56,626 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:56,626 - APP.services.mt5_service - DEBUG - Bắt đầu tính toán các mức khung thời gian lớn từ series H1.
2025-10-10 04:20:56,628 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:20:56,632 - APP.services.mt5_service - DEBUG - Đã lấy prev_day HL: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:20:56,632 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:56,633 - APP.services.mt5_service - DEBUG - Đã lấy prev_week HL: {'high': 3897.216, 'low': 3763.408}
2025-10-10 04:20:56,636 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.01s
2025-10-10 04:20:56,654 - APP.services.mt5_service - DEBUG - Đã tính toán xong các mức khung thời gian lớn.
2025-10-10 04:20:56,656 - APP.services.mt5_service - DEBUG - Đã enrich daily data: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}
2025-10-10 04:20:56,657 - APP.services.mt5_service - DEBUG - Bắt đầu session_ranges_today. M1 rates count: 120
2025-10-10 04:20:56,657 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:20:56,658 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:20:56.658193+07:00
2025-10-10 04:20:56,658 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:20:56.658193+07:00
2025-10-10 04:20:56,659 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:20:56.658193+07:00 trong DST: True
2025-10-10 04:20:56,659 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:20:56,660 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:20:56,660 - APP.services.mt5_service - DEBUG - Kết thúc session_ranges_today.
2025-10-10 04:20:56,662 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 120 rates.
2025-10-10 04:20:56,662 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3969.7775423532557
2025-10-10 04:20:56,669 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 39 rates.
2025-10-10 04:20:56,687 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3983.0204215041354
2025-10-10 04:20:56,688 - APP.services.mt5_service - DEBUG - Đã tính toán sessions, session liquidity và VWAPs: {'day': 3969.7775423532557, 'asia': None, 'london': None, 'newyork_am': None, 'newyork_pm': 3983.0204215041354}
2025-10-10 04:20:56,689 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:20:56,690 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3961.870998226913
2025-10-10 04:20:56,690 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:20:56,691 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.3546443240048
2025-10-10 04:20:56,691 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 50
2025-10-10 04:20:56,692 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:56,692 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.156636502603
2025-10-10 04:20:56,706 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 200
2025-10-10 04:20:56,730 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3991.418903222428
2025-10-10 04:20:56,766 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 50
2025-10-10 04:20:56,792 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3983.6081463230203
2025-10-10 04:20:56,827 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 200
2025-10-10 04:20:56,871 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 4010.0245384850887
2025-10-10 04:20:56,901 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:20:56,971 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3998.6240672748486
2025-10-10 04:20:56,972 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:20:56,974 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3944.086958170651
2025-10-10 04:20:56,975 - APP.services.mt5_service - DEBUG - Đã tính toán EMA: {'M1': {'ema50': 3961.870998226913, 'ema200': 3973.3546443240048}, 'M5': {'ema50': 3973.156636502603, 'ema200': 3991.418903222428}, 'M15': {'ema50': 3983.6081463230203, 'ema200': 4010.0245384850887}, 'H1': {'ema50': 3998.6240672748486, 'ema200': 3944.086958170651}}
2025-10-10 04:20:57,002 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 180 rates, period: 14
2025-10-10 04:20:57,019 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 5.226156617086924, TRs count: 179
2025-10-10 04:20:57,048 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:20:57,053 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 2.4588173212652307, TRs count: 119
2025-10-10 04:20:57,080 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 96 rates, period: 14
2025-10-10 04:20:57,084 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 9.098558611333601, TRs count: 95
2025-10-10 04:20:57,086 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:20:57,087 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 18.80645617391291, TRs count: 119
2025-10-10 04:20:57,090 - APP.services.mt5_service - DEBUG - Đã tính toán ATR: {'M5': 5.226156617086924, 'M1': 2.4588173212652307, 'M15': 9.098558611333601, 'H1': 18.80645617391291}
2025-10-10 04:20:57,119 - APP.services.mt5_service - DEBUG - Volatility regime: trending
2025-10-10 04:20:57,120 - APP.services.mt5_service - DEBUG - Bắt đầu _nearby_key_levels cho cp: 3955.929, daily: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}, prev_day: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:20:57,148 - APP.services.mt5_service - DEBUG - Thêm PDH: 4058.033
2025-10-10 04:20:57,150 - APP.services.mt5_service - DEBUG - Thêm PDL: 3944.632
2025-10-10 04:20:57,151 - APP.services.mt5_service - DEBUG - Thêm EQ50_D: 3970.745
2025-10-10 04:20:57,152 - APP.services.mt5_service - DEBUG - Thêm DO: 3989.989
2025-10-10 04:20:57,154 - APP.services.mt5_service - DEBUG - Key level: PDH, Price: 4058.033, Relation: ABOVE, Distance: 102103.99999999981
2025-10-10 04:20:57,156 - APP.services.mt5_service - DEBUG - Key level: PDL, Price: 3944.632, Relation: BELOW, Distance: 11297.000000000025
2025-10-10 04:20:57,179 - APP.services.mt5_service - DEBUG - Key level: EQ50_D, Price: 3970.745, Relation: ABOVE, Distance: 14815.999999999804
2025-10-10 04:20:57,221 - APP.services.mt5_service - DEBUG - Key level: DO, Price: 3989.989, Relation: ABOVE, Distance: 34059.99999999994
2025-10-10 04:20:57,238 - APP.services.mt5_service - DEBUG - Kết thúc _nearby_key_levels. Số key levels: 4
2025-10-10 04:20:57,250 - APP.services.mt5_service - DEBUG - Key levels nearby: [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 102103.99999999981}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11297.000000000025}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 14815.999999999804}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 34059.99999999994}]
2025-10-10 04:20:57,279 - APP.services.mt5_service - DEBUG - Bắt đầu adr_stats cho symbol: XAUUSD, n: 20
2025-10-10 04:20:57,285 - APP.services.mt5_service - DEBUG - Kết thúc adr_stats. Kết quả: {'d5': 71.51500000000006, 'd10': 67.97180000000003, 'd20': 56.30675000000001}
2025-10-10 04:20:57,313 - APP.services.mt5_service - DEBUG - Prev day close: 3989.994
2025-10-10 04:20:57,317 - APP.services.mt5_service - DEBUG - Day range: 47.48799999999983, Day range % of ADR20: 84.33802341637517
2025-10-10 04:20:57,318 - APP.services.mt5_service - DEBUG - Position in day range: 0.18800539083557774
2025-10-10 04:20:57,320 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:20:57,323 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:20:57.323547+07:00
2025-10-10 04:20:57,348 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:20:57.323547+07:00
2025-10-10 04:20:57,349 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:20:57.323547+07:00 trong DST: True
2025-10-10 04:20:57,354 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:20:57,360 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:20:57,388 - APP.services.mt5_service - DEBUG - Killzone active: None, Mins to next killzone: 100
2025-10-10 04:20:57,411 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:57,413 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:57,414 - APP.services.mt5_service - DEBUG - Round levels: [{'level': '9200', 'price': 3955.92, 'distance_pips': 0.9}, {'level': '9225', 'price': 3955.923, 'distance_pips': 0.65}, {'level': '9250', 'price': 3955.925, 'distance_pips': 0.4}, {'level': '9275', 'price': 3955.928, 'distance_pips': 0.15}]
2025-10-10 04:20:57,416 - APP.services.mt5_service - DEBUG - ATR normalized spread: {'spread_as_pct_of_atr_m5': 0.7079772519414297}
2025-10-10 04:20:57,419 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:57,422 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:57,423 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:20:57,449 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3955.929
2025-10-10 04:20:57,484 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:20:57,486 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:20:57,489 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:57,516 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe H1.
2025-10-10 04:20:57,520 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 96 rates, lookback: 200
2025-10-10 04:20:57,523 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 96 rates, current_price: 3955.929
2025-10-10 04:20:57,524 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:20:57,545 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 96 rates, lookback: 100
2025-10-10 04:20:57,549 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:57,550 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M15.
2025-10-10 04:20:57,551 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 180 rates, lookback: 200
2025-10-10 04:20:57,553 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 180 rates, current_price: 3955.929
2025-10-10 04:20:57,554 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:20:57,557 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 180 rates, lookback: 100
2025-10-10 04:20:57,581 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:57,582 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M5.
2025-10-10 04:20:57,582 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:20:57,583 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3955.929
2025-10-10 04:20:57,584 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:20:57,584 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:20:57,585 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:57,586 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M1.
2025-10-10 04:20:57,587 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:57,587 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:57,588 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:20:57,588 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:20:57,590 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:20:57,591 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:20:57,593 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:20:57,617 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:20:57,619 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:20:57,620 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:20:57,620 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:20:57,621 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:20:57,623 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:20:57,623 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:20:57,624 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:20:57,647 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:57,648 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:20:57,650 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:20:57,651 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:20:57,651 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:57,652 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:20:57,653 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:57,654 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:57,654 - APP.services.mt5_service - DEBUG - Đã xây dựng payload MT5_DATA.
2025-10-10 04:20:57,655 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:20:57,656 - APP.utils.safe_data - DEBUG - Khởi tạo SafeData với data có: True
2025-10-10 04:20:57,656 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:57,657 - APP.services.mt5_service - DEBUG - Đã tạo SafeData object.
2025-10-10 04:20:57,660 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.01s
2025-10-10 04:20:57,681 - APP.services.mt5_service - DEBUG - Kết thúc build_context.
2025-10-10 04:20:57,684 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:20:57,686 - APP.core.trading.conditions - DEBUG - Bắt đầu kiểm tra các điều kiện NO-TRADE.
2025-10-10 04:20:57,686 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:57,687 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:57,688 - APP.utils.threading_utils - DEBUG - Task song song 'get_upcoming_events' hoàn tất thành công.
2025-10-10 04:20:57,688 - APP.services.mt5_service - DEBUG - Bắt đầu lấy lịch sử deals cho XAUUSD trong 7 ngày qua.
2025-10-10 04:20:57,688 - APP.utils.safe_data - DEBUG - Get top-level key 'tick': {'bid': 3955.929, 'ask': 3955.966, 'last': 0.0, 'time': 1760070056}
2025-10-10 04:20:57,758 - APP.services.mt5_service - DEBUG - Đã định dạng 82 deals cho XAUUSD.
2025-10-10 04:20:57,794 - APP.utils.threading_utils - DEBUG - Task song song 'get_history_deals' hoàn tất thành công.
2025-10-10 04:20:57,806 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: spread_current, default: None
2025-10-10 04:20:57,887 - APP.services.mt5_service - DEBUG - Tìm thấy key 'spread_current' trong dict. Giá trị: 37
2025-10-10 04:20:57,892 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:57,919 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:57,951 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:57,979 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:57,989 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:57,990 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:20:57,992 - APP.utils.safe_data - DEBUG - Get tick value 'bid': 3955.929
2025-10-10 04:20:58,015 - APP.utils.safe_data - DEBUG - Get top-level key 'key_levels_nearby': [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 102103.99999999981}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11297.000000000025}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 14815.999999999804}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 34059.99999999994}]
2025-10-10 04:20:58,018 - APP.utils.threading_utils - DEBUG - Task song song 'check_no_trade_conditions' hoàn tất thành công.
2025-10-10 04:20:58,021 - APP.utils.threading_utils - DEBUG - Task 'chart.info' (group=chart.refresh) hoàn tất sau 2.41s
2025-10-10 04:20:58,167 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:58,168 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:20:58,169 - APP.utils.safe_data - DEBUG - Get top-level key 'account': {'balance': 164.34, 'equity': 164.34, 'free_margin': 164.34, 'currency': 'USD', 'leverage': 2000}
2025-10-10 04:20:58,172 - APP.utils.safe_data - DEBUG - Get top-level key 'positions': []
2025-10-10 04:20:58,176 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:20:58,649 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:58,650 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:58,651 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:20:58,653 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:20:58,654 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:58,655 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:20:58,656 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:58,656 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.00s
2025-10-10 04:20:58,685 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:20:58,685 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:20:58,686 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:20:58,686 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:20:58,687 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:20:58,688 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:20:58,688 - APP.services.mt5_service - DEBUG - Bắt đầu build_context cho symbol: XAUUSD
2025-10-10 04:20:58,688 - APP.services.mt5_service - DEBUG - Đã đảm bảo symbol 'XAUUSD' được chọn. Chờ 0.5s để đồng bộ.
2025-10-10 04:20:58,708 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:59,013 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:20:59,014 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:20:59,189 - APP.services.mt5_service - DEBUG - Đã lấy symbol info, account info, tick info.
2025-10-10 04:20:59,191 - APP.services.mt5_service - WARNING - Không thể xác định múi giờ từ TerminalInfo (thiếu thuộc tính hoặc rỗng), sử dụng UTC.
2025-10-10 04:20:59,192 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.18s
2025-10-10 04:20:59,193 - APP.services.mt5_service - DEBUG - Đã xây dựng info_obj, account_obj, rules_obj.
2025-10-10 04:20:59,194 - APP.services.mt5_service - DEBUG - Current price (cp): 3955.898
2025-10-10 04:20:59,203 - APP.services.mt5_service - DEBUG - Tick stats 5m: {'ticks_per_min': 355, 'median_spread': 37, 'p90_spread': 37}
2025-10-10 04:20:59,259 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:20:59,265 - APP.services.mt5_service - DEBUG - Tick stats 30m: {'ticks_per_min': 344, 'median_spread': 37.0, 'p90_spread': 37}
2025-10-10 04:20:59,266 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 120
2025-10-10 04:20:59,266 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:59,269 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 1.
2025-10-10 04:20:59,269 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:59,269 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 5, bars: 180
2025-10-10 04:20:59,270 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 5 ở lần thử 1.
2025-10-10 04:20:59,273 - APP.services.mt5_service - DEBUG - Đã lấy 180 bars cho XAUUSD 5.
2025-10-10 04:20:59,273 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:59,274 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 15, bars: 96
2025-10-10 04:20:59,274 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 15 ở lần thử 1.
2025-10-10 04:20:59,276 - APP.services.mt5_service - DEBUG - Đã lấy 96 bars cho XAUUSD 15.
2025-10-10 04:20:59,276 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:59,277 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 16385, bars: 120
2025-10-10 04:20:59,277 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 16385 ở lần thử 1.
2025-10-10 04:20:59,282 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 16385.
2025-10-10 04:20:59,301 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:59,302 - APP.services.mt5_service - DEBUG - Đã lấy OHLCV series cho các khung thời gian.
2025-10-10 04:20:59,302 - APP.services.mt5_service - DEBUG - Bắt đầu tính toán các mức khung thời gian lớn từ series H1.
2025-10-10 04:20:59,305 - APP.services.mt5_service - DEBUG - Đã lấy prev_day HL: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:20:59,306 - APP.services.mt5_service - DEBUG - Đã lấy prev_week HL: {'high': 3897.216, 'low': 3763.408}
2025-10-10 04:20:59,306 - APP.services.mt5_service - DEBUG - Đã tính toán xong các mức khung thời gian lớn.
2025-10-10 04:20:59,307 - APP.services.mt5_service - DEBUG - Đã enrich daily data: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}
2025-10-10 04:20:59,307 - APP.services.mt5_service - DEBUG - Bắt đầu session_ranges_today. M1 rates count: 120
2025-10-10 04:20:59,307 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:20:59,308 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:20:59.308213+07:00
2025-10-10 04:20:59,308 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:20:59.308213+07:00
2025-10-10 04:20:59,308 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:20:59.308213+07:00 trong DST: True
2025-10-10 04:20:59,309 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:20:59,309 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:20:59,310 - APP.services.mt5_service - DEBUG - Kết thúc session_ranges_today.
2025-10-10 04:20:59,311 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 120 rates.
2025-10-10 04:20:59,312 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3969.7657399843183
2025-10-10 04:20:59,338 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 39 rates.
2025-10-10 04:20:59,339 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3983.0204215041354
2025-10-10 04:20:59,340 - APP.services.mt5_service - DEBUG - Đã tính toán sessions, session liquidity và VWAPs: {'day': 3969.7657399843183, 'asia': None, 'london': None, 'newyork_am': None, 'newyork_pm': 3983.0204215041354}
2025-10-10 04:20:59,340 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:20:59,341 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3961.8621354818147
2025-10-10 04:20:59,341 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:20:59,341 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.352395567786
2025-10-10 04:20:59,342 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 50
2025-10-10 04:20:59,342 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.1477737575046
2025-10-10 04:20:59,342 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 200
2025-10-10 04:20:59,343 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3991.4166544662094
2025-10-10 04:20:59,343 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 50
2025-10-10 04:20:59,343 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3983.599283577922
2025-10-10 04:20:59,345 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 200
2025-10-10 04:20:59,346 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 4010.02228972887
2025-10-10 04:20:59,346 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:20:59,347 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3998.6152045297504
2025-10-10 04:20:59,365 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:20:59,367 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3944.0847094144324
2025-10-10 04:20:59,367 - APP.services.mt5_service - DEBUG - Đã tính toán EMA: {'M1': {'ema50': 3961.8621354818147, 'ema200': 3973.352395567786}, 'M5': {'ema50': 3973.1477737575046, 'ema200': 3991.4166544662094}, 'M15': {'ema50': 3983.599283577922, 'ema200': 4010.02228972887}, 'H1': {'ema50': 3998.6152045297504, 'ema200': 3944.0847094144324}}
2025-10-10 04:20:59,368 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 180 rates, period: 14
2025-10-10 04:20:59,369 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 5.226799474229782, TRs count: 179
2025-10-10 04:20:59,369 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:20:59,369 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 2.459460178408089, TRs count: 119
2025-10-10 04:20:59,370 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 96 rates, period: 14
2025-10-10 04:20:59,370 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 9.098558611333601, TRs count: 95
2025-10-10 04:20:59,371 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:20:59,371 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 18.80645617391291, TRs count: 119
2025-10-10 04:20:59,372 - APP.services.mt5_service - DEBUG - Đã tính toán ATR: {'M5': 5.226799474229782, 'M1': 2.459460178408089, 'M15': 9.098558611333601, 'H1': 18.80645617391291}
2025-10-10 04:20:59,372 - APP.services.mt5_service - DEBUG - Volatility regime: trending
2025-10-10 04:20:59,373 - APP.services.mt5_service - DEBUG - Bắt đầu _nearby_key_levels cho cp: 3955.898, daily: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}, prev_day: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:20:59,373 - APP.services.mt5_service - DEBUG - Thêm PDH: 4058.033
2025-10-10 04:20:59,374 - APP.services.mt5_service - DEBUG - Thêm PDL: 3944.632
2025-10-10 04:20:59,374 - APP.services.mt5_service - DEBUG - Thêm EQ50_D: 3970.745
2025-10-10 04:20:59,375 - APP.services.mt5_service - DEBUG - Thêm DO: 3989.989
2025-10-10 04:20:59,375 - APP.services.mt5_service - DEBUG - Key level: PDH, Price: 4058.033, Relation: ABOVE, Distance: 102134.99999999977
2025-10-10 04:20:59,375 - APP.services.mt5_service - DEBUG - Key level: PDL, Price: 3944.632, Relation: BELOW, Distance: 11266.000000000076
2025-10-10 04:20:59,376 - APP.services.mt5_service - DEBUG - Key level: EQ50_D, Price: 3970.745, Relation: ABOVE, Distance: 14846.999999999753
2025-10-10 04:20:59,376 - APP.services.mt5_service - DEBUG - Key level: DO, Price: 3989.989, Relation: ABOVE, Distance: 34090.99999999989
2025-10-10 04:20:59,377 - APP.services.mt5_service - DEBUG - Kết thúc _nearby_key_levels. Số key levels: 4
2025-10-10 04:20:59,377 - APP.services.mt5_service - DEBUG - Key levels nearby: [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 102134.99999999977}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11266.000000000076}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 14846.999999999753}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 34090.99999999989}]
2025-10-10 04:20:59,377 - APP.services.mt5_service - DEBUG - Bắt đầu adr_stats cho symbol: XAUUSD, n: 20
2025-10-10 04:20:59,378 - APP.services.mt5_service - DEBUG - Kết thúc adr_stats. Kết quả: {'d5': 71.51500000000006, 'd10': 67.97180000000003, 'd20': 56.30675000000001}
2025-10-10 04:20:59,379 - APP.services.mt5_service - DEBUG - Prev day close: 3989.994
2025-10-10 04:20:59,380 - APP.services.mt5_service - DEBUG - Day range: 47.48799999999983, Day range % of ADR20: 84.33802341637517
2025-10-10 04:20:59,380 - APP.services.mt5_service - DEBUG - Position in day range: 0.18735259433962193
2025-10-10 04:20:59,380 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:20:59,404 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:20:59.404551+07:00
2025-10-10 04:20:59,407 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:20:59.404551+07:00
2025-10-10 04:20:59,408 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:20:59.404551+07:00 trong DST: True
2025-10-10 04:20:59,409 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:20:59,409 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:20:59,411 - APP.services.mt5_service - DEBUG - Killzone active: None, Mins to next killzone: 100
2025-10-10 04:20:59,412 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:59,413 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:59,435 - APP.services.mt5_service - DEBUG - Round levels: [{'level': '8900', 'price': 3955.89, 'distance_pips': 0.8}, {'level': '8925', 'price': 3955.892, 'distance_pips': 0.55}, {'level': '8950', 'price': 3955.895, 'distance_pips': 0.3}, {'level': '8975', 'price': 3955.898, 'distance_pips': 0.05}]
2025-10-10 04:20:59,436 - APP.services.mt5_service - DEBUG - ATR normalized spread: {'spread_as_pct_of_atr_m5': 0.7078901760481155}
2025-10-10 04:20:59,437 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:59,438 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:59,438 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:20:59,439 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3955.898
2025-10-10 04:20:59,440 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:20:59,441 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:20:59,442 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:59,442 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe H1.
2025-10-10 04:20:59,442 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 96 rates, lookback: 200
2025-10-10 04:20:59,443 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 96 rates, current_price: 3955.898
2025-10-10 04:20:59,444 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:20:59,444 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 96 rates, lookback: 100
2025-10-10 04:20:59,447 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:59,447 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M15.
2025-10-10 04:20:59,448 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 180 rates, lookback: 200
2025-10-10 04:20:59,470 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 180 rates, current_price: 3955.898
2025-10-10 04:20:59,473 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:20:59,474 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 180 rates, lookback: 100
2025-10-10 04:20:59,474 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:59,475 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M5.
2025-10-10 04:20:59,475 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:20:59,476 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3955.898
2025-10-10 04:20:59,476 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:20:59,477 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:20:59,479 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:20:59,480 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M1.
2025-10-10 04:20:59,480 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:59,503 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:59,504 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:20:59,505 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:20:59,506 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:20:59,506 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:20:59,507 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:20:59,507 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:20:59,507 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:20:59,508 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:20:59,509 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:20:59,509 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:20:59,510 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:20:59,510 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:20:59,510 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:20:59,511 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:20:59,511 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:20:59,513 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:20:59,513 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:59,514 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:59,537 - APP.services.mt5_service - DEBUG - Đã xây dựng payload MT5_DATA.
2025-10-10 04:20:59,538 - APP.utils.safe_data - DEBUG - Khởi tạo SafeData với data có: True
2025-10-10 04:20:59,538 - APP.services.mt5_service - DEBUG - Đã tạo SafeData object.
2025-10-10 04:20:59,539 - APP.services.mt5_service - DEBUG - Kết thúc build_context.
2025-10-10 04:20:59,540 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:20:59,541 - APP.core.trading.conditions - DEBUG - Bắt đầu kiểm tra các điều kiện NO-TRADE.
2025-10-10 04:20:59,542 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:59,542 - APP.utils.threading_utils - DEBUG - Task song song 'get_upcoming_events' hoàn tất thành công.
2025-10-10 04:20:59,543 - APP.utils.safe_data - DEBUG - Get top-level key 'tick': {'bid': 3955.898, 'ask': 3955.935, 'last': 0.0, 'time': 1760070059}
2025-10-10 04:20:59,543 - APP.services.mt5_service - DEBUG - Bắt đầu lấy lịch sử deals cho XAUUSD trong 7 ngày qua.
2025-10-10 04:20:59,544 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: spread_current, default: None
2025-10-10 04:20:59,547 - APP.services.mt5_service - DEBUG - Đã định dạng 82 deals cho XAUUSD.
2025-10-10 04:20:59,547 - APP.services.mt5_service - DEBUG - Tìm thấy key 'spread_current' trong dict. Giá trị: 37
2025-10-10 04:20:59,551 - APP.utils.threading_utils - DEBUG - Task song song 'get_history_deals' hoàn tất thành công.
2025-10-10 04:20:59,566 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:59,568 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:59,569 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:59,569 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:20:59,570 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:20:59,570 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:20:59,571 - APP.utils.safe_data - DEBUG - Get tick value 'bid': 3955.898
2025-10-10 04:20:59,571 - APP.utils.safe_data - DEBUG - Get top-level key 'key_levels_nearby': [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 102134.99999999977}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11266.000000000076}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 14846.999999999753}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 34090.99999999989}]
2025-10-10 04:20:59,571 - APP.utils.threading_utils - DEBUG - Task song song 'check_no_trade_conditions' hoàn tất thành công.
2025-10-10 04:20:59,573 - APP.utils.threading_utils - DEBUG - Task 'chart.info' (group=chart.refresh) hoàn tất sau 0.92s
2025-10-10 04:20:59,654 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:59,724 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:20:59,725 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:20:59,775 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:20:59,775 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:20:59,794 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:20:59,796 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:20:59,796 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:20:59,870 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:20:59,938 - APP.utils.safe_data - DEBUG - Get top-level key 'account': {'balance': 164.34, 'equity': 164.34, 'free_margin': 164.34, 'currency': 'USD', 'leverage': 2000}
2025-10-10 04:20:59,941 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.17s
2025-10-10 04:20:59,947 - APP.utils.safe_data - DEBUG - Get top-level key 'positions': []
2025-10-10 04:20:59,951 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:20:59,953 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:00,399 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:21:00,399 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:21:00,400 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:21:00,401 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:21:00,401 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:21:00,402 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:21:00,402 - APP.services.mt5_service - DEBUG - Bắt đầu build_context cho symbol: XAUUSD
2025-10-10 04:21:00,403 - APP.services.mt5_service - DEBUG - Đã đảm bảo symbol 'XAUUSD' được chọn. Chờ 0.5s để đồng bộ.
2025-10-10 04:21:00,774 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:00,904 - APP.services.mt5_service - DEBUG - Đã lấy symbol info, account info, tick info.
2025-10-10 04:21:00,906 - APP.services.mt5_service - WARNING - Không thể xác định múi giờ từ TerminalInfo (thiếu thuộc tính hoặc rỗng), sử dụng UTC.
2025-10-10 04:21:00,907 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:21:00,908 - APP.services.mt5_service - DEBUG - Đã xây dựng info_obj, account_obj, rules_obj.
2025-10-10 04:21:00,908 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:21:00,908 - APP.services.mt5_service - DEBUG - Current price (cp): 3956.034
2025-10-10 04:21:00,910 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:21:00,921 - APP.services.mt5_service - DEBUG - Tick stats 5m: {'ticks_per_min': 352, 'median_spread': 37, 'p90_spread': 37}
2025-10-10 04:21:00,936 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:00,948 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.17s
2025-10-10 04:21:01,005 - APP.services.mt5_service - DEBUG - Tick stats 30m: {'ticks_per_min': 344, 'median_spread': 37, 'p90_spread': 37}
2025-10-10 04:21:01,006 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:01,007 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 120
2025-10-10 04:21:01,018 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:21:01,028 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 1.
2025-10-10 04:21:01,049 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:01,056 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 5, bars: 180
2025-10-10 04:21:01,080 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 5 ở lần thử 1.
2025-10-10 04:21:01,094 - APP.services.mt5_service - DEBUG - Đã lấy 180 bars cho XAUUSD 5.
2025-10-10 04:21:01,113 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:01,129 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 15, bars: 96
2025-10-10 04:21:01,143 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 15 ở lần thử 1.
2025-10-10 04:21:01,151 - APP.services.mt5_service - DEBUG - Đã lấy 96 bars cho XAUUSD 15.
2025-10-10 04:21:01,194 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:01,214 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 16385, bars: 120
2025-10-10 04:21:01,258 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 16385 ở lần thử 1.
2025-10-10 04:21:01,281 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 16385.
2025-10-10 04:21:01,294 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:01,313 - APP.services.mt5_service - DEBUG - Đã lấy OHLCV series cho các khung thời gian.
2025-10-10 04:21:01,334 - APP.services.mt5_service - DEBUG - Bắt đầu tính toán các mức khung thời gian lớn từ series H1.
2025-10-10 04:21:01,360 - APP.services.mt5_service - DEBUG - Đã lấy prev_day HL: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:21:01,362 - APP.services.mt5_service - DEBUG - Đã lấy prev_week HL: {'high': 3897.216, 'low': 3763.408}
2025-10-10 04:21:01,364 - APP.services.mt5_service - DEBUG - Đã tính toán xong các mức khung thời gian lớn.
2025-10-10 04:21:01,365 - APP.services.mt5_service - DEBUG - Đã enrich daily data: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}
2025-10-10 04:21:01,395 - APP.services.mt5_service - DEBUG - Bắt đầu session_ranges_today. M1 rates count: 120
2025-10-10 04:21:01,406 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:21:01,430 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:21:01.429960+07:00
2025-10-10 04:21:01,435 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:21:01.429960+07:00
2025-10-10 04:21:01,439 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:21:01.429960+07:00 trong DST: True
2025-10-10 04:21:01,458 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:21:01,460 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:21:01,461 - APP.services.mt5_service - DEBUG - Kết thúc session_ranges_today.
2025-10-10 04:21:01,469 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 120 rates.
2025-10-10 04:21:01,473 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3969.7657399843183
2025-10-10 04:21:01,523 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 39 rates.
2025-10-10 04:21:01,525 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3983.0204215041354
2025-10-10 04:21:01,526 - APP.services.mt5_service - DEBUG - Đã tính toán sessions, session liquidity và VWAPs: {'day': 3969.7657399843183, 'asia': None, 'london': None, 'newyork_am': None, 'newyork_pm': 3983.0204215041354}
2025-10-10 04:21:01,531 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:21:01,533 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3961.8621354818147
2025-10-10 04:21:01,536 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:21:01,561 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.352395567786
2025-10-10 04:21:01,564 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 50
2025-10-10 04:21:01,565 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.1477737575046
2025-10-10 04:21:01,566 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 200
2025-10-10 04:21:01,566 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3991.4166544662094
2025-10-10 04:21:01,568 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 50
2025-10-10 04:21:01,570 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3983.599283577922
2025-10-10 04:21:01,597 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 200
2025-10-10 04:21:01,630 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 4010.02228972887
2025-10-10 04:21:01,659 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:21:01,662 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3998.6152045297504
2025-10-10 04:21:01,663 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:21:01,664 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3944.0847094144324
2025-10-10 04:21:01,666 - APP.services.mt5_service - DEBUG - Đã tính toán EMA: {'M1': {'ema50': 3961.8621354818147, 'ema200': 3973.352395567786}, 'M5': {'ema50': 3973.1477737575046, 'ema200': 3991.4166544662094}, 'M15': {'ema50': 3983.599283577922, 'ema200': 4010.02228972887}, 'H1': {'ema50': 3998.6152045297504, 'ema200': 3944.0847094144324}}
2025-10-10 04:21:01,667 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 180 rates, period: 14
2025-10-10 04:21:01,670 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 5.226799474229782, TRs count: 179
2025-10-10 04:21:01,696 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:21:01,728 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 2.459460178408089, TRs count: 119
2025-10-10 04:21:01,732 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 96 rates, period: 14
2025-10-10 04:21:01,736 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 9.098558611333601, TRs count: 95
2025-10-10 04:21:01,760 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:21:01,766 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 18.80645617391291, TRs count: 119
2025-10-10 04:21:01,770 - APP.services.mt5_service - DEBUG - Đã tính toán ATR: {'M5': 5.226799474229782, 'M1': 2.459460178408089, 'M15': 9.098558611333601, 'H1': 18.80645617391291}
2025-10-10 04:21:01,799 - APP.services.mt5_service - DEBUG - Volatility regime: trending
2025-10-10 04:21:01,828 - APP.services.mt5_service - DEBUG - Bắt đầu _nearby_key_levels cho cp: 3956.034, daily: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}, prev_day: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:21:01,831 - APP.services.mt5_service - DEBUG - Thêm PDH: 4058.033
2025-10-10 04:21:01,832 - APP.services.mt5_service - DEBUG - Thêm PDL: 3944.632
2025-10-10 04:21:01,836 - APP.services.mt5_service - DEBUG - Thêm EQ50_D: 3970.745
2025-10-10 04:21:01,860 - APP.services.mt5_service - DEBUG - Thêm DO: 3989.989
2025-10-10 04:21:01,861 - APP.services.mt5_service - DEBUG - Key level: PDH, Price: 4058.033, Relation: ABOVE, Distance: 101998.9999999998
2025-10-10 04:21:01,865 - APP.services.mt5_service - DEBUG - Key level: PDL, Price: 3944.632, Relation: BELOW, Distance: 11402.000000000044
2025-10-10 04:21:01,869 - APP.services.mt5_service - DEBUG - Key level: EQ50_D, Price: 3970.745, Relation: ABOVE, Distance: 14710.999999999785
2025-10-10 04:21:01,871 - APP.services.mt5_service - DEBUG - Key level: DO, Price: 3989.989, Relation: ABOVE, Distance: 33954.99999999993
2025-10-10 04:21:01,872 - APP.services.mt5_service - DEBUG - Kết thúc _nearby_key_levels. Số key levels: 4
2025-10-10 04:21:01,898 - APP.services.mt5_service - DEBUG - Key levels nearby: [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 101998.9999999998}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11402.000000000044}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 14710.999999999785}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 33954.99999999993}]
2025-10-10 04:21:01,899 - APP.services.mt5_service - DEBUG - Bắt đầu adr_stats cho symbol: XAUUSD, n: 20
2025-10-10 04:21:01,900 - APP.services.mt5_service - DEBUG - Kết thúc adr_stats. Kết quả: {'d5': 71.51500000000006, 'd10': 67.97180000000003, 'd20': 56.30675000000001}
2025-10-10 04:21:01,904 - APP.services.mt5_service - DEBUG - Prev day close: 3989.994
2025-10-10 04:21:01,905 - APP.services.mt5_service - DEBUG - Day range: 47.48799999999983, Day range % of ADR20: 84.33802341637517
2025-10-10 04:21:01,907 - APP.services.mt5_service - DEBUG - Position in day range: 0.1902164757412385
2025-10-10 04:21:01,930 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:21:01,931 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:21:01.931238+07:00
2025-10-10 04:21:01,932 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:21:01.931238+07:00
2025-10-10 04:21:01,933 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:21:01.931238+07:00 trong DST: True
2025-10-10 04:21:01,933 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:21:01,934 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:01,934 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:21:01,936 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:21:01,937 - APP.services.mt5_service - DEBUG - Killzone active: None, Mins to next killzone: 99
2025-10-10 04:21:01,938 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:21:01,942 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:21:01,962 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:01,963 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:01,964 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.03s
2025-10-10 04:21:01,965 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:01,966 - APP.services.mt5_service - DEBUG - Round levels: [{'level': '300', 'price': 3956.03, 'distance_pips': 0.4}, {'level': '325', 'price': 3956.033, 'distance_pips': 0.15}, {'level': '350', 'price': 3956.035, 'distance_pips': 0.1}, {'level': '375', 'price': 3956.038, 'distance_pips': 0.35}]
2025-10-10 04:21:01,966 - APP.services.mt5_service - DEBUG - ATR normalized spread: {'spread_as_pct_of_atr_m5': 0.7078901760481155}
2025-10-10 04:21:01,967 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:01,967 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:01,968 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:21:01,968 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3956.034
2025-10-10 04:21:01,969 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:21:01,970 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:21:01,971 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:21:01,972 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe H1.
2025-10-10 04:21:01,981 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 96 rates, lookback: 200
2025-10-10 04:21:01,993 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 96 rates, current_price: 3956.034
2025-10-10 04:21:01,995 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:21:01,995 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 96 rates, lookback: 100
2025-10-10 04:21:01,997 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:21:01,997 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M15.
2025-10-10 04:21:01,998 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 180 rates, lookback: 200
2025-10-10 04:21:01,999 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 180 rates, current_price: 3956.034
2025-10-10 04:21:02,000 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:21:02,000 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 180 rates, lookback: 100
2025-10-10 04:21:02,001 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:21:02,002 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M5.
2025-10-10 04:21:02,004 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:21:02,004 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3956.034
2025-10-10 04:21:02,033 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:21:02,034 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:02,034 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:21:02,073 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:21:02,098 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M1.
2025-10-10 04:21:02,176 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:02,190 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:02,267 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:21:02,273 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:21:02,273 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:21:02,274 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:21:02,274 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:21:02,276 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:21:02,288 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:21:02,321 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:21:02,333 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:21:02,349 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:21:02,380 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:21:02,382 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:21:02,384 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:21:02,385 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:21:02,386 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:21:02,388 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:21:02,414 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:02,418 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:02,423 - APP.services.mt5_service - DEBUG - Đã xây dựng payload MT5_DATA.
2025-10-10 04:21:02,451 - APP.utils.safe_data - DEBUG - Khởi tạo SafeData với data có: True
2025-10-10 04:21:02,452 - APP.services.mt5_service - DEBUG - Đã tạo SafeData object.
2025-10-10 04:21:02,453 - APP.services.mt5_service - DEBUG - Kết thúc build_context.
2025-10-10 04:21:02,485 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:21:02,526 - APP.core.trading.conditions - DEBUG - Bắt đầu kiểm tra các điều kiện NO-TRADE.
2025-10-10 04:21:02,528 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:02,528 - APP.utils.safe_data - DEBUG - Get top-level key 'tick': {'bid': 3956.034, 'ask': 3956.071, 'last': 0.0, 'time': 1760070060}
2025-10-10 04:21:02,529 - APP.utils.threading_utils - DEBUG - Task song song 'get_upcoming_events' hoàn tất thành công.
2025-10-10 04:21:02,529 - APP.services.mt5_service - DEBUG - Bắt đầu lấy lịch sử deals cho XAUUSD trong 7 ngày qua.
2025-10-10 04:21:02,529 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: spread_current, default: None
2025-10-10 04:21:02,534 - APP.services.mt5_service - DEBUG - Đã định dạng 82 deals cho XAUUSD.
2025-10-10 04:21:02,535 - APP.services.mt5_service - DEBUG - Tìm thấy key 'spread_current' trong dict. Giá trị: 37
2025-10-10 04:21:02,537 - APP.utils.threading_utils - DEBUG - Task song song 'get_history_deals' hoàn tất thành công.
2025-10-10 04:21:02,538 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:02,540 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:02,541 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:02,566 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:02,567 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:02,574 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:21:02,605 - APP.utils.safe_data - DEBUG - Get tick value 'bid': 3956.034
2025-10-10 04:21:02,630 - APP.utils.safe_data - DEBUG - Get top-level key 'key_levels_nearby': [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 101998.9999999998}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11402.000000000044}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 14710.999999999785}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 33954.99999999993}]
2025-10-10 04:21:02,631 - APP.utils.threading_utils - DEBUG - Task song song 'check_no_trade_conditions' hoàn tất thành công.
2025-10-10 04:21:02,635 - APP.utils.threading_utils - DEBUG - Task 'chart.info' (group=chart.refresh) hoàn tất sau 2.91s
2025-10-10 04:21:02,715 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:02,716 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:21:02,717 - APP.utils.safe_data - DEBUG - Get top-level key 'account': {'balance': 164.34, 'equity': 164.34, 'free_margin': 164.34, 'currency': 'USD', 'leverage': 2000}
2025-10-10 04:21:02,718 - APP.utils.safe_data - DEBUG - Get top-level key 'positions': []
2025-10-10 04:21:02,721 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:21:02,936 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:02,937 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:02,939 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:21:02,940 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:21:02,941 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:21:02,943 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:21:02,944 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:02,944 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.00s
2025-10-10 04:21:02,966 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:03,199 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:21:03,200 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:21:03,201 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:21:03,201 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:21:03,202 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:21:03,202 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:21:03,203 - APP.services.mt5_service - DEBUG - Bắt đầu build_context cho symbol: XAUUSD
2025-10-10 04:21:03,203 - APP.services.mt5_service - DEBUG - Đã đảm bảo symbol 'XAUUSD' được chọn. Chờ 0.5s để đồng bộ.
2025-10-10 04:21:03,704 - APP.services.mt5_service - DEBUG - Đã lấy symbol info, account info, tick info.
2025-10-10 04:21:03,706 - APP.services.mt5_service - WARNING - Không thể xác định múi giờ từ TerminalInfo (thiếu thuộc tính hoặc rỗng), sử dụng UTC.
2025-10-10 04:21:03,707 - APP.services.mt5_service - DEBUG - Đã xây dựng info_obj, account_obj, rules_obj.
2025-10-10 04:21:03,707 - APP.services.mt5_service - DEBUG - Current price (cp): 3956.304
2025-10-10 04:21:03,713 - APP.services.mt5_service - DEBUG - Tick stats 5m: {'ticks_per_min': 352, 'median_spread': 37, 'p90_spread': 37}
2025-10-10 04:21:03,756 - APP.services.mt5_service - DEBUG - Tick stats 30m: {'ticks_per_min': 345, 'median_spread': 37, 'p90_spread': 37}
2025-10-10 04:21:03,757 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 120
2025-10-10 04:21:03,780 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:21:03,784 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 1.
2025-10-10 04:21:03,785 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:03,786 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 5, bars: 180
2025-10-10 04:21:03,786 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 5 ở lần thử 1.
2025-10-10 04:21:03,789 - APP.services.mt5_service - DEBUG - Đã lấy 180 bars cho XAUUSD 5.
2025-10-10 04:21:03,789 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:03,790 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 15, bars: 96
2025-10-10 04:21:03,791 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 15 ở lần thử 1.
2025-10-10 04:21:03,796 - APP.services.mt5_service - DEBUG - Đã lấy 96 bars cho XAUUSD 15.
2025-10-10 04:21:03,815 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:03,816 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 16385, bars: 120
2025-10-10 04:21:03,818 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 16385 ở lần thử 1.
2025-10-10 04:21:03,821 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 16385.
2025-10-10 04:21:03,821 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:03,823 - APP.services.mt5_service - DEBUG - Đã lấy OHLCV series cho các khung thời gian.
2025-10-10 04:21:03,823 - APP.services.mt5_service - DEBUG - Bắt đầu tính toán các mức khung thời gian lớn từ series H1.
2025-10-10 04:21:03,832 - APP.services.mt5_service - DEBUG - Đã lấy prev_day HL: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:21:03,847 - APP.services.mt5_service - DEBUG - Đã lấy prev_week HL: {'high': 3897.216, 'low': 3763.408}
2025-10-10 04:21:03,849 - APP.services.mt5_service - DEBUG - Đã tính toán xong các mức khung thời gian lớn.
2025-10-10 04:21:03,849 - APP.services.mt5_service - DEBUG - Đã enrich daily data: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}
2025-10-10 04:21:03,850 - APP.services.mt5_service - DEBUG - Bắt đầu session_ranges_today. M1 rates count: 120
2025-10-10 04:21:03,850 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:21:03,851 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:21:03.851465+07:00
2025-10-10 04:21:03,851 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:21:03.851465+07:00
2025-10-10 04:21:03,852 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:21:03.851465+07:00 trong DST: True
2025-10-10 04:21:03,852 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:21:03,853 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:21:03,853 - APP.services.mt5_service - DEBUG - Kết thúc session_ranges_today.
2025-10-10 04:21:03,854 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 120 rates.
2025-10-10 04:21:03,855 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3969.7043269918922
2025-10-10 04:21:03,861 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 38 rates.
2025-10-10 04:21:03,879 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3983.016333802431
2025-10-10 04:21:03,881 - APP.services.mt5_service - DEBUG - Đã tính toán sessions, session liquidity và VWAPs: {'day': 3969.7043269918922, 'asia': None, 'london': None, 'newyork_am': None, 'newyork_pm': 3983.016333802431}
2025-10-10 04:21:03,882 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:21:03,883 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3961.6516915946486
2025-10-10 04:21:03,883 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:21:03,883 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.2116402224224
2025-10-10 04:21:03,884 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 50
2025-10-10 04:21:03,884 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.1653031692695
2025-10-10 04:21:03,885 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 200
2025-10-10 04:21:03,885 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3991.4211022274035
2025-10-10 04:21:03,885 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 50
2025-10-10 04:21:03,886 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3983.616812989687
2025-10-10 04:21:03,886 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 200
2025-10-10 04:21:03,886 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 4010.026737490064
2025-10-10 04:21:03,887 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:21:03,888 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3998.632733941515
2025-10-10 04:21:03,888 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:21:03,889 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3944.0891571756265
2025-10-10 04:21:03,889 - APP.services.mt5_service - DEBUG - Đã tính toán EMA: {'M1': {'ema50': 3961.6516915946486, 'ema200': 3973.2116402224224}, 'M5': {'ema50': 3973.1653031692695, 'ema200': 3991.4211022274035}, 'M15': {'ema50': 3983.616812989687, 'ema200': 4010.026737490064}, 'H1': {'ema50': 3998.632733941515, 'ema200': 3944.0891571756265}}
2025-10-10 04:21:03,890 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 180 rates, period: 14
2025-10-10 04:21:03,891 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 5.24094233137263, TRs count: 179
2025-10-10 04:21:03,891 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:21:03,892 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 2.303082561481744, TRs count: 119
2025-10-10 04:21:03,912 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 96 rates, period: 14
2025-10-10 04:21:03,913 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 9.101201468476477, TRs count: 95
2025-10-10 04:21:03,913 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:21:03,914 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 18.80645617391291, TRs count: 119
2025-10-10 04:21:03,914 - APP.services.mt5_service - DEBUG - Đã tính toán ATR: {'M5': 5.24094233137263, 'M1': 2.303082561481744, 'M15': 9.101201468476477, 'H1': 18.80645617391291}
2025-10-10 04:21:03,916 - APP.services.mt5_service - DEBUG - Volatility regime: trending
2025-10-10 04:21:03,917 - APP.services.mt5_service - DEBUG - Bắt đầu _nearby_key_levels cho cp: 3956.304, daily: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}, prev_day: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:21:03,918 - APP.services.mt5_service - DEBUG - Thêm PDH: 4058.033
2025-10-10 04:21:03,918 - APP.services.mt5_service - DEBUG - Thêm PDL: 3944.632
2025-10-10 04:21:03,918 - APP.services.mt5_service - DEBUG - Thêm EQ50_D: 3970.745
2025-10-10 04:21:03,919 - APP.services.mt5_service - DEBUG - Thêm DO: 3989.989
2025-10-10 04:21:03,919 - APP.services.mt5_service - DEBUG - Key level: PDH, Price: 4058.033, Relation: ABOVE, Distance: 101728.99999999981
2025-10-10 04:21:03,919 - APP.services.mt5_service - DEBUG - Key level: PDL, Price: 3944.632, Relation: BELOW, Distance: 11672.000000000025
2025-10-10 04:21:03,920 - APP.services.mt5_service - DEBUG - Key level: EQ50_D, Price: 3970.745, Relation: ABOVE, Distance: 14440.999999999804
2025-10-10 04:21:03,920 - APP.services.mt5_service - DEBUG - Key level: DO, Price: 3989.989, Relation: ABOVE, Distance: 33684.99999999994
2025-10-10 04:21:03,921 - APP.services.mt5_service - DEBUG - Kết thúc _nearby_key_levels. Số key levels: 4
2025-10-10 04:21:03,921 - APP.services.mt5_service - DEBUG - Key levels nearby: [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 101728.99999999981}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11672.000000000025}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 14440.999999999804}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 33684.99999999994}]
2025-10-10 04:21:03,922 - APP.services.mt5_service - DEBUG - Bắt đầu adr_stats cho symbol: XAUUSD, n: 20
2025-10-10 04:21:03,923 - APP.services.mt5_service - DEBUG - Kết thúc adr_stats. Kết quả: {'d5': 71.51500000000006, 'd10': 67.97180000000003, 'd20': 56.30675000000001}
2025-10-10 04:21:03,924 - APP.services.mt5_service - DEBUG - Prev day close: 3989.994
2025-10-10 04:21:03,924 - APP.services.mt5_service - DEBUG - Day range: 47.48799999999983, Day range % of ADR20: 84.33802341637517
2025-10-10 04:21:03,925 - APP.services.mt5_service - DEBUG - Position in day range: 0.1959021226415077
2025-10-10 04:21:03,925 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:21:03,950 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:03,951 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:21:03.951293+07:00
2025-10-10 04:21:03,952 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:21:03.951293+07:00
2025-10-10 04:21:03,953 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:21:03.951293+07:00 trong DST: True
2025-10-10 04:21:03,954 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:21:03,955 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:21:03,956 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:21:03,958 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:21:03,959 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:21:03,964 - APP.services.mt5_service - DEBUG - Killzone active: None, Mins to next killzone: 99
2025-10-10 04:21:03,969 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:03,971 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.02s
2025-10-10 04:21:03,978 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:03,981 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:03,982 - APP.services.mt5_service - DEBUG - Round levels: [{'level': '3000', 'price': 3956.3, 'distance_pips': 0.4}, {'level': '3025', 'price': 3956.303, 'distance_pips': 0.15}, {'level': '3050', 'price': 3956.305, 'distance_pips': 0.1}, {'level': '3075', 'price': 3956.308, 'distance_pips': 0.35}]
2025-10-10 04:21:03,983 - APP.services.mt5_service - DEBUG - ATR normalized spread: {'spread_as_pct_of_atr_m5': 0.70597991087066}
2025-10-10 04:21:03,984 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:03,984 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:03,985 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:21:03,986 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3956.304
2025-10-10 04:21:03,987 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:21:03,987 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:21:03,988 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:21:03,988 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe H1.
2025-10-10 04:21:03,989 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 96 rates, lookback: 200
2025-10-10 04:21:03,989 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 96 rates, current_price: 3956.304
2025-10-10 04:21:03,990 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:21:03,991 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 96 rates, lookback: 100
2025-10-10 04:21:03,991 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:21:03,992 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M15.
2025-10-10 04:21:04,009 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 180 rates, lookback: 200
2025-10-10 04:21:04,017 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 180 rates, current_price: 3956.304
2025-10-10 04:21:04,019 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:21:04,020 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 180 rates, lookback: 100
2025-10-10 04:21:04,020 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:04,021 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:21:04,055 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M5.
2025-10-10 04:21:04,112 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:21:04,138 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3956.304
2025-10-10 04:21:04,179 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:21:04,188 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:21:04,239 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:21:04,280 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M1.
2025-10-10 04:21:04,292 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:04,321 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:04,344 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:21:04,350 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:21:04,377 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:21:04,431 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:21:04,465 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:21:04,479 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:21:04,483 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:21:04,486 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:21:04,488 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:21:04,489 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:21:04,490 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:21:04,492 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:21:04,520 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:21:04,521 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:21:04,522 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:21:04,523 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:21:04,524 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:04,526 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:04,552 - APP.services.mt5_service - DEBUG - Đã xây dựng payload MT5_DATA.
2025-10-10 04:21:04,555 - APP.utils.safe_data - DEBUG - Khởi tạo SafeData với data có: True
2025-10-10 04:21:04,593 - APP.services.mt5_service - DEBUG - Đã tạo SafeData object.
2025-10-10 04:21:04,620 - APP.services.mt5_service - DEBUG - Kết thúc build_context.
2025-10-10 04:21:04,653 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:21:04,657 - APP.core.trading.conditions - DEBUG - Bắt đầu kiểm tra các điều kiện NO-TRADE.
2025-10-10 04:21:04,660 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:04,660 - APP.utils.threading_utils - DEBUG - Task song song 'get_upcoming_events' hoàn tất thành công.
2025-10-10 04:21:04,660 - APP.services.mt5_service - DEBUG - Bắt đầu lấy lịch sử deals cho XAUUSD trong 7 ngày qua.
2025-10-10 04:21:04,661 - APP.utils.safe_data - DEBUG - Get top-level key 'tick': {'bid': 3956.304, 'ask': 3956.341, 'last': 0.0, 'time': 1760070063}
2025-10-10 04:21:04,664 - APP.services.mt5_service - DEBUG - Đã định dạng 82 deals cho XAUUSD.
2025-10-10 04:21:04,664 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: spread_current, default: None
2025-10-10 04:21:04,666 - APP.utils.threading_utils - DEBUG - Task song song 'get_history_deals' hoàn tất thành công.
2025-10-10 04:21:04,667 - APP.services.mt5_service - DEBUG - Tìm thấy key 'spread_current' trong dict. Giá trị: 37
2025-10-10 04:21:04,669 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:04,730 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:04,733 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:04,740 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:04,773 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:04,778 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:21:04,783 - APP.utils.safe_data - DEBUG - Get tick value 'bid': 3956.304
2025-10-10 04:21:04,785 - APP.utils.safe_data - DEBUG - Get top-level key 'key_levels_nearby': [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 101728.99999999981}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11672.000000000025}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 14440.999999999804}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 33684.99999999994}]
2025-10-10 04:21:04,787 - APP.utils.threading_utils - DEBUG - Task song song 'check_no_trade_conditions' hoàn tất thành công.
2025-10-10 04:21:04,792 - APP.utils.threading_utils - DEBUG - Task 'chart.info' (group=chart.refresh) hoàn tất sau 1.85s
2025-10-10 04:21:04,827 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:04,835 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:21:04,849 - APP.utils.safe_data - DEBUG - Get top-level key 'account': {'balance': 164.34, 'equity': 164.34, 'free_margin': 164.34, 'currency': 'USD', 'leverage': 2000}
2025-10-10 04:21:04,851 - APP.utils.safe_data - DEBUG - Get top-level key 'positions': []
2025-10-10 04:21:04,854 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:21:04,953 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:04,954 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:04,955 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:21:04,957 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:21:04,958 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:21:04,959 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:21:04,959 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:04,960 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.00s
2025-10-10 04:21:04,963 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:21:04,964 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:21:04,964 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:21:04,965 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:21:04,965 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:21:04,966 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:21:04,966 - APP.services.mt5_service - DEBUG - Bắt đầu build_context cho symbol: XAUUSD
2025-10-10 04:21:04,967 - APP.services.mt5_service - DEBUG - Đã đảm bảo symbol 'XAUUSD' được chọn. Chờ 0.5s để đồng bộ.
2025-10-10 04:21:05,060 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:05,468 - APP.services.mt5_service - DEBUG - Đã lấy symbol info, account info, tick info.
2025-10-10 04:21:05,469 - APP.services.mt5_service - WARNING - Không thể xác định múi giờ từ TerminalInfo (thiếu thuộc tính hoặc rỗng), sử dụng UTC.
2025-10-10 04:21:05,470 - APP.services.mt5_service - DEBUG - Đã xây dựng info_obj, account_obj, rules_obj.
2025-10-10 04:21:05,471 - APP.services.mt5_service - DEBUG - Current price (cp): 3956.31
2025-10-10 04:21:05,476 - APP.services.mt5_service - DEBUG - Tick stats 5m: {'ticks_per_min': 351, 'median_spread': 37, 'p90_spread': 37}
2025-10-10 04:21:05,522 - APP.services.mt5_service - DEBUG - Tick stats 30m: {'ticks_per_min': 345, 'median_spread': 37, 'p90_spread': 37}
2025-10-10 04:21:05,523 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 120
2025-10-10 04:21:05,523 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:21:05,527 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 1.
2025-10-10 04:21:05,527 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:05,528 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 5, bars: 180
2025-10-10 04:21:05,549 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 5 ở lần thử 1.
2025-10-10 04:21:05,554 - APP.services.mt5_service - DEBUG - Đã lấy 180 bars cho XAUUSD 5.
2025-10-10 04:21:05,555 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:05,555 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 15, bars: 96
2025-10-10 04:21:05,556 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 15 ở lần thử 1.
2025-10-10 04:21:05,558 - APP.services.mt5_service - DEBUG - Đã lấy 96 bars cho XAUUSD 15.
2025-10-10 04:21:05,558 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:05,559 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 16385, bars: 120
2025-10-10 04:21:05,560 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 16385 ở lần thử 1.
2025-10-10 04:21:05,563 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 16385.
2025-10-10 04:21:05,586 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:05,587 - APP.services.mt5_service - DEBUG - Đã lấy OHLCV series cho các khung thời gian.
2025-10-10 04:21:05,588 - APP.services.mt5_service - DEBUG - Bắt đầu tính toán các mức khung thời gian lớn từ series H1.
2025-10-10 04:21:05,592 - APP.services.mt5_service - DEBUG - Đã lấy prev_day HL: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:21:05,594 - APP.services.mt5_service - DEBUG - Đã lấy prev_week HL: {'high': 3897.216, 'low': 3763.408}
2025-10-10 04:21:05,620 - APP.services.mt5_service - DEBUG - Đã tính toán xong các mức khung thời gian lớn.
2025-10-10 04:21:05,621 - APP.services.mt5_service - DEBUG - Đã enrich daily data: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}
2025-10-10 04:21:05,622 - APP.services.mt5_service - DEBUG - Bắt đầu session_ranges_today. M1 rates count: 120
2025-10-10 04:21:05,622 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:21:05,623 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:21:05.623623+07:00
2025-10-10 04:21:05,624 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:21:05.623623+07:00
2025-10-10 04:21:05,624 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:21:05.623623+07:00 trong DST: True
2025-10-10 04:21:05,624 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:21:05,625 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:21:05,625 - APP.services.mt5_service - DEBUG - Kết thúc session_ranges_today.
2025-10-10 04:21:05,627 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 120 rates.
2025-10-10 04:21:05,628 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3969.6984425297264
2025-10-10 04:21:05,635 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 38 rates.
2025-10-10 04:21:05,654 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3983.016333802431
2025-10-10 04:21:05,655 - APP.services.mt5_service - DEBUG - Đã tính toán sessions, session liquidity và VWAPs: {'day': 3969.6984425297264, 'asia': None, 'london': None, 'newyork_am': None, 'newyork_pm': 3983.016333802431}
2025-10-10 04:21:05,656 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:21:05,656 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3961.643652378962
2025-10-10 04:21:05,657 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:21:05,657 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.2096004214272
2025-10-10 04:21:05,658 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 50
2025-10-10 04:21:05,658 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.1560090516223
2025-10-10 04:21:05,659 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 200
2025-10-10 04:21:05,659 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3991.4187440184483
2025-10-10 04:21:05,660 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 50
2025-10-10 04:21:05,661 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3983.6075188720397
2025-10-10 04:21:05,661 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 200
2025-10-10 04:21:05,669 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 4010.024379281109
2025-10-10 04:21:05,676 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:21:05,681 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3998.623439823868
2025-10-10 04:21:05,682 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:21:05,683 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3944.0867989666713
2025-10-10 04:21:05,684 - APP.services.mt5_service - DEBUG - Đã tính toán EMA: {'M1': {'ema50': 3961.643652378962, 'ema200': 3973.2096004214272}, 'M5': {'ema50': 3973.1560090516223, 'ema200': 3991.4187440184483}, 'M15': {'ema50': 3983.6075188720397, 'ema200': 4010.024379281109}, 'H1': {'ema50': 3998.623439823868, 'ema200': 3944.0867989666713}}
2025-10-10 04:21:05,684 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 180 rates, period: 14
2025-10-10 04:21:05,685 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 5.241370902801191, TRs count: 179
2025-10-10 04:21:05,686 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:21:05,686 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 2.3035111329103057, TRs count: 119
2025-10-10 04:21:05,687 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 96 rates, period: 14
2025-10-10 04:21:05,687 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 9.10163003990504, TRs count: 95
2025-10-10 04:21:05,688 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:21:05,688 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 18.80645617391291, TRs count: 119
2025-10-10 04:21:05,689 - APP.services.mt5_service - DEBUG - Đã tính toán ATR: {'M5': 5.241370902801191, 'M1': 2.3035111329103057, 'M15': 9.10163003990504, 'H1': 18.80645617391291}
2025-10-10 04:21:05,689 - APP.services.mt5_service - DEBUG - Volatility regime: trending
2025-10-10 04:21:05,690 - APP.services.mt5_service - DEBUG - Bắt đầu _nearby_key_levels cho cp: 3956.31, daily: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}, prev_day: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:21:05,690 - APP.services.mt5_service - DEBUG - Thêm PDH: 4058.033
2025-10-10 04:21:05,690 - APP.services.mt5_service - DEBUG - Thêm PDL: 3944.632
2025-10-10 04:21:05,691 - APP.services.mt5_service - DEBUG - Thêm EQ50_D: 3970.745
2025-10-10 04:21:05,691 - APP.services.mt5_service - DEBUG - Thêm DO: 3989.989
2025-10-10 04:21:05,691 - APP.services.mt5_service - DEBUG - Key level: PDH, Price: 4058.033, Relation: ABOVE, Distance: 101722.99999999996
2025-10-10 04:21:05,692 - APP.services.mt5_service - DEBUG - Key level: PDL, Price: 3944.632, Relation: BELOW, Distance: 11677.999999999884
2025-10-10 04:21:05,692 - APP.services.mt5_service - DEBUG - Key level: EQ50_D, Price: 3970.745, Relation: ABOVE, Distance: 14434.999999999945
2025-10-10 04:21:05,692 - APP.services.mt5_service - DEBUG - Key level: DO, Price: 3989.989, Relation: ABOVE, Distance: 33679.00000000009
2025-10-10 04:21:05,693 - APP.services.mt5_service - DEBUG - Kết thúc _nearby_key_levels. Số key levels: 4
2025-10-10 04:21:05,694 - APP.services.mt5_service - DEBUG - Key levels nearby: [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 101722.99999999996}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11677.999999999884}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 14434.999999999945}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 33679.00000000009}]
2025-10-10 04:21:05,694 - APP.services.mt5_service - DEBUG - Bắt đầu adr_stats cho symbol: XAUUSD, n: 20
2025-10-10 04:21:05,695 - APP.services.mt5_service - DEBUG - Kết thúc adr_stats. Kết quả: {'d5': 71.51500000000006, 'd10': 67.97180000000003, 'd20': 56.30675000000001}
2025-10-10 04:21:05,698 - APP.services.mt5_service - DEBUG - Prev day close: 3989.994
2025-10-10 04:21:05,704 - APP.services.mt5_service - DEBUG - Day range: 47.48799999999983, Day range % of ADR20: 84.33802341637517
2025-10-10 04:21:05,706 - APP.services.mt5_service - DEBUG - Position in day range: 0.19602847035039958
2025-10-10 04:21:05,707 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:21:05,718 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:21:05.718311+07:00
2025-10-10 04:21:05,720 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:21:05.718311+07:00
2025-10-10 04:21:05,721 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:21:05.718311+07:00 trong DST: True
2025-10-10 04:21:05,722 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:21:05,723 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:21:05,723 - APP.services.mt5_service - DEBUG - Killzone active: None, Mins to next killzone: 99
2025-10-10 04:21:05,723 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:05,724 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:05,725 - APP.services.mt5_service - DEBUG - Round levels: [{'level': '3100', 'price': 3956.31, 'distance_pips': 0.0}, {'level': '3125', 'price': 3956.312, 'distance_pips': 0.25}, {'level': '3150', 'price': 3956.315, 'distance_pips': 0.5}, {'level': '3175', 'price': 3956.318, 'distance_pips': 0.75}]
2025-10-10 04:21:05,725 - APP.services.mt5_service - DEBUG - ATR normalized spread: {'spread_as_pct_of_atr_m5': 0.7059221849857583}
2025-10-10 04:21:05,725 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:05,726 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:05,726 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:21:05,727 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3956.31
2025-10-10 04:21:05,728 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:21:05,728 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:21:05,749 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:21:05,752 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe H1.
2025-10-10 04:21:05,753 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 96 rates, lookback: 200
2025-10-10 04:21:05,753 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 96 rates, current_price: 3956.31
2025-10-10 04:21:05,754 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:21:05,754 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 96 rates, lookback: 100
2025-10-10 04:21:05,755 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:21:05,755 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M15.
2025-10-10 04:21:05,755 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 180 rates, lookback: 200
2025-10-10 04:21:05,756 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 180 rates, current_price: 3956.31
2025-10-10 04:21:05,757 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:21:05,758 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 180 rates, lookback: 100
2025-10-10 04:21:05,758 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:21:05,759 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M5.
2025-10-10 04:21:05,760 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:21:05,761 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3956.31
2025-10-10 04:21:05,761 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:21:05,775 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:21:05,782 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:21:05,784 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M1.
2025-10-10 04:21:05,786 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:05,786 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:05,786 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:21:05,787 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:21:05,787 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:21:05,788 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:21:05,788 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:21:05,788 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:21:05,788 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:21:05,789 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:21:05,789 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:21:05,789 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:21:05,790 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:21:05,791 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:21:05,791 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:21:05,792 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:21:05,793 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:21:05,793 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:21:05,794 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:05,794 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:05,810 - APP.services.mt5_service - DEBUG - Đã xây dựng payload MT5_DATA.
2025-10-10 04:21:05,818 - APP.utils.safe_data - DEBUG - Khởi tạo SafeData với data có: True
2025-10-10 04:21:05,819 - APP.services.mt5_service - DEBUG - Đã tạo SafeData object.
2025-10-10 04:21:05,820 - APP.services.mt5_service - DEBUG - Kết thúc build_context.
2025-10-10 04:21:05,821 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:21:05,822 - APP.core.trading.conditions - DEBUG - Bắt đầu kiểm tra các điều kiện NO-TRADE.
2025-10-10 04:21:05,824 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:05,825 - APP.utils.threading_utils - DEBUG - Task song song 'get_upcoming_events' hoàn tất thành công.
2025-10-10 04:21:05,825 - APP.utils.safe_data - DEBUG - Get top-level key 'tick': {'bid': 3956.31, 'ask': 3956.347, 'last': 0.0, 'time': 1760070065}
2025-10-10 04:21:05,825 - APP.services.mt5_service - DEBUG - Bắt đầu lấy lịch sử deals cho XAUUSD trong 7 ngày qua.
2025-10-10 04:21:05,827 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: spread_current, default: None
2025-10-10 04:21:05,833 - APP.services.mt5_service - DEBUG - Đã định dạng 82 deals cho XAUUSD.
2025-10-10 04:21:05,844 - APP.services.mt5_service - DEBUG - Tìm thấy key 'spread_current' trong dict. Giá trị: 37
2025-10-10 04:21:05,848 - APP.utils.threading_utils - DEBUG - Task song song 'get_history_deals' hoàn tất thành công.
2025-10-10 04:21:05,849 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:05,850 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:05,851 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:05,851 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:05,852 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:05,852 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:21:05,853 - APP.utils.safe_data - DEBUG - Get tick value 'bid': 3956.31
2025-10-10 04:21:05,853 - APP.utils.safe_data - DEBUG - Get top-level key 'key_levels_nearby': [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 101722.99999999996}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11677.999999999884}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 14434.999999999945}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 33679.00000000009}]
2025-10-10 04:21:05,854 - APP.utils.threading_utils - DEBUG - Task song song 'check_no_trade_conditions' hoàn tất thành công.
2025-10-10 04:21:05,855 - APP.utils.threading_utils - DEBUG - Task 'chart.info' (group=chart.refresh) hoàn tất sau 0.90s
2025-10-10 04:21:05,888 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:05,889 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:21:05,889 - APP.utils.safe_data - DEBUG - Get top-level key 'account': {'balance': 164.34, 'equity': 164.34, 'free_margin': 164.34, 'currency': 'USD', 'leverage': 2000}
2025-10-10 04:21:05,890 - APP.utils.safe_data - DEBUG - Get top-level key 'positions': []
2025-10-10 04:21:05,892 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:21:05,958 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:05,959 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:05,961 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:21:05,962 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:21:05,963 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:21:05,965 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:21:05,965 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:05,966 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.00s
2025-10-10 04:21:05,969 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:21:05,969 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:21:05,970 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:21:05,970 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:21:05,971 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:21:05,971 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:21:05,972 - APP.services.mt5_service - DEBUG - Bắt đầu build_context cho symbol: XAUUSD
2025-10-10 04:21:05,972 - APP.services.mt5_service - DEBUG - Đã đảm bảo symbol 'XAUUSD' được chọn. Chờ 0.5s để đồng bộ.
2025-10-10 04:21:06,004 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:06,474 - APP.services.mt5_service - DEBUG - Đã lấy symbol info, account info, tick info.
2025-10-10 04:21:06,475 - APP.services.mt5_service - WARNING - Không thể xác định múi giờ từ TerminalInfo (thiếu thuộc tính hoặc rỗng), sử dụng UTC.
2025-10-10 04:21:06,476 - APP.services.mt5_service - DEBUG - Đã xây dựng info_obj, account_obj, rules_obj.
2025-10-10 04:21:06,476 - APP.services.mt5_service - DEBUG - Current price (cp): 3955.822
2025-10-10 04:21:06,484 - APP.services.mt5_service - DEBUG - Tick stats 5m: {'ticks_per_min': 354, 'median_spread': 37.0, 'p90_spread': 37}
2025-10-10 04:21:06,554 - APP.services.mt5_service - DEBUG - Tick stats 30m: {'ticks_per_min': 345, 'median_spread': 37, 'p90_spread': 37}
2025-10-10 04:21:06,555 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 120
2025-10-10 04:21:06,555 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:21:06,558 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 1.
2025-10-10 04:21:06,558 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:06,558 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 5, bars: 180
2025-10-10 04:21:06,559 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 5 ở lần thử 1.
2025-10-10 04:21:06,562 - APP.services.mt5_service - DEBUG - Đã lấy 180 bars cho XAUUSD 5.
2025-10-10 04:21:06,563 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:06,563 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 15, bars: 96
2025-10-10 04:21:06,563 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 15 ở lần thử 1.
2025-10-10 04:21:06,565 - APP.services.mt5_service - DEBUG - Đã lấy 96 bars cho XAUUSD 15.
2025-10-10 04:21:06,565 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:06,566 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 16385, bars: 120
2025-10-10 04:21:06,566 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 16385 ở lần thử 1.
2025-10-10 04:21:06,573 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 16385.
2025-10-10 04:21:06,573 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:06,573 - APP.services.mt5_service - DEBUG - Đã lấy OHLCV series cho các khung thời gian.
2025-10-10 04:21:06,574 - APP.services.mt5_service - DEBUG - Bắt đầu tính toán các mức khung thời gian lớn từ series H1.
2025-10-10 04:21:06,577 - APP.services.mt5_service - DEBUG - Đã lấy prev_day HL: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:21:06,577 - APP.services.mt5_service - DEBUG - Đã lấy prev_week HL: {'high': 3897.216, 'low': 3763.408}
2025-10-10 04:21:06,578 - APP.services.mt5_service - DEBUG - Đã tính toán xong các mức khung thời gian lớn.
2025-10-10 04:21:06,578 - APP.services.mt5_service - DEBUG - Đã enrich daily data: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}
2025-10-10 04:21:06,579 - APP.services.mt5_service - DEBUG - Bắt đầu session_ranges_today. M1 rates count: 120
2025-10-10 04:21:06,600 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:21:06,601 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:21:06.601231+07:00
2025-10-10 04:21:06,601 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:21:06.601231+07:00
2025-10-10 04:21:06,602 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:21:06.601231+07:00 trong DST: True
2025-10-10 04:21:06,602 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:21:06,603 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:21:06,603 - APP.services.mt5_service - DEBUG - Kết thúc session_ranges_today.
2025-10-10 04:21:06,605 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 120 rates.
2025-10-10 04:21:06,605 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3969.6914859246044
2025-10-10 04:21:06,609 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 38 rates.
2025-10-10 04:21:06,610 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3983.016333802431
2025-10-10 04:21:06,610 - APP.services.mt5_service - DEBUG - Đã tính toán sessions, session liquidity và VWAPs: {'day': 3969.6914859246044, 'asia': None, 'london': None, 'newyork_am': None, 'newyork_pm': 3983.016333802431}
2025-10-10 04:21:06,611 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:21:06,612 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3961.632789633864
2025-10-10 04:21:06,612 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:21:06,612 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.2068442025216
2025-10-10 04:21:06,634 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 50
2025-10-10 04:21:06,636 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.146401208485
2025-10-10 04:21:06,636 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 200
2025-10-10 04:21:06,637 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3991.4163062075027
2025-10-10 04:21:06,637 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 50
2025-10-10 04:21:06,638 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3983.597911028902
2025-10-10 04:21:06,639 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 200
2025-10-10 04:21:06,639 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 4010.0219414701633
2025-10-10 04:21:06,639 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:21:06,640 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3998.6138319807305
2025-10-10 04:21:06,641 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:21:06,642 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3944.0843611557257
2025-10-10 04:21:06,642 - APP.services.mt5_service - DEBUG - Đã tính toán EMA: {'M1': {'ema50': 3961.632789633864, 'ema200': 3973.2068442025216}, 'M5': {'ema50': 3973.146401208485, 'ema200': 3991.4163062075027}, 'M15': {'ema50': 3983.597911028902, 'ema200': 4010.0219414701633}, 'H1': {'ema50': 3998.6138319807305, 'ema200': 3944.0843611557257}}
2025-10-10 04:21:06,642 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 180 rates, period: 14
2025-10-10 04:21:06,643 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 5.241370902801191, TRs count: 179
2025-10-10 04:21:06,643 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:21:06,645 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 2.333296847196014, TRs count: 119
2025-10-10 04:21:06,646 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 96 rates, period: 14
2025-10-10 04:21:06,658 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 9.10163003990504, TRs count: 95
2025-10-10 04:21:06,666 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:21:06,667 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 18.80645617391291, TRs count: 119
2025-10-10 04:21:06,668 - APP.services.mt5_service - DEBUG - Đã tính toán ATR: {'M5': 5.241370902801191, 'M1': 2.333296847196014, 'M15': 9.10163003990504, 'H1': 18.80645617391291}
2025-10-10 04:21:06,669 - APP.services.mt5_service - DEBUG - Volatility regime: trending
2025-10-10 04:21:06,670 - APP.services.mt5_service - DEBUG - Bắt đầu _nearby_key_levels cho cp: 3955.822, daily: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}, prev_day: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:21:06,670 - APP.services.mt5_service - DEBUG - Thêm PDH: 4058.033
2025-10-10 04:21:06,670 - APP.services.mt5_service - DEBUG - Thêm PDL: 3944.632
2025-10-10 04:21:06,671 - APP.services.mt5_service - DEBUG - Thêm EQ50_D: 3970.745
2025-10-10 04:21:06,671 - APP.services.mt5_service - DEBUG - Thêm DO: 3989.989
2025-10-10 04:21:06,672 - APP.services.mt5_service - DEBUG - Key level: PDH, Price: 4058.033, Relation: ABOVE, Distance: 102210.99999999978
2025-10-10 04:21:06,672 - APP.services.mt5_service - DEBUG - Key level: PDL, Price: 3944.632, Relation: BELOW, Distance: 11190.000000000055
2025-10-10 04:21:06,672 - APP.services.mt5_service - DEBUG - Key level: EQ50_D, Price: 3970.745, Relation: ABOVE, Distance: 14922.999999999774
2025-10-10 04:21:06,673 - APP.services.mt5_service - DEBUG - Key level: DO, Price: 3989.989, Relation: ABOVE, Distance: 34166.99999999991
2025-10-10 04:21:06,673 - APP.services.mt5_service - DEBUG - Kết thúc _nearby_key_levels. Số key levels: 4
2025-10-10 04:21:06,673 - APP.services.mt5_service - DEBUG - Key levels nearby: [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 102210.99999999978}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11190.000000000055}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 14922.999999999774}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 34166.99999999991}]
2025-10-10 04:21:06,674 - APP.services.mt5_service - DEBUG - Bắt đầu adr_stats cho symbol: XAUUSD, n: 20
2025-10-10 04:21:06,674 - APP.services.mt5_service - DEBUG - Kết thúc adr_stats. Kết quả: {'d5': 71.51500000000006, 'd10': 67.97180000000003, 'd20': 56.30675000000001}
2025-10-10 04:21:06,675 - APP.services.mt5_service - DEBUG - Prev day close: 3989.994
2025-10-10 04:21:06,675 - APP.services.mt5_service - DEBUG - Day range: 47.48799999999983, Day range % of ADR20: 84.33802341637517
2025-10-10 04:21:06,676 - APP.services.mt5_service - DEBUG - Position in day range: 0.185752190026953
2025-10-10 04:21:06,676 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:21:06,676 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:21:06.676760+07:00
2025-10-10 04:21:06,677 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:21:06.676760+07:00
2025-10-10 04:21:06,677 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:21:06.676760+07:00 trong DST: True
2025-10-10 04:21:06,677 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:21:06,678 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:21:06,678 - APP.services.mt5_service - DEBUG - Killzone active: None, Mins to next killzone: 99
2025-10-10 04:21:06,678 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:06,679 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:06,679 - APP.services.mt5_service - DEBUG - Round levels: [{'level': '8200', 'price': 3955.82, 'distance_pips': 0.2}, {'level': '8225', 'price': 3955.823, 'distance_pips': 0.05}, {'level': '8250', 'price': 3955.825, 'distance_pips': 0.3}, {'level': '8275', 'price': 3955.828, 'distance_pips': 0.55}]
2025-10-10 04:21:06,680 - APP.services.mt5_service - DEBUG - ATR normalized spread: {'spread_as_pct_of_atr_m5': 0.7059221849770823}
2025-10-10 04:21:06,680 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:06,683 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:06,704 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:21:06,705 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3955.822
2025-10-10 04:21:06,706 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:21:06,706 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:21:06,707 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:21:06,708 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe H1.
2025-10-10 04:21:06,708 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 96 rates, lookback: 200
2025-10-10 04:21:06,709 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 96 rates, current_price: 3955.822
2025-10-10 04:21:06,710 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:21:06,711 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 96 rates, lookback: 100
2025-10-10 04:21:06,711 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:21:06,713 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M15.
2025-10-10 04:21:06,714 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 180 rates, lookback: 200
2025-10-10 04:21:06,717 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 180 rates, current_price: 3955.822
2025-10-10 04:21:06,739 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:21:06,740 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 180 rates, lookback: 100
2025-10-10 04:21:06,741 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:21:06,742 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M5.
2025-10-10 04:21:06,742 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:21:06,743 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3955.822
2025-10-10 04:21:06,744 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:21:06,744 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:21:06,745 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:21:06,746 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M1.
2025-10-10 04:21:06,746 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:06,747 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:06,772 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:21:06,772 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:21:06,773 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:21:06,774 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:21:06,775 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:21:06,776 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:21:06,776 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:21:06,777 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:21:06,777 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:21:06,777 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:21:06,778 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:21:06,779 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:21:06,779 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:21:06,780 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:21:06,782 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:21:06,803 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:21:06,804 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:06,804 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:06,805 - APP.services.mt5_service - DEBUG - Đã xây dựng payload MT5_DATA.
2025-10-10 04:21:06,805 - APP.utils.safe_data - DEBUG - Khởi tạo SafeData với data có: True
2025-10-10 04:21:06,808 - APP.services.mt5_service - DEBUG - Đã tạo SafeData object.
2025-10-10 04:21:06,809 - APP.services.mt5_service - DEBUG - Kết thúc build_context.
2025-10-10 04:21:06,810 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:21:06,811 - APP.core.trading.conditions - DEBUG - Bắt đầu kiểm tra các điều kiện NO-TRADE.
2025-10-10 04:21:06,812 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:06,813 - APP.utils.safe_data - DEBUG - Get top-level key 'tick': {'bid': 3955.822, 'ask': 3955.859, 'last': 0.0, 'time': 1760070066}
2025-10-10 04:21:06,813 - APP.utils.threading_utils - DEBUG - Task song song 'get_upcoming_events' hoàn tất thành công.
2025-10-10 04:21:06,813 - APP.services.mt5_service - DEBUG - Bắt đầu lấy lịch sử deals cho XAUUSD trong 7 ngày qua.
2025-10-10 04:21:06,814 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: spread_current, default: None
2025-10-10 04:21:06,819 - APP.services.mt5_service - DEBUG - Đã định dạng 82 deals cho XAUUSD.
2025-10-10 04:21:06,840 - APP.services.mt5_service - DEBUG - Tìm thấy key 'spread_current' trong dict. Giá trị: 37
2025-10-10 04:21:06,842 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:06,843 - APP.utils.threading_utils - DEBUG - Task song song 'get_history_deals' hoàn tất thành công.
2025-10-10 04:21:06,843 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:06,846 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:06,846 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:06,847 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:06,867 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:21:06,868 - APP.utils.safe_data - DEBUG - Get tick value 'bid': 3955.822
2025-10-10 04:21:06,868 - APP.utils.safe_data - DEBUG - Get top-level key 'key_levels_nearby': [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 102210.99999999978}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11190.000000000055}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 14922.999999999774}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 34166.99999999991}]
2025-10-10 04:21:06,869 - APP.utils.threading_utils - DEBUG - Task song song 'check_no_trade_conditions' hoàn tất thành công.
2025-10-10 04:21:06,871 - APP.utils.threading_utils - DEBUG - Task 'chart.info' (group=chart.refresh) hoàn tất sau 0.91s
2025-10-10 04:21:06,874 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:06,875 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:21:06,875 - APP.utils.safe_data - DEBUG - Get top-level key 'account': {'balance': 164.34, 'equity': 164.34, 'free_margin': 164.34, 'currency': 'USD', 'leverage': 2000}
2025-10-10 04:21:06,876 - APP.utils.safe_data - DEBUG - Get top-level key 'positions': []
2025-10-10 04:21:06,878 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:21:06,962 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:06,963 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:06,964 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:21:06,966 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:21:06,967 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:21:06,968 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:21:06,969 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:06,970 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.00s
2025-10-10 04:21:06,994 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:07,194 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:21:07,194 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:21:07,195 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:21:07,195 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:21:07,196 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:21:07,197 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:21:07,197 - APP.services.mt5_service - DEBUG - Bắt đầu build_context cho symbol: XAUUSD
2025-10-10 04:21:07,198 - APP.services.mt5_service - DEBUG - Đã đảm bảo symbol 'XAUUSD' được chọn. Chờ 0.5s để đồng bộ.
2025-10-10 04:21:07,699 - APP.services.mt5_service - DEBUG - Đã lấy symbol info, account info, tick info.
2025-10-10 04:21:07,700 - APP.services.mt5_service - WARNING - Không thể xác định múi giờ từ TerminalInfo (thiếu thuộc tính hoặc rỗng), sử dụng UTC.
2025-10-10 04:21:07,701 - APP.services.mt5_service - DEBUG - Đã xây dựng info_obj, account_obj, rules_obj.
2025-10-10 04:21:07,701 - APP.services.mt5_service - DEBUG - Current price (cp): 3956.182
2025-10-10 04:21:07,707 - APP.services.mt5_service - DEBUG - Tick stats 5m: {'ticks_per_min': 355, 'median_spread': 37, 'p90_spread': 37}
2025-10-10 04:21:07,769 - APP.services.mt5_service - DEBUG - Tick stats 30m: {'ticks_per_min': 345, 'median_spread': 37, 'p90_spread': 37}
2025-10-10 04:21:07,770 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 120
2025-10-10 04:21:07,771 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:21:07,773 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 1.
2025-10-10 04:21:07,774 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:07,774 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 5, bars: 180
2025-10-10 04:21:07,774 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 5 ở lần thử 1.
2025-10-10 04:21:07,778 - APP.services.mt5_service - DEBUG - Đã lấy 180 bars cho XAUUSD 5.
2025-10-10 04:21:07,779 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:07,779 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 15, bars: 96
2025-10-10 04:21:07,780 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 15 ở lần thử 1.
2025-10-10 04:21:07,783 - APP.services.mt5_service - DEBUG - Đã lấy 96 bars cho XAUUSD 15.
2025-10-10 04:21:07,807 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:07,809 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 16385, bars: 120
2025-10-10 04:21:07,810 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 16385 ở lần thử 1.
2025-10-10 04:21:07,812 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 16385.
2025-10-10 04:21:07,813 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:07,813 - APP.services.mt5_service - DEBUG - Đã lấy OHLCV series cho các khung thời gian.
2025-10-10 04:21:07,814 - APP.services.mt5_service - DEBUG - Bắt đầu tính toán các mức khung thời gian lớn từ series H1.
2025-10-10 04:21:07,820 - APP.services.mt5_service - DEBUG - Đã lấy prev_day HL: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:21:07,837 - APP.services.mt5_service - DEBUG - Đã lấy prev_week HL: {'high': 3897.216, 'low': 3763.408}
2025-10-10 04:21:07,838 - APP.services.mt5_service - DEBUG - Đã tính toán xong các mức khung thời gian lớn.
2025-10-10 04:21:07,839 - APP.services.mt5_service - DEBUG - Đã enrich daily data: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}
2025-10-10 04:21:07,839 - APP.services.mt5_service - DEBUG - Bắt đầu session_ranges_today. M1 rates count: 120
2025-10-10 04:21:07,840 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:21:07,840 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:21:07.840508+07:00
2025-10-10 04:21:07,841 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:21:07.840508+07:00
2025-10-10 04:21:07,841 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:21:07.840508+07:00 trong DST: True
2025-10-10 04:21:07,841 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:21:07,842 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:21:07,842 - APP.services.mt5_service - DEBUG - Kết thúc session_ranges_today.
2025-10-10 04:21:07,843 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 120 rates.
2025-10-10 04:21:07,844 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3969.686163509719
2025-10-10 04:21:07,848 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 38 rates.
2025-10-10 04:21:07,848 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3983.016333802431
2025-10-10 04:21:07,849 - APP.services.mt5_service - DEBUG - Đã tính toán sessions, session liquidity và VWAPs: {'day': 3969.686163509719, 'asia': None, 'london': None, 'newyork_am': None, 'newyork_pm': 3983.016333802431}
2025-10-10 04:21:07,851 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:21:07,870 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3961.6469072809227
2025-10-10 04:21:07,871 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:21:07,872 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.210426292074
2025-10-10 04:21:07,872 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 50
2025-10-10 04:21:07,873 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.1605188555436
2025-10-10 04:21:07,873 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 200
2025-10-10 04:21:07,874 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3991.419888297055
2025-10-10 04:21:07,874 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 50
2025-10-10 04:21:07,875 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3983.612028675961
2025-10-10 04:21:07,875 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 200
2025-10-10 04:21:07,875 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 4010.0255235597156
2025-10-10 04:21:07,876 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:21:07,876 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3998.6279496277893
2025-10-10 04:21:07,877 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:21:07,877 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3944.087943245278
2025-10-10 04:21:07,877 - APP.services.mt5_service - DEBUG - Đã tính toán EMA: {'M1': {'ema50': 3961.6469072809227, 'ema200': 3973.210426292074}, 'M5': {'ema50': 3973.1605188555436, 'ema200': 3991.419888297055}, 'M15': {'ema50': 3983.612028675961, 'ema200': 4010.0255235597156}, 'H1': {'ema50': 3998.6279496277893, 'ema200': 3944.087943245278}}
2025-10-10 04:21:07,878 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 180 rates, period: 14
2025-10-10 04:21:07,878 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 5.241370902801191, TRs count: 179
2025-10-10 04:21:07,879 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:21:07,879 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 2.333296847196014, TRs count: 119
2025-10-10 04:21:07,880 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 96 rates, period: 14
2025-10-10 04:21:07,880 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 9.10163003990504, TRs count: 95
2025-10-10 04:21:07,881 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:21:07,881 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 18.80645617391291, TRs count: 119
2025-10-10 04:21:07,881 - APP.services.mt5_service - DEBUG - Đã tính toán ATR: {'M5': 5.241370902801191, 'M1': 2.333296847196014, 'M15': 9.10163003990504, 'H1': 18.80645617391291}
2025-10-10 04:21:07,882 - APP.services.mt5_service - DEBUG - Volatility regime: trending
2025-10-10 04:21:07,883 - APP.services.mt5_service - DEBUG - Bắt đầu _nearby_key_levels cho cp: 3956.182, daily: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}, prev_day: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:21:07,883 - APP.services.mt5_service - DEBUG - Thêm PDH: 4058.033
2025-10-10 04:21:07,884 - APP.services.mt5_service - DEBUG - Thêm PDL: 3944.632
2025-10-10 04:21:07,884 - APP.services.mt5_service - DEBUG - Thêm EQ50_D: 3970.745
2025-10-10 04:21:07,884 - APP.services.mt5_service - DEBUG - Thêm DO: 3989.989
2025-10-10 04:21:07,885 - APP.services.mt5_service - DEBUG - Key level: PDH, Price: 4058.033, Relation: ABOVE, Distance: 101851.00000000012
2025-10-10 04:21:07,909 - APP.services.mt5_service - DEBUG - Key level: PDL, Price: 3944.632, Relation: BELOW, Distance: 11549.999999999727
2025-10-10 04:21:07,911 - APP.services.mt5_service - DEBUG - Key level: EQ50_D, Price: 3970.745, Relation: ABOVE, Distance: 14563.000000000102
2025-10-10 04:21:07,911 - APP.services.mt5_service - DEBUG - Key level: DO, Price: 3989.989, Relation: ABOVE, Distance: 33807.00000000024
2025-10-10 04:21:07,912 - APP.services.mt5_service - DEBUG - Kết thúc _nearby_key_levels. Số key levels: 4
2025-10-10 04:21:07,913 - APP.services.mt5_service - DEBUG - Key levels nearby: [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 101851.00000000012}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11549.999999999727}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 14563.000000000102}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 33807.00000000024}]
2025-10-10 04:21:07,913 - APP.services.mt5_service - DEBUG - Bắt đầu adr_stats cho symbol: XAUUSD, n: 20
2025-10-10 04:21:07,914 - APP.services.mt5_service - DEBUG - Kết thúc adr_stats. Kết quả: {'d5': 71.51500000000006, 'd10': 67.97180000000003, 'd20': 56.30675000000001}
2025-10-10 04:21:07,914 - APP.services.mt5_service - DEBUG - Prev day close: 3989.994
2025-10-10 04:21:07,915 - APP.services.mt5_service - DEBUG - Day range: 47.48799999999983, Day range % of ADR20: 84.33802341637517
2025-10-10 04:21:07,916 - APP.services.mt5_service - DEBUG - Position in day range: 0.19333305256063887
2025-10-10 04:21:07,916 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:21:07,916 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:21:07.916919+07:00
2025-10-10 04:21:07,917 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:21:07.916919+07:00
2025-10-10 04:21:07,935 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:21:07.916919+07:00 trong DST: True
2025-10-10 04:21:07,936 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:21:07,938 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:21:07,940 - APP.services.mt5_service - DEBUG - Killzone active: None, Mins to next killzone: 99
2025-10-10 04:21:07,940 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:07,941 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:07,941 - APP.services.mt5_service - DEBUG - Round levels: [{'level': '1800', 'price': 3956.18, 'distance_pips': 0.2}, {'level': '1825', 'price': 3956.183, 'distance_pips': 0.05}, {'level': '1850', 'price': 3956.185, 'distance_pips': 0.3}, {'level': '1875', 'price': 3956.188, 'distance_pips': 0.55}]
2025-10-10 04:21:07,942 - APP.services.mt5_service - DEBUG - ATR normalized spread: {'spread_as_pct_of_atr_m5': 0.7059221849857583}
2025-10-10 04:21:07,942 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:07,942 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:07,943 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:21:07,943 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3956.182
2025-10-10 04:21:07,944 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:21:07,945 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:21:07,945 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:21:07,946 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe H1.
2025-10-10 04:21:07,946 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 96 rates, lookback: 200
2025-10-10 04:21:07,947 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 96 rates, current_price: 3956.182
2025-10-10 04:21:07,948 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:21:07,948 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 96 rates, lookback: 100
2025-10-10 04:21:07,949 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:21:07,950 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M15.
2025-10-10 04:21:07,950 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 180 rates, lookback: 200
2025-10-10 04:21:07,951 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 180 rates, current_price: 3956.182
2025-10-10 04:21:07,962 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:21:07,975 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:07,975 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 180 rates, lookback: 100
2025-10-10 04:21:07,978 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:21:07,979 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:21:07,980 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:21:07,980 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M5.
2025-10-10 04:21:07,981 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:21:07,983 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:21:07,983 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:07,984 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3956.182
2025-10-10 04:21:07,985 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.01s
2025-10-10 04:21:08,010 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:21:08,012 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:21:08,013 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:21:08,014 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M1.
2025-10-10 04:21:08,014 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:08,015 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:08,016 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:21:08,016 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:21:08,017 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:21:08,025 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:21:08,042 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:21:08,043 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:21:08,043 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:21:08,044 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:21:08,045 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:21:08,045 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:21:08,045 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:21:08,046 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:21:08,046 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:21:08,046 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:21:08,046 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:21:08,047 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:21:08,048 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:08,048 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:08,049 - APP.services.mt5_service - DEBUG - Đã xây dựng payload MT5_DATA.
2025-10-10 04:21:08,049 - APP.utils.safe_data - DEBUG - Khởi tạo SafeData với data có: True
2025-10-10 04:21:08,050 - APP.services.mt5_service - DEBUG - Đã tạo SafeData object.
2025-10-10 04:21:08,050 - APP.services.mt5_service - DEBUG - Kết thúc build_context.
2025-10-10 04:21:08,053 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:21:08,077 - APP.core.trading.conditions - DEBUG - Bắt đầu kiểm tra các điều kiện NO-TRADE.
2025-10-10 04:21:08,078 - APP.utils.threading_utils - DEBUG - Task song song 'get_upcoming_events' hoàn tất thành công.
2025-10-10 04:21:08,078 - APP.services.mt5_service - DEBUG - Bắt đầu lấy lịch sử deals cho XAUUSD trong 7 ngày qua.
2025-10-10 04:21:08,079 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:08,082 - APP.services.mt5_service - DEBUG - Đã định dạng 82 deals cho XAUUSD.
2025-10-10 04:21:08,082 - APP.utils.safe_data - DEBUG - Get top-level key 'tick': {'bid': 3956.182, 'ask': 3956.219, 'last': 0.0, 'time': 1760070067}
2025-10-10 04:21:08,084 - APP.utils.threading_utils - DEBUG - Task song song 'get_history_deals' hoàn tất thành công.
2025-10-10 04:21:08,084 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: spread_current, default: None
2025-10-10 04:21:08,106 - APP.services.mt5_service - DEBUG - Tìm thấy key 'spread_current' trong dict. Giá trị: 37
2025-10-10 04:21:08,107 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:08,108 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:08,108 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:08,109 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:08,109 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:08,110 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:21:08,110 - APP.utils.safe_data - DEBUG - Get tick value 'bid': 3956.182
2025-10-10 04:21:08,111 - APP.utils.safe_data - DEBUG - Get top-level key 'key_levels_nearby': [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 101851.00000000012}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11549.999999999727}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 14563.000000000102}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 33807.00000000024}]
2025-10-10 04:21:08,111 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:08,112 - APP.utils.threading_utils - DEBUG - Task song song 'check_no_trade_conditions' hoàn tất thành công.
2025-10-10 04:21:08,235 - APP.utils.threading_utils - DEBUG - Task 'chart.info' (group=chart.refresh) hoàn tất sau 1.27s
2025-10-10 04:21:08,362 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:08,363 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:21:08,363 - APP.utils.safe_data - DEBUG - Get top-level key 'account': {'balance': 164.34, 'equity': 164.34, 'free_margin': 164.34, 'currency': 'USD', 'leverage': 2000}
2025-10-10 04:21:08,364 - APP.utils.safe_data - DEBUG - Get top-level key 'positions': []
2025-10-10 04:21:08,366 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:21:08,979 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:08,980 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:08,981 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:21:08,983 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:21:08,983 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:21:08,985 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:21:08,985 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:08,986 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.00s
2025-10-10 04:21:09,013 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:21:09,014 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:21:09,015 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:21:09,016 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:21:09,016 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:21:09,017 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:21:09,018 - APP.services.mt5_service - DEBUG - Bắt đầu build_context cho symbol: XAUUSD
2025-10-10 04:21:09,018 - APP.services.mt5_service - DEBUG - Đã đảm bảo symbol 'XAUUSD' được chọn. Chờ 0.5s để đồng bộ.
2025-10-10 04:21:09,076 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:09,520 - APP.services.mt5_service - DEBUG - Đã lấy symbol info, account info, tick info.
2025-10-10 04:21:09,521 - APP.services.mt5_service - WARNING - Không thể xác định múi giờ từ TerminalInfo (thiếu thuộc tính hoặc rỗng), sử dụng UTC.
2025-10-10 04:21:09,522 - APP.services.mt5_service - DEBUG - Đã xây dựng info_obj, account_obj, rules_obj.
2025-10-10 04:21:09,523 - APP.services.mt5_service - DEBUG - Current price (cp): 3956.224
2025-10-10 04:21:09,528 - APP.services.mt5_service - DEBUG - Tick stats 5m: {'ticks_per_min': 352, 'median_spread': 37, 'p90_spread': 37}
2025-10-10 04:21:09,569 - APP.services.mt5_service - DEBUG - Tick stats 30m: {'ticks_per_min': 345, 'median_spread': 37.0, 'p90_spread': 37}
2025-10-10 04:21:09,570 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 120
2025-10-10 04:21:09,571 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:21:09,576 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 1.
2025-10-10 04:21:09,591 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:09,592 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 5, bars: 180
2025-10-10 04:21:09,593 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 5 ở lần thử 1.
2025-10-10 04:21:09,596 - APP.services.mt5_service - DEBUG - Đã lấy 180 bars cho XAUUSD 5.
2025-10-10 04:21:09,597 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:09,597 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 15, bars: 96
2025-10-10 04:21:09,598 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 15 ở lần thử 1.
2025-10-10 04:21:09,600 - APP.services.mt5_service - DEBUG - Đã lấy 96 bars cho XAUUSD 15.
2025-10-10 04:21:09,600 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:09,600 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 16385, bars: 120
2025-10-10 04:21:09,601 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 16385 ở lần thử 1.
2025-10-10 04:21:09,603 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 16385.
2025-10-10 04:21:09,604 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:09,604 - APP.services.mt5_service - DEBUG - Đã lấy OHLCV series cho các khung thời gian.
2025-10-10 04:21:09,605 - APP.services.mt5_service - DEBUG - Bắt đầu tính toán các mức khung thời gian lớn từ series H1.
2025-10-10 04:21:09,611 - APP.services.mt5_service - DEBUG - Đã lấy prev_day HL: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:21:09,626 - APP.services.mt5_service - DEBUG - Đã lấy prev_week HL: {'high': 3897.216, 'low': 3763.408}
2025-10-10 04:21:09,628 - APP.services.mt5_service - DEBUG - Đã tính toán xong các mức khung thời gian lớn.
2025-10-10 04:21:09,629 - APP.services.mt5_service - DEBUG - Đã enrich daily data: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}
2025-10-10 04:21:09,629 - APP.services.mt5_service - DEBUG - Bắt đầu session_ranges_today. M1 rates count: 120
2025-10-10 04:21:09,630 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:21:09,631 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:21:09.631025+07:00
2025-10-10 04:21:09,631 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:21:09.631025+07:00
2025-10-10 04:21:09,631 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:21:09.631025+07:00 trong DST: True
2025-10-10 04:21:09,632 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:21:09,632 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:21:09,632 - APP.services.mt5_service - DEBUG - Kết thúc session_ranges_today.
2025-10-10 04:21:09,633 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 120 rates.
2025-10-10 04:21:09,634 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3969.6826627490414
2025-10-10 04:21:09,642 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 38 rates.
2025-10-10 04:21:09,663 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3983.016333802431
2025-10-10 04:21:09,663 - APP.services.mt5_service - DEBUG - Đã tính toán sessions, session liquidity và VWAPs: {'day': 3969.6826627490414, 'asia': None, 'london': None, 'newyork_am': None, 'newyork_pm': 3983.016333802431}
2025-10-10 04:21:09,664 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:21:09,665 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3961.6485543397466
2025-10-10 04:21:09,665 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:21:09,666 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.210844202522
2025-10-10 04:21:09,666 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 50
2025-10-10 04:21:09,667 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.1621659143675
2025-10-10 04:21:09,667 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 200
2025-10-10 04:21:09,668 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3991.420306207503
2025-10-10 04:21:09,668 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 50
2025-10-10 04:21:09,669 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3983.613675734785
2025-10-10 04:21:09,669 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 200
2025-10-10 04:21:09,670 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 4010.0259414701636
2025-10-10 04:21:09,670 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:21:09,671 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3998.6295966866132
2025-10-10 04:21:09,671 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:21:09,671 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3944.088361155726
2025-10-10 04:21:09,693 - APP.services.mt5_service - DEBUG - Đã tính toán EMA: {'M1': {'ema50': 3961.6485543397466, 'ema200': 3973.210844202522}, 'M5': {'ema50': 3973.1621659143675, 'ema200': 3991.420306207503}, 'M15': {'ema50': 3983.613675734785, 'ema200': 4010.0259414701636}, 'H1': {'ema50': 3998.6295966866132, 'ema200': 3944.088361155726}}
2025-10-10 04:21:09,694 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 180 rates, period: 14
2025-10-10 04:21:09,696 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 5.241370902801191, TRs count: 179
2025-10-10 04:21:09,696 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:21:09,697 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 2.333296847196014, TRs count: 119
2025-10-10 04:21:09,697 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 96 rates, period: 14
2025-10-10 04:21:09,698 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 9.10163003990504, TRs count: 95
2025-10-10 04:21:09,698 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:21:09,699 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 18.80645617391291, TRs count: 119
2025-10-10 04:21:09,699 - APP.services.mt5_service - DEBUG - Đã tính toán ATR: {'M5': 5.241370902801191, 'M1': 2.333296847196014, 'M15': 9.10163003990504, 'H1': 18.80645617391291}
2025-10-10 04:21:09,699 - APP.services.mt5_service - DEBUG - Volatility regime: trending
2025-10-10 04:21:09,700 - APP.services.mt5_service - DEBUG - Bắt đầu _nearby_key_levels cho cp: 3956.224, daily: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}, prev_day: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:21:09,700 - APP.services.mt5_service - DEBUG - Thêm PDH: 4058.033
2025-10-10 04:21:09,701 - APP.services.mt5_service - DEBUG - Thêm PDL: 3944.632
2025-10-10 04:21:09,702 - APP.services.mt5_service - DEBUG - Thêm EQ50_D: 3970.745
2025-10-10 04:21:09,702 - APP.services.mt5_service - DEBUG - Thêm DO: 3989.989
2025-10-10 04:21:09,704 - APP.services.mt5_service - DEBUG - Key level: PDH, Price: 4058.033, Relation: ABOVE, Distance: 101808.99999999974
2025-10-10 04:21:09,704 - APP.services.mt5_service - DEBUG - Key level: PDL, Price: 3944.632, Relation: BELOW, Distance: 11592.000000000098
2025-10-10 04:21:09,705 - APP.services.mt5_service - DEBUG - Key level: EQ50_D, Price: 3970.745, Relation: ABOVE, Distance: 14520.99999999973
2025-10-10 04:21:09,730 - APP.services.mt5_service - DEBUG - Key level: DO, Price: 3989.989, Relation: ABOVE, Distance: 33764.99999999987
2025-10-10 04:21:09,731 - APP.services.mt5_service - DEBUG - Kết thúc _nearby_key_levels. Số key levels: 4
2025-10-10 04:21:09,732 - APP.services.mt5_service - DEBUG - Key levels nearby: [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 101808.99999999974}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11592.000000000098}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 14520.99999999973}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 33764.99999999987}]
2025-10-10 04:21:09,732 - APP.services.mt5_service - DEBUG - Bắt đầu adr_stats cho symbol: XAUUSD, n: 20
2025-10-10 04:21:09,733 - APP.services.mt5_service - DEBUG - Kết thúc adr_stats. Kết quả: {'d5': 71.51500000000006, 'd10': 67.97180000000003, 'd20': 56.30675000000001}
2025-10-10 04:21:09,733 - APP.services.mt5_service - DEBUG - Prev day close: 3989.994
2025-10-10 04:21:09,734 - APP.services.mt5_service - DEBUG - Day range: 47.48799999999983, Day range % of ADR20: 84.33802341637517
2025-10-10 04:21:09,734 - APP.services.mt5_service - DEBUG - Position in day range: 0.19421748652291082
2025-10-10 04:21:09,735 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:21:09,735 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:21:09.735877+07:00
2025-10-10 04:21:09,736 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:21:09.735877+07:00
2025-10-10 04:21:09,737 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:21:09.735877+07:00 trong DST: True
2025-10-10 04:21:09,737 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:21:09,737 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:21:09,740 - APP.services.mt5_service - DEBUG - Killzone active: None, Mins to next killzone: 99
2025-10-10 04:21:09,761 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:09,763 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:09,764 - APP.services.mt5_service - DEBUG - Round levels: [{'level': '2200', 'price': 3956.22, 'distance_pips': 0.4}, {'level': '2225', 'price': 3956.223, 'distance_pips': 0.15}, {'level': '2250', 'price': 3956.225, 'distance_pips': 0.1}, {'level': '2275', 'price': 3956.228, 'distance_pips': 0.35}]
2025-10-10 04:21:09,835 - APP.services.mt5_service - DEBUG - ATR normalized spread: {'spread_as_pct_of_atr_m5': 0.7059221849770823}
2025-10-10 04:21:09,891 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:09,928 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:09,966 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:21:10,037 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:10,045 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3956.224
2025-10-10 04:21:10,103 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:21:10,103 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:21:10,105 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:21:10,105 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:21:10,106 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:21:10,107 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:21:10,108 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:10,109 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe H1.
2025-10-10 04:21:10,110 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.01s
2025-10-10 04:21:10,110 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 96 rates, lookback: 200
2025-10-10 04:21:10,111 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 96 rates, current_price: 3956.224
2025-10-10 04:21:10,112 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:21:10,112 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 96 rates, lookback: 100
2025-10-10 04:21:10,113 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:21:10,114 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M15.
2025-10-10 04:21:10,114 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 180 rates, lookback: 200
2025-10-10 04:21:10,116 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 180 rates, current_price: 3956.224
2025-10-10 04:21:10,116 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:21:10,117 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 180 rates, lookback: 100
2025-10-10 04:21:10,118 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:21:10,118 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M5.
2025-10-10 04:21:10,119 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:21:10,119 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3956.224
2025-10-10 04:21:10,121 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:21:10,121 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:21:10,122 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:21:10,122 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M1.
2025-10-10 04:21:10,123 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:10,123 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:10,124 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:21:10,124 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:21:10,125 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:21:10,125 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:21:10,186 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:21:10,196 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:21:10,197 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:21:10,197 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:21:10,198 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:21:10,198 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:21:10,198 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:21:10,199 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:21:10,202 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:21:10,202 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:21:10,203 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:21:10,203 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:21:10,233 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:10,234 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:10,269 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:10,306 - APP.services.mt5_service - DEBUG - Đã xây dựng payload MT5_DATA.
2025-10-10 04:21:10,332 - APP.utils.safe_data - DEBUG - Khởi tạo SafeData với data có: True
2025-10-10 04:21:10,371 - APP.services.mt5_service - DEBUG - Đã tạo SafeData object.
2025-10-10 04:21:10,396 - APP.services.mt5_service - DEBUG - Kết thúc build_context.
2025-10-10 04:21:10,448 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:21:10,449 - APP.core.trading.conditions - DEBUG - Bắt đầu kiểm tra các điều kiện NO-TRADE.
2025-10-10 04:21:10,450 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:10,457 - APP.utils.threading_utils - DEBUG - Task song song 'get_upcoming_events' hoàn tất thành công.
2025-10-10 04:21:10,477 - APP.services.mt5_service - DEBUG - Bắt đầu lấy lịch sử deals cho XAUUSD trong 7 ngày qua.
2025-10-10 04:21:10,481 - APP.utils.safe_data - DEBUG - Get top-level key 'tick': {'bid': 3956.224, 'ask': 3956.261, 'last': 0.0, 'time': 1760070068}
2025-10-10 04:21:10,544 - APP.services.mt5_service - DEBUG - Đã định dạng 82 deals cho XAUUSD.
2025-10-10 04:21:10,545 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: spread_current, default: None
2025-10-10 04:21:10,547 - APP.utils.threading_utils - DEBUG - Task song song 'get_history_deals' hoàn tất thành công.
2025-10-10 04:21:10,549 - APP.services.mt5_service - DEBUG - Tìm thấy key 'spread_current' trong dict. Giá trị: 37
2025-10-10 04:21:10,551 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:10,553 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:10,554 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:10,556 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:10,585 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:10,590 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:21:10,622 - APP.utils.safe_data - DEBUG - Get tick value 'bid': 3956.224
2025-10-10 04:21:10,649 - APP.utils.safe_data - DEBUG - Get top-level key 'key_levels_nearby': [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 101808.99999999974}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11592.000000000098}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 14520.99999999973}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 33764.99999999987}]
2025-10-10 04:21:10,698 - APP.utils.threading_utils - DEBUG - Task song song 'check_no_trade_conditions' hoàn tất thành công.
2025-10-10 04:21:10,732 - APP.utils.threading_utils - DEBUG - Task 'chart.info' (group=chart.refresh) hoàn tất sau 1.75s
2025-10-10 04:21:10,798 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:10,799 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:21:10,800 - APP.utils.safe_data - DEBUG - Get top-level key 'account': {'balance': 164.34, 'equity': 164.34, 'free_margin': 164.34, 'currency': 'USD', 'leverage': 2000}
2025-10-10 04:21:10,800 - APP.utils.safe_data - DEBUG - Get top-level key 'positions': []
2025-10-10 04:21:10,802 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:21:11,104 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:11,105 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:11,106 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:21:11,107 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:21:11,108 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:21:11,110 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:21:11,110 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:11,112 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.01s
2025-10-10 04:21:11,141 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:21:11,142 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:21:11,143 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:21:11,143 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:21:11,144 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:21:11,145 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:21:11,145 - APP.services.mt5_service - DEBUG - Bắt đầu build_context cho symbol: XAUUSD
2025-10-10 04:21:11,145 - APP.services.mt5_service - DEBUG - Đã đảm bảo symbol 'XAUUSD' được chọn. Chờ 0.5s để đồng bộ.
2025-10-10 04:21:11,212 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:11,646 - APP.services.mt5_service - DEBUG - Đã lấy symbol info, account info, tick info.
2025-10-10 04:21:11,648 - APP.services.mt5_service - WARNING - Không thể xác định múi giờ từ TerminalInfo (thiếu thuộc tính hoặc rỗng), sử dụng UTC.
2025-10-10 04:21:11,649 - APP.services.mt5_service - DEBUG - Đã xây dựng info_obj, account_obj, rules_obj.
2025-10-10 04:21:11,649 - APP.services.mt5_service - DEBUG - Current price (cp): 3956.022
2025-10-10 04:21:11,655 - APP.services.mt5_service - DEBUG - Tick stats 5m: {'ticks_per_min': 351, 'median_spread': 37, 'p90_spread': 37}
2025-10-10 04:21:11,722 - APP.services.mt5_service - DEBUG - Tick stats 30m: {'ticks_per_min': 345, 'median_spread': 37.0, 'p90_spread': 37}
2025-10-10 04:21:11,722 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 120
2025-10-10 04:21:11,723 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:21:11,725 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 1.
2025-10-10 04:21:11,726 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:11,726 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 5, bars: 180
2025-10-10 04:21:11,727 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 5 ở lần thử 1.
2025-10-10 04:21:11,730 - APP.services.mt5_service - DEBUG - Đã lấy 180 bars cho XAUUSD 5.
2025-10-10 04:21:11,730 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:11,731 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 15, bars: 96
2025-10-10 04:21:11,731 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 15 ở lần thử 1.
2025-10-10 04:21:11,733 - APP.services.mt5_service - DEBUG - Đã lấy 96 bars cho XAUUSD 15.
2025-10-10 04:21:11,733 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:11,734 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 16385, bars: 120
2025-10-10 04:21:11,734 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 16385 ở lần thử 1.
2025-10-10 04:21:11,736 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 16385.
2025-10-10 04:21:11,737 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:11,737 - APP.services.mt5_service - DEBUG - Đã lấy OHLCV series cho các khung thời gian.
2025-10-10 04:21:11,737 - APP.services.mt5_service - DEBUG - Bắt đầu tính toán các mức khung thời gian lớn từ series H1.
2025-10-10 04:21:11,740 - APP.services.mt5_service - DEBUG - Đã lấy prev_day HL: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:21:11,741 - APP.services.mt5_service - DEBUG - Đã lấy prev_week HL: {'high': 3897.216, 'low': 3763.408}
2025-10-10 04:21:11,741 - APP.services.mt5_service - DEBUG - Đã tính toán xong các mức khung thời gian lớn.
2025-10-10 04:21:11,741 - APP.services.mt5_service - DEBUG - Đã enrich daily data: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}
2025-10-10 04:21:11,742 - APP.services.mt5_service - DEBUG - Bắt đầu session_ranges_today. M1 rates count: 120
2025-10-10 04:21:11,743 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:21:11,770 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:21:11.770740+07:00
2025-10-10 04:21:11,772 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:21:11.770740+07:00
2025-10-10 04:21:11,774 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:21:11.770740+07:00 trong DST: True
2025-10-10 04:21:11,806 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:21:11,807 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:21:11,807 - APP.services.mt5_service - DEBUG - Kết thúc session_ranges_today.
2025-10-10 04:21:11,810 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 120 rates.
2025-10-10 04:21:11,811 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3969.678176476783
2025-10-10 04:21:11,832 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 38 rates.
2025-10-10 04:21:11,833 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3983.016333802431
2025-10-10 04:21:11,834 - APP.services.mt5_service - DEBUG - Đã tính toán sessions, session liquidity và VWAPs: {'day': 3969.678176476783, 'asia': None, 'london': None, 'newyork_am': None, 'newyork_pm': 3983.016333802431}
2025-10-10 04:21:11,834 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:21:11,835 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3961.6398484573933
2025-10-10 04:21:11,835 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:21:11,836 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.208635247298
2025-10-10 04:21:11,836 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 50
2025-10-10 04:21:11,837 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.153460032014
2025-10-10 04:21:11,837 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 200
2025-10-10 04:21:11,837 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3991.418097252279
2025-10-10 04:21:11,838 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 50
2025-10-10 04:21:11,838 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3983.6049698524316
2025-10-10 04:21:11,839 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 200
2025-10-10 04:21:11,840 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 4010.0237325149396
2025-10-10 04:21:11,840 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:21:11,840 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3998.62089080426
2025-10-10 04:21:11,841 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:21:11,841 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3944.086152200502
2025-10-10 04:21:11,842 - APP.services.mt5_service - DEBUG - Đã tính toán EMA: {'M1': {'ema50': 3961.6398484573933, 'ema200': 3973.208635247298}, 'M5': {'ema50': 3973.153460032014, 'ema200': 3991.418097252279}, 'M15': {'ema50': 3983.6049698524316, 'ema200': 4010.0237325149396}, 'H1': {'ema50': 3998.62089080426, 'ema200': 3944.086152200502}}
2025-10-10 04:21:11,843 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 180 rates, period: 14
2025-10-10 04:21:11,844 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 5.241370902801191, TRs count: 179
2025-10-10 04:21:11,858 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:21:11,865 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 2.333296847196014, TRs count: 119
2025-10-10 04:21:11,866 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 96 rates, period: 14
2025-10-10 04:21:11,867 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 9.10163003990504, TRs count: 95
2025-10-10 04:21:11,867 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:21:11,869 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 18.80645617391291, TRs count: 119
2025-10-10 04:21:11,870 - APP.services.mt5_service - DEBUG - Đã tính toán ATR: {'M5': 5.241370902801191, 'M1': 2.333296847196014, 'M15': 9.10163003990504, 'H1': 18.80645617391291}
2025-10-10 04:21:11,870 - APP.services.mt5_service - DEBUG - Volatility regime: trending
2025-10-10 04:21:11,871 - APP.services.mt5_service - DEBUG - Bắt đầu _nearby_key_levels cho cp: 3956.022, daily: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}, prev_day: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:21:11,871 - APP.services.mt5_service - DEBUG - Thêm PDH: 4058.033
2025-10-10 04:21:11,871 - APP.services.mt5_service - DEBUG - Thêm PDL: 3944.632
2025-10-10 04:21:11,872 - APP.services.mt5_service - DEBUG - Thêm EQ50_D: 3970.745
2025-10-10 04:21:11,872 - APP.services.mt5_service - DEBUG - Thêm DO: 3989.989
2025-10-10 04:21:11,872 - APP.services.mt5_service - DEBUG - Key level: PDH, Price: 4058.033, Relation: ABOVE, Distance: 102010.99999999997
2025-10-10 04:21:11,873 - APP.services.mt5_service - DEBUG - Key level: PDL, Price: 3944.632, Relation: BELOW, Distance: 11389.999999999873
2025-10-10 04:21:11,873 - APP.services.mt5_service - DEBUG - Key level: EQ50_D, Price: 3970.745, Relation: ABOVE, Distance: 14722.999999999956
2025-10-10 04:21:11,874 - APP.services.mt5_service - DEBUG - Key level: DO, Price: 3989.989, Relation: ABOVE, Distance: 33967.000000000095
2025-10-10 04:21:11,875 - APP.services.mt5_service - DEBUG - Kết thúc _nearby_key_levels. Số key levels: 4
2025-10-10 04:21:11,876 - APP.services.mt5_service - DEBUG - Key levels nearby: [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 102010.99999999997}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11389.999999999873}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 14722.999999999956}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 33967.000000000095}]
2025-10-10 04:21:11,877 - APP.services.mt5_service - DEBUG - Bắt đầu adr_stats cho symbol: XAUUSD, n: 20
2025-10-10 04:21:11,877 - APP.services.mt5_service - DEBUG - Kết thúc adr_stats. Kết quả: {'d5': 71.51500000000006, 'd10': 67.97180000000003, 'd20': 56.30675000000001}
2025-10-10 04:21:11,904 - APP.services.mt5_service - DEBUG - Prev day close: 3989.994
2025-10-10 04:21:11,905 - APP.services.mt5_service - DEBUG - Day range: 47.48799999999983, Day range % of ADR20: 84.33802341637517
2025-10-10 04:21:11,905 - APP.services.mt5_service - DEBUG - Position in day range: 0.18996378032344516
2025-10-10 04:21:11,906 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:21:11,906 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:21:11.906729+07:00
2025-10-10 04:21:11,907 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:21:11.906729+07:00
2025-10-10 04:21:11,907 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:21:11.906729+07:00 trong DST: True
2025-10-10 04:21:11,908 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:21:11,909 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:21:11,909 - APP.services.mt5_service - DEBUG - Killzone active: None, Mins to next killzone: 99
2025-10-10 04:21:11,910 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:11,919 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:11,925 - APP.services.mt5_service - DEBUG - Round levels: [{'level': '200', 'price': 3956.02, 'distance_pips': 0.2}, {'level': '225', 'price': 3956.023, 'distance_pips': 0.05}, {'level': '250', 'price': 3956.025, 'distance_pips': 0.3}, {'level': '275', 'price': 3956.028, 'distance_pips': 0.55}]
2025-10-10 04:21:11,931 - APP.services.mt5_service - DEBUG - ATR normalized spread: {'spread_as_pct_of_atr_m5': 0.7059221849857583}
2025-10-10 04:21:11,932 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:11,936 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:11,937 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:21:11,938 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3956.022
2025-10-10 04:21:11,939 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:21:11,939 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:21:11,943 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:21:11,973 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe H1.
2025-10-10 04:21:11,974 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 96 rates, lookback: 200
2025-10-10 04:21:11,975 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 96 rates, current_price: 3956.022
2025-10-10 04:21:11,976 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:21:11,978 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 96 rates, lookback: 100
2025-10-10 04:21:11,979 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:21:12,005 - APP.ui.app_ui - INFO - Autorun tick: Kích hoạt worker kiểm tra.
2025-10-10 04:21:12,006 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M15.
2025-10-10 04:21:12,007 - APP.utils.threading_utils - DEBUG - Gửi task 'ui.autorun.guard' vào nhóm 'ui.autorun' (metadata={'component': 'analysis', 'operation': 'autorun_guard'})
2025-10-10 04:21:12,010 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 180 rates, lookback: 200
2025-10-10 04:21:12,030 - APP.ui.controllers.io_controller - INFO - Đã gửi worker I/O ui.autorun.guard vào group ui.autorun (metadata={'component': 'analysis', 'operation': 'autorun_guard'})
2025-10-10 04:21:12,031 - APP.ui.app_ui - DEBUG - Autorun tick worker: Bắt đầu kiểm tra điều kiện.
2025-10-10 04:21:12,033 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 180 rates, current_price: 3956.022
2025-10-10 04:21:12,036 - APP.ui.app_ui - INFO - Autorun tick worker: Điều kiện hợp lệ, yêu cầu bắt đầu phân tích trên luồng UI.
2025-10-10 04:21:12,037 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:21:12,038 - APP.utils.threading_utils - DEBUG - Task 'ui.autorun.guard' (group=ui.autorun) hoàn tất sau 0.01s
2025-10-10 04:21:12,038 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 180 rates, lookback: 100
2025-10-10 04:21:12,040 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:21:12,040 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M5.
2025-10-10 04:21:12,041 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:21:12,044 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3956.022
2025-10-10 04:21:12,067 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:21:12,069 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:21:12,070 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:21:12,071 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M1.
2025-10-10 04:21:12,071 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:12,072 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:12,072 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:21:12,072 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:21:12,073 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:21:12,073 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:21:12,074 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:21:12,074 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:21:12,075 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:21:12,076 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:21:12,077 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:21:12,077 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:21:12,101 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:21:12,103 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:21:12,104 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:21:12,105 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:21:12,105 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:21:12,106 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:21:12,106 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:12,107 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:12,107 - APP.services.mt5_service - DEBUG - Đã xây dựng payload MT5_DATA.
2025-10-10 04:21:12,108 - APP.utils.safe_data - DEBUG - Khởi tạo SafeData với data có: True
2025-10-10 04:21:12,109 - APP.services.mt5_service - DEBUG - Đã tạo SafeData object.
2025-10-10 04:21:12,109 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:12,110 - APP.services.mt5_service - DEBUG - Kết thúc build_context.
2025-10-10 04:21:12,115 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:21:12,133 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:21:12,135 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:21:12,137 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:21:12,137 - APP.core.trading.conditions - DEBUG - Bắt đầu kiểm tra các điều kiện NO-TRADE.
2025-10-10 04:21:12,138 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:12,138 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:12,139 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: _request_autorun_start
2025-10-10 04:21:12,139 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.03s
2025-10-10 04:21:12,140 - APP.services.mt5_service - DEBUG - Bắt đầu lấy lịch sử deals cho XAUUSD trong 7 ngày qua.
2025-10-10 04:21:12,140 - APP.utils.threading_utils - DEBUG - Task song song 'get_upcoming_events' hoàn tất thành công.
2025-10-10 04:21:12,141 - APP.utils.safe_data - DEBUG - Get top-level key 'tick': {'bid': 3956.022, 'ask': 3956.059, 'last': 0.0, 'time': 1760070070}
2025-10-10 04:21:12,142 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:21:12,148 - APP.services.mt5_service - DEBUG - Đã định dạng 82 deals cho XAUUSD.
2025-10-10 04:21:12,166 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: spread_current, default: None
2025-10-10 04:21:12,168 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:21:12,168 - APP.utils.threading_utils - DEBUG - Task song song 'get_history_deals' hoàn tất thành công.
2025-10-10 04:21:12,169 - APP.services.mt5_service - DEBUG - Tìm thấy key 'spread_current' trong dict. Giá trị: 37
2025-10-10 04:21:12,169 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:21:12,170 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:12,171 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:21:12,171 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:12,172 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:21:12,172 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:12,173 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:12,173 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:21:12,173 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:12,174 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:21:12,175 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:21:12,176 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:21:12,177 - APP.utils.safe_data - DEBUG - Get tick value 'bid': 3956.022
2025-10-10 04:21:12,181 - APP.utils.safe_data - DEBUG - Get top-level key 'key_levels_nearby': [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 102010.99999999997}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11389.999999999873}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 14722.999999999956}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 33967.000000000095}]
2025-10-10 04:21:12,201 - APP.utils.threading_utils - DEBUG - Task song song 'check_no_trade_conditions' hoàn tất thành công.
2025-10-10 04:21:12,204 - APP.utils.threading_utils - DEBUG - Task 'chart.info' (group=chart.refresh) hoàn tất sau 1.10s
2025-10-10 04:21:12,710 - APP.services.te_service - INFO - Đăng nhập thành công vào Trading Economics API.
2025-10-10 04:21:12,711 - APP.services.news_service - DEBUG - Cấu hình NewsService đã được cập nhật.
2025-10-10 04:21:12,711 - APP.utils.threading_utils - DEBUG - Gửi task 'news.refresh.autorun' vào nhóm 'news.polling' (metadata={'component': 'news', 'priority': 'autorun', 'timeout_sec': 20})
2025-10-10 04:21:12,712 - APP.utils.threading_utils - INFO - Task 'news.refresh.autorun' (group=news.polling) bị hủy sau 0.00s
2025-10-10 04:21:12,712 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.session.autorun-20251010-042112' vào nhóm 'analysis.session' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-042112', 'priority': 'autorun'})
2025-10-10 04:21:12,713 - APP.ui.controllers.news_controller - DEBUG - Future news bị cancel, không cập nhật UI.
2025-10-10 04:21:12,713 - APP.core.analysis_controller - INFO - Đã submit phiên phân tích autorun-20251010-042112 (priority=autorun)
2025-10-10 04:21:12,713 - APP.core.analysis_worker - DEBUG - Bắt đầu AnalysisWorker.run với model: models/gemini-2.5-flash
2025-10-10 04:21:12,714 - APP.ui.app_ui - INFO - Autorun autorun-20251010-042112 bắt đầu ngay lập tức.
2025-10-10 04:21:12,715 - APP.core.analysis_worker - DEBUG - GIAI ĐOẠN 1: Khởi tạo và kiểm tra đầu vào.
2025-10-10 04:21:12,715 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:12,841 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:12,842 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:21:12,842 - APP.utils.safe_data - DEBUG - Get top-level key 'account': {'balance': 164.34, 'equity': 164.34, 'free_margin': 164.34, 'currency': 'USD', 'leverage': 2000}
2025-10-10 04:21:12,843 - APP.utils.safe_data - DEBUG - Get top-level key 'positions': []
2025-10-10 04:21:12,845 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:21:12,848 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:12,849 - APP.ui.utils.ui_builder - DEBUG - Đã thay đổi trạng thái nút Start/Stop thành 'disabled'. Các điều khiển khác không bị ảnh hưởng.
2025-10-10 04:21:12,849 - APP.ui.app_ui - INFO - Phiên autorun-20251010-042112 bắt đầu (priority=autorun, source=autorun).
2025-10-10 04:21:12,850 - APP.services.gemini_service - INFO - Đã khởi tạo model 'models/gemini-2.5-flash' thành công.
2025-10-10 04:21:12,905 - APP.core.analysis_worker - DEBUG - BẮT ĐẦU GIAI ĐOẠN 2: Xây dựng ngữ cảnh và kiểm tra điều kiện.
2025-10-10 04:21:12,936 - APP.core.analysis_worker - DEBUG - BẮT ĐẦU GIAI ĐOẠN 3: Chuẩn bị và upload ảnh (TaskGroup analysis.upload).
2025-10-10 04:21:12,938 - APP.core.trading.conditions - DEBUG - Bắt đầu kiểm tra các điều kiện NO-RUN.
2025-10-10 04:21:12,940 - APP.analysis.image_processor - DEBUG - Đang thử tải cache upload.
2025-10-10 04:21:12,966 - APP.services.mt5_service - DEBUG - Bắt đầu get_active_killzone cho 2025-10-10 04:21:12.940707 với timezone Asia/Ho_Chi_Minh
2025-10-10 04:21:12,974 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: 2025-10-10 04:21:12.940707+07:00, Target TZ: None
2025-10-10 04:21:12,976 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 04:21:12.940707+07:00
2025-10-10 04:21:13,014 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 04:21:12.940707+07:00 trong DST: True
2025-10-10 04:21:13,038 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:21:13,040 - APP.analysis.image_processor - DEBUG - Đã tải cache upload với 4 mục.
2025-10-10 04:21:13,041 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:21:13,043 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-042112.0' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-042112', 'index': 0})
2025-10-10 04:21:13,045 - APP.services.mt5_service - DEBUG - Không trong killzone nào.
2025-10-10 04:21:13,046 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-042112.1' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-042112', 'index': 1})
2025-10-10 04:21:13,047 - APP.core.trading.conditions - INFO - Điều kiện NO-RUN được kích hoạt: Không chạy ngoài các Kill Zone đã định nghĩa.
2025-10-10 04:21:13,050 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-042112.2' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-042112', 'index': 2})
2025-10-10 04:21:13,077 - APP.core.trading.conditions - INFO - Thoát sớm. Giai đoạn: no-run, Lý do: Không chạy ngoài các Kill Zone đã định nghĩa.
2025-10-10 04:21:13,104 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-042112.3' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-042112', 'index': 3})
2025-10-10 04:21:13,104 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_H1.png: 19168:1760070063:006f092c113624d6
2025-10-10 04:21:13,110 - APP.persistence.log_handler - DEBUG - Đang chuẩn bị ghi log giao dịch. Giai đoạn: no-run, Thư mục con: None
2025-10-10 04:21:13,121 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M15.png: 19510:1760070058:fdb2ad01e724cf79
2025-10-10 04:21:13,126 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M1.png: 15711:1760070048:aec70a0afa261597
2025-10-10 04:21:13,142 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_H1.png, nhưng chữ ký không khớp.
2025-10-10 04:21:13,143 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M5.png: 16873:1760070053:9e51b93d6b592d3c
2025-10-10 04:21:13,148 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_M15.png, nhưng chữ ký không khớp.
2025-10-10 04:21:13,182 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_M1.png, nhưng chữ ký không khớp.
2025-10-10 04:21:13,219 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_H1.png, Tối ưu hóa: False
2025-10-10 04:21:13,221 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_M5.png, nhưng chữ ký không khớp.
2025-10-10 04:21:13,223 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_M15.png, Tối ưu hóa: False
2025-10-10 04:21:13,224 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_M1.png, Tối ưu hóa: False
2025-10-10 04:21:13,224 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:21:13,225 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_M5.png, Tối ưu hóa: False
2025-10-10 04:21:13,227 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:21:13,227 - APP.persistence.log_handler - DEBUG - Đã ghi log giao dịch thành công vào trade_log_20251010.jsonl.
2025-10-10 04:21:13,227 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:21:13,228 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_H1.png' lên Gemini File API...
2025-10-10 04:21:13,228 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:21:13,230 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_M15.png' lên Gemini File API...
2025-10-10 04:21:13,230 - APP.persistence.log_handler - DEBUG - Kết thúc hàm log_trade.
2025-10-10 04:21:13,232 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_M1.png' lên Gemini File API...
2025-10-10 04:21:13,260 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_M5.png' lên Gemini File API...
2025-10-10 04:21:13,342 - APP.services.telegram_service - DEBUG - Đang khởi tạo TelegramClient từ cấu hình.
2025-10-10 04:21:13,351 - APP.services.telegram_service - INFO - Đang gửi tin nhắn đến chat_id: 90773...
2025-10-10 04:21:13,381 - APP.services.telegram_service - DEBUG - Đang tạo urllib opener với SSL context.
2025-10-10 04:21:13,383 - APP.services.telegram_service - DEBUG - Bắt đầu tạo SSL context. cafile: None, skip_verify: True
2025-10-10 04:21:13,490 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:13,502 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:13,506 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:13,507 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:21:13,540 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:21:13,574 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:21:13,631 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:21:13,632 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:21:13,633 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:13,665 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:21:13,678 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:21:13,692 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:13,699 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:21:13,796 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.26s
2025-10-10 04:21:13,797 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:13,802 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:21:13,806 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:13,815 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:21:13,899 - APP.services.mt5_service - DEBUG - Bắt đầu build_context cho symbol: XAUUSD
2025-10-10 04:21:13,900 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:13,962 - APP.services.mt5_service - DEBUG - Đã đảm bảo symbol 'XAUUSD' được chọn. Chờ 0.5s để đồng bộ.
2025-10-10 04:21:14,021 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:21:14,076 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:21:14,128 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:14,243 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:14,360 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:14,481 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:14,501 - APP.services.mt5_service - DEBUG - Đã lấy symbol info, account info, tick info.
2025-10-10 04:21:14,513 - APP.services.mt5_service - WARNING - Không thể xác định múi giờ từ TerminalInfo (thiếu thuộc tính hoặc rỗng), sử dụng UTC.
2025-10-10 04:21:14,514 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.44s
2025-10-10 04:21:14,539 - APP.services.mt5_service - DEBUG - Đã xây dựng info_obj, account_obj, rules_obj.
2025-10-10 04:21:14,540 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:14,576 - APP.services.mt5_service - DEBUG - Current price (cp): 3956.611
2025-10-10 04:21:14,584 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:21:14,601 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:14,683 - APP.services.mt5_service - DEBUG - Tick stats 5m: {'ticks_per_min': 350, 'median_spread': 37.0, 'p90_spread': 37}
2025-10-10 04:21:14,695 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:21:14,751 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:21:14,793 - APP.services.mt5_service - DEBUG - Tick stats 30m: {'ticks_per_min': 346, 'median_spread': 37, 'p90_spread': 37}
2025-10-10 04:21:14,794 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:14,805 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 120
2025-10-10 04:21:14,829 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:14,836 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.25s
2025-10-10 04:21:14,866 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:21:15,053 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 1.
2025-10-10 04:21:15,094 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:15,140 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 5, bars: 180
2025-10-10 04:21:15,175 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:21:15,190 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 5 ở lần thử 1.
2025-10-10 04:21:15,204 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:15,219 - APP.services.mt5_service - DEBUG - Đã lấy 180 bars cho XAUUSD 5.
2025-10-10 04:21:15,303 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:15,382 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 15, bars: 96
2025-10-10 04:21:15,397 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 15 ở lần thử 1.
2025-10-10 04:21:15,436 - APP.services.mt5_service - DEBUG - Đã lấy 96 bars cho XAUUSD 15.
2025-10-10 04:21:15,517 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:15,529 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 16385, bars: 120
2025-10-10 04:21:15,624 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 16385 ở lần thử 1.
2025-10-10 04:21:15,641 - APP.services.mt5_service - DEBUG - Đã lấy 120 bars cho XAUUSD 16385.
2025-10-10 04:21:15,681 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:15,739 - APP.services.mt5_service - DEBUG - Đã lấy OHLCV series cho các khung thời gian.
2025-10-10 04:21:15,779 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:15,788 - APP.services.mt5_service - DEBUG - Bắt đầu tính toán các mức khung thời gian lớn từ series H1.
2025-10-10 04:21:15,794 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:21:15,869 - APP.services.mt5_service - DEBUG - Đã lấy prev_day HL: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:21:15,922 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:21:15,922 - APP.services.mt5_service - DEBUG - Đã lấy prev_week HL: {'high': 3897.216, 'low': 3763.408}
2025-10-10 04:21:15,952 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:21:15,998 - APP.services.mt5_service - DEBUG - Đã tính toán xong các mức khung thời gian lớn.
2025-10-10 04:21:16,039 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:16,045 - APP.services.mt5_service - DEBUG - Đã enrich daily data: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}
2025-10-10 04:21:16,051 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.26s
2025-10-10 04:21:16,051 - APP.services.mt5_service - DEBUG - Bắt đầu session_ranges_today. M1 rates count: 120
2025-10-10 04:21:16,152 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:21:16,183 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:16,192 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:21:16.192188+07:00
2025-10-10 04:21:16,289 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:21:16.192188+07:00
2025-10-10 04:21:16,342 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:21:16.192188+07:00 trong DST: True
2025-10-10 04:21:16,358 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:21:16,382 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:21:16,457 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:21:16,509 - APP.services.telegram_service - DEBUG - Đã tạo SSL context với certifi.
2025-10-10 04:21:16,512 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:21:16,527 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:21:16,538 - APP.services.mt5_service - DEBUG - Kết thúc session_ranges_today.
2025-10-10 04:21:16,544 - APP.services.telegram_service - WARNING - !!! BỎ QUA XÁC MINH SSL (INSECURE) !!!
2025-10-10 04:21:16,557 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 120 rates.
2025-10-10 04:21:16,589 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:21:16,603 - APP.services.telegram_service - DEBUG - Tạo SSL context thành công.
2025-10-10 04:21:16,644 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3969.6656309667287
2025-10-10 04:21:16,817 - APP.services.mt5_service - DEBUG - Bắt đầu vwap_from_rates cho 38 rates.
2025-10-10 04:21:16,818 - APP.services.telegram_service - DEBUG - Đang thực hiện API call (POST) đến method 'sendMessage'.
2025-10-10 04:21:16,824 - APP.services.mt5_service - DEBUG - Kết thúc vwap_from_rates. VWAP: 3983.016333802431
2025-10-10 04:21:16,860 - APP.services.mt5_service - DEBUG - Đã tính toán sessions, session liquidity và VWAPs: {'day': 3969.6656309667287, 'asia': None, 'london': None, 'newyork_am': None, 'newyork_pm': 3983.016333802431}
2025-10-10 04:21:16,901 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:16,901 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:21:16,937 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:21:16,970 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3961.6637308103345
2025-10-10 04:21:16,974 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:21:17,033 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:21:17,073 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:21:17,081 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.2146949487906
2025-10-10 04:21:17,086 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:17,088 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 50
2025-10-10 04:21:17,089 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.15s
2025-10-10 04:21:17,090 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3973.1787541496615
2025-10-10 04:21:17,119 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:17,148 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 180 giá trị, period: 200
2025-10-10 04:21:17,211 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3991.424515162727
2025-10-10 04:21:17,254 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 50
2025-10-10 04:21:17,309 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3983.6315188720396
2025-10-10 04:21:17,398 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 96 giá trị, period: 200
2025-10-10 04:21:17,427 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 4010.0304688333476
2025-10-10 04:21:17,435 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 50
2025-10-10 04:21:17,440 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3998.647439823868
2025-10-10 04:21:17,514 - APP.services.mt5_service - DEBUG - Bắt đầu ema cho 120 giá trị, period: 200
2025-10-10 04:21:17,567 - APP.services.mt5_service - DEBUG - Kết thúc ema. EMA: 3944.09288851891
2025-10-10 04:21:17,576 - APP.services.mt5_service - DEBUG - Đã tính toán EMA: {'M1': {'ema50': 3961.6637308103345, 'ema200': 3973.2146949487906}, 'M5': {'ema50': 3973.1787541496615, 'ema200': 3991.424515162727}, 'M15': {'ema50': 3983.6315188720396, 'ema200': 4010.0304688333476}, 'H1': {'ema50': 3998.647439823868, 'ema200': 3944.09288851891}}
2025-10-10 04:21:17,606 - APP.services.telegram_service - DEBUG - Cuộc gọi API (POST) thành công. OK=True.
2025-10-10 04:21:17,622 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 180 rates, period: 14
2025-10-10 04:21:17,623 - APP.core.analysis_worker - INFO - Giai đoạn 2 thoát sớm: Điều kiện No-Run: Không chạy ngoài các Kill Zone đã định nghĩa.
2025-10-10 04:21:17,661 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 5.274228045658337, TRs count: 179
2025-10-10 04:21:17,754 - APP.utils.threading_utils - DEBUG - Task song song '_execute_stage_2_logic' hoàn tất thành công.
2025-10-10 04:21:17,755 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:21:17,760 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 2.366153990053159, TRs count: 119
2025-10-10 04:21:17,762 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 96 rates, period: 14
2025-10-10 04:21:17,764 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 9.134487182762184, TRs count: 95
2025-10-10 04:21:17,765 - APP.services.mt5_service - DEBUG - Bắt đầu atr_series cho 120 rates, period: 14
2025-10-10 04:21:17,769 - APP.services.mt5_service - DEBUG - Kết thúc atr_series. Last ATR: 18.80645617391291, TRs count: 119
2025-10-10 04:21:17,817 - APP.services.mt5_service - DEBUG - Đã tính toán ATR: {'M5': 5.274228045658337, 'M1': 2.366153990053159, 'M15': 9.134487182762184, 'H1': 18.80645617391291}
2025-10-10 04:21:17,826 - APP.services.mt5_service - DEBUG - Volatility regime: trending
2025-10-10 04:21:17,859 - APP.services.mt5_service - DEBUG - Bắt đầu _nearby_key_levels cho cp: 3956.611, daily: {'open': 3989.989, 'high': 3994.489, 'low': 3947.001, 'eq50': 3970.745, 'midnight_open': None}, prev_day: {'high': 4058.033, 'low': 3944.632}
2025-10-10 04:21:17,896 - APP.services.mt5_service - DEBUG - Thêm PDH: 4058.033
2025-10-10 04:21:17,904 - APP.services.mt5_service - DEBUG - Thêm PDL: 3944.632
2025-10-10 04:21:17,958 - APP.services.mt5_service - DEBUG - Thêm EQ50_D: 3970.745
2025-10-10 04:21:17,959 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:18,003 - APP.services.mt5_service - DEBUG - Thêm DO: 3989.989
2025-10-10 04:21:18,085 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:21:18,096 - APP.services.mt5_service - DEBUG - Key level: PDH, Price: 4058.033, Relation: ABOVE, Distance: 101422.00000000003
2025-10-10 04:21:18,098 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:21:18,099 - APP.services.mt5_service - DEBUG - Key level: PDL, Price: 3944.632, Relation: BELOW, Distance: 11978.999999999814
2025-10-10 04:21:18,101 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:21:18,103 - APP.services.mt5_service - DEBUG - Key level: EQ50_D, Price: 3970.745, Relation: ABOVE, Distance: 14134.000000000015
2025-10-10 04:21:18,103 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:18,207 - APP.services.mt5_service - DEBUG - Key level: DO, Price: 3989.989, Relation: ABOVE, Distance: 33378.00000000015
2025-10-10 04:21:18,298 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.21s
2025-10-10 04:21:18,382 - APP.services.mt5_service - DEBUG - Kết thúc _nearby_key_levels. Số key levels: 4
2025-10-10 04:21:18,527 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:18,549 - APP.services.mt5_service - DEBUG - Key levels nearby: [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 101422.00000000003}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11978.999999999814}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 14134.000000000015}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 33378.00000000015}]
2025-10-10 04:21:18,774 - APP.services.mt5_service - DEBUG - Bắt đầu adr_stats cho symbol: XAUUSD, n: 20
2025-10-10 04:21:19,126 - APP.services.mt5_service - DEBUG - Kết thúc adr_stats. Kết quả: {'d5': 71.51500000000006, 'd10': 67.97180000000003, 'd20': 56.30675000000001}
2025-10-10 04:21:19,178 - APP.services.mt5_service - DEBUG - Prev day close: 3989.994
2025-10-10 04:21:19,268 - APP.services.mt5_service - DEBUG - Day range: 47.48799999999983, Day range % of ADR20: 84.33802341637517
2025-10-10 04:21:19,295 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:19,374 - APP.services.mt5_service - DEBUG - Position in day range: 0.20236691374662455
2025-10-10 04:21:19,442 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:21:19,535 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: None, Target TZ: None
2025-10-10 04:21:19,614 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:21:19,687 - APP.services.mt5_service - DEBUG - Sử dụng thời gian hiện tại ở TZ: Asia/Ho_Chi_Minh, Date: 2025-10-10 11:21:19.687018+07:00
2025-10-10 04:21:19,759 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:21:19,796 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 11:21:19.687018+07:00
2025-10-10 04:21:19,804 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:19,847 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.41s
2025-10-10 04:21:20,036 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 11:21:19.687018+07:00 trong DST: True
2025-10-10 04:21:20,264 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:21:20,336 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/7xcflpvmpyy4. Đang chờ trạng thái ACTIVE.
2025-10-10 04:21:20,369 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:20,370 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:21:20,444 - APP.services.mt5_service - DEBUG - Killzone active: None, Mins to next killzone: 99
2025-10-10 04:21:20,468 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:20,470 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/hh9iq75oz9wz. Đang chờ trạng thái ACTIVE.
2025-10-10 04:21:20,541 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:20,738 - APP.services.mt5_service - DEBUG - Round levels: [{'level': '6100', 'price': 3956.61, 'distance_pips': 0.1}, {'level': '6125', 'price': 3956.613, 'distance_pips': 0.15}, {'level': '6150', 'price': 3956.615, 'distance_pips': 0.4}, {'level': '6175', 'price': 3956.618, 'distance_pips': 0.65}]
2025-10-10 04:21:20,771 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/vr1gn68ymomn. Đang chờ trạng thái ACTIVE.
2025-10-10 04:21:21,350 - APP.services.mt5_service - DEBUG - ATR normalized spread: {'spread_as_pct_of_atr_m5': 0.7015244634846566}
2025-10-10 04:21:21,372 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/azcugha29hfe. Đang chờ trạng thái ACTIVE.
2025-10-10 04:21:21,373 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:21,375 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:21,388 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:21:21,638 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:21,665 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_M1.png': ACTIVE. Thời gian đã trôi qua: 1.3s
2025-10-10 04:21:21,706 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_M5.png': ACTIVE. Thời gian đã trôi qua: 1.0s
2025-10-10 04:21:21,715 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:21:21,910 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:21:22,166 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_M1.png'.
2025-10-10 04:21:22,182 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_M5.png'.
2025-10-10 04:21:22,197 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:21:22,207 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3956.611
2025-10-10 04:21:22,344 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_M15.png': ACTIVE. Thời gian đã trôi qua: 1.0s
2025-10-10 04:21:22,348 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M1.png: 15711:1760070048:aec70a0afa261597
2025-10-10 04:21:22,351 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M5.png: 16873:1760070053:9e51b93d6b592d3c
2025-10-10 04:21:22,352 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:22,362 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:21:22,398 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_H1.png': ACTIVE. Thời gian đã trôi qua: 1.0s
2025-10-10 04:21:22,430 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_M15.png'.
2025-10-10 04:21:22,438 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_M1.png trong cache với tên từ xa files/7xcflpvmpyy4.
2025-10-10 04:21:22,439 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_M5.png trong cache với tên từ xa files/hh9iq75oz9wz.
2025-10-10 04:21:22,511 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 1.12s
2025-10-10 04:21:22,512 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:21:22,515 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_H1.png'.
2025-10-10 04:21:22,524 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M15.png: 19510:1760070058:fdb2ad01e724cf79
2025-10-10 04:21:22,528 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-042112.1' (group=analysis.upload) hoàn tất sau 9.45s
2025-10-10 04:21:22,624 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-042112.3' (group=analysis.upload) hoàn tất sau 9.48s
2025-10-10 04:21:22,648 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:21:22,649 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_H1.png: 19168:1760070063:006f092c113624d6
2025-10-10 04:21:22,650 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_M15.png trong cache với tên từ xa files/azcugha29hfe.
2025-10-10 04:21:22,736 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:22,747 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe H1.
2025-10-10 04:21:22,755 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_H1.png trong cache với tên từ xa files/vr1gn68ymomn.
2025-10-10 04:21:22,758 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-042112.2' (group=analysis.upload) hoàn tất sau 9.65s
2025-10-10 04:21:22,896 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 96 rates, lookback: 200
2025-10-10 04:21:22,963 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-042112.0' (group=analysis.upload) hoàn tất sau 9.92s
2025-10-10 04:21:23,108 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 96 rates, current_price: 3956.611
2025-10-10 04:21:23,143 - APP.analysis.image_processor - DEBUG - Đang lưu cache upload với 4 mục.
2025-10-10 04:21:23,155 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:21:23,304 - APP.analysis.image_processor - DEBUG - Đã lưu cache upload thành công.
2025-10-10 04:21:23,316 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 96 rates, lookback: 100
2025-10-10 04:21:23,389 - APP.utils.threading_utils - DEBUG - Task song song '_execute_stage_3_logic' hoàn tất thành công.
2025-10-10 04:21:23,430 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:23,435 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:21:23,438 - APP.core.analysis_worker - WARNING - Một trong các giai đoạn song song đã thất bại. Dừng worker.
2025-10-10 04:21:23,439 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:23,440 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M15.
2025-10-10 04:21:23,441 - APP.core.analysis_worker - INFO - Worker đã thoát một cách có kiểm soát: Thoát sớm do lỗi ở Giai đoạn 2 hoặc 3.
2025-10-10 04:21:23,441 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:23,442 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 180 rates, lookback: 200
2025-10-10 04:21:23,470 - APP.core.analysis_worker - DEBUG - GIAI ĐOẠN 6: Hoàn tất và dọn dẹp.
2025-10-10 04:21:23,472 - APP.services.mt5_service - DEBUG - Bắt đầu _series_from_mt5 cho symbol: XAUUSD, tf_code: 1, bars: 50
2025-10-10 04:21:23,473 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 180 rates, current_price: 3956.611
2025-10-10 04:21:23,474 - APP.core.analysis_worker - DEBUG - Kết thúc AnalysisWorker.run.
2025-10-10 04:21:23,474 - APP.services.mt5_service - DEBUG - Lấy rates thành công cho XAUUSD 1 ở lần thử 1.
2025-10-10 04:21:23,475 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 1 FVG.
2025-10-10 04:21:23,476 - APP.utils.threading_utils - DEBUG - Task 'analysis.session.autorun-20251010-042112' (group=analysis.session) hoàn tất sau 10.76s
2025-10-10 04:21:23,477 - APP.services.mt5_service - DEBUG - Đã lấy 50 bars cho XAUUSD 1.
2025-10-10 04:21:23,478 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 180 rates, lookback: 100
2025-10-10 04:21:23,479 - APP.services.mt5_service - DEBUG - Kết thúc _series_from_mt5.
2025-10-10 04:21:23,480 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:21:23,506 - APP.utils.threading_utils - DEBUG - Task 'chart.draw' (group=chart.refresh) hoàn tất sau 0.03s
2025-10-10 04:21:23,507 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M5.
2025-10-10 04:21:23,508 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_liquidity_levels với 120 rates, lookback: 200
2025-10-10 04:21:23,509 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_fvgs với 120 rates, current_price: 3956.611
2025-10-10 04:21:23,510 - APP.analysis.ict_analyzer - DEBUG - Kết thúc find_fvgs. Tìm thấy 2 FVG.
2025-10-10 04:21:23,510 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_order_blocks với 120 rates, lookback: 100
2025-10-10 04:21:23,511 - APP.analysis.ict_analyzer - DEBUG - Bắt đầu find_market_structure_shift với 5 highs, 5 lows.
2025-10-10 04:21:23,512 - APP.services.mt5_service - DEBUG - Đã hoàn thành phân tích ICT cho timeframe M1.
2025-10-10 04:21:23,513 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:23,513 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:23,514 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:21:23,530 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:21:23,535 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:21:23,536 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:21:23,536 - APP.utils.threading_utils - WARNING - Task 'chart.info' (group=chart.refresh) vượt timeout 10.00s → cancel
2025-10-10 04:21:23,537 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:21:23,538 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:21:23,538 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:21:23,539 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:21:23,539 - APP.services.mt5_service - DEBUG - Bắt đầu value_per_point cho symbol: XAUUSD
2025-10-10 04:21:23,540 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: point, default: 0.0
2025-10-10 04:21:23,540 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'point' trong object. Giá trị: 0.001
2025-10-10 04:21:23,540 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_value, default: 0.0
2025-10-10 04:21:23,541 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_value' trong object. Giá trị: 0.1
2025-10-10 04:21:23,541 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: trade_tick_size, default: 0.0
2025-10-10 04:21:23,541 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:23,542 - APP.services.mt5_service - DEBUG - Tìm thấy attribute 'trade_tick_size' trong object. Giá trị: 0.001
2025-10-10 04:21:23,542 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:23,542 - APP.services.mt5_service - DEBUG - Tính value_per_point từ tick_value/tick_size: 0.1
2025-10-10 04:21:23,543 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:23,543 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:23,544 - APP.services.mt5_service - DEBUG - Đã xây dựng payload MT5_DATA.
2025-10-10 04:21:23,545 - APP.utils.safe_data - DEBUG - Khởi tạo SafeData với data có: True
2025-10-10 04:21:23,546 - APP.services.mt5_service - DEBUG - Đã tạo SafeData object.
2025-10-10 04:21:23,546 - APP.services.mt5_service - DEBUG - Kết thúc build_context.
2025-10-10 04:21:23,552 - APP.utils.safe_data - DEBUG - Kiểm tra is_valid: True
2025-10-10 04:21:23,572 - APP.core.trading.conditions - DEBUG - Bắt đầu kiểm tra các điều kiện NO-TRADE.
2025-10-10 04:21:23,573 - APP.utils.threading_utils - DEBUG - Task song song 'get_upcoming_events' hoàn tất thành công.
2025-10-10 04:21:23,574 - APP.services.mt5_service - DEBUG - Bắt đầu lấy lịch sử deals cho XAUUSD trong 7 ngày qua.
2025-10-10 04:21:23,574 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:23,577 - APP.services.mt5_service - DEBUG - Đã định dạng 82 deals cho XAUUSD.
2025-10-10 04:21:23,578 - APP.utils.safe_data - DEBUG - Get top-level key 'tick': {'bid': 3956.611, 'ask': 3956.648, 'last': 0.0, 'time': 1760070074}
2025-10-10 04:21:23,580 - APP.utils.threading_utils - DEBUG - Task song song 'get_history_deals' hoàn tất thành công.
2025-10-10 04:21:23,580 - APP.services.mt5_service - DEBUG - Bắt đầu info_get cho key: spread_current, default: None
2025-10-10 04:21:23,581 - APP.services.mt5_service - DEBUG - Tìm thấy key 'spread_current' trong dict. Giá trị: 37
2025-10-10 04:21:23,581 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:23,589 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:23,602 - APP.utils.safe_data - DEBUG - Get top-level key 'info': {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:23,603 - APP.services.mt5_service - DEBUG - Bắt đầu points_per_pip_from_info cho info: {'digits': 3, 'point': 0.001, 'contract_size': 100.0, 'spread_current': 37, 'swap_long': -470.0, 'swap_short': 0.0}
2025-10-10 04:21:23,604 - APP.services.mt5_service - DEBUG - Kết thúc points_per_pip_from_info. Digits: 3, PPP: 10
2025-10-10 04:21:23,605 - APP.utils.safe_data - DEBUG - Get top-level key 'killzone_active': None
2025-10-10 04:21:23,605 - APP.utils.safe_data - DEBUG - Get tick value 'bid': 3956.611
2025-10-10 04:21:23,606 - APP.utils.safe_data - DEBUG - Get top-level key 'key_levels_nearby': [{'name': 'PDH', 'price': 4058.033, 'relation': 'ABOVE', 'distance_pips': 101422.00000000003}, {'name': 'PDL', 'price': 3944.632, 'relation': 'BELOW', 'distance_pips': 11978.999999999814}, {'name': 'EQ50_D', 'price': 3970.745, 'relation': 'ABOVE', 'distance_pips': 14134.000000000015}, {'name': 'DO', 'price': 3989.989, 'relation': 'ABOVE', 'distance_pips': 33378.00000000015}]
2025-10-10 04:21:23,607 - APP.utils.threading_utils - DEBUG - Task song song 'check_no_trade_conditions' hoàn tất thành công.
2025-10-10 04:21:23,608 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 10.10s
2025-10-10 04:21:23,609 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:21:23,643 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:23,644 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:23,745 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:23,745 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:23,847 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:23,848 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:23,848 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: _finalize_done
2025-10-10 04:21:23,849 - APP.ui.utils.ui_builder - DEBUG - Đã thay đổi trạng thái nút Start/Stop thành 'normal'. Các điều khiển khác không bị ảnh hưởng.
2025-10-10 04:21:23,849 - APP.ui.app_ui - DEBUG - Lên lịch chạy tự động tiếp theo sau 60000ms.
2025-10-10 04:21:23,849 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:23,850 - APP.core.analysis_controller - INFO - Kết thúc session autorun-20251010-042112: {'status': 'completed', 'early_exit': True}
2025-10-10 04:21:23,850 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:21:24,473 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:24,474 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:24,475 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:24,475 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:24,475 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:21:24,476 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:21:25,476 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:25,476 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:25,477 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:25,477 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:25,478 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:21:25,478 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:21:26,478 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:26,479 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:26,479 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:26,479 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:26,480 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:21:26,480 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:21:27,481 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:27,481 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:27,482 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:27,482 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:27,483 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:21:27,483 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:21:28,483 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:28,484 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:28,484 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:28,485 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:28,485 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:21:28,486 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:21:29,127 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:21:29,128 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:21:29,129 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:21:29,189 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:21:29,485 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:29,486 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:29,486 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:29,487 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:29,487 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:21:29,488 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:21:30,489 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:30,489 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:30,490 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:30,492 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:30,492 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:21:30,492 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:21:31,492 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:31,493 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:31,493 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:31,494 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:31,494 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:21:31,495 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:21:32,494 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:32,495 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:32,495 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:32,496 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:32,496 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:21:32,497 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:21:33,496 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:33,497 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:33,498 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:33,498 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:33,498 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:21:33,499 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:21:34,501 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:34,502 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:34,502 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:34,503 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:34,503 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:21:34,504 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:21:35,505 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:35,506 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:35,506 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:35,507 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:35,507 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:21:35,508 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:21:36,510 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:36,511 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:36,511 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:36,512 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:36,512 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:21:36,513 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:21:37,513 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:37,513 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:37,514 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:37,514 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:37,515 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:21:37,515 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:21:38,514 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:38,515 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:38,516 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:38,517 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:21:38,517 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:38,517 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:21:39,517 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:39,518 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:39,518 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:39,519 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:39,519 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:21:39,519 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:21:40,519 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:40,520 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:40,520 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:40,521 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:40,521 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:21:40,521 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:21:41,522 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:41,523 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:41,523 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:41,524 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:41,524 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:21:41,525 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:21:42,524 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:42,525 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:42,525 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:42,526 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:42,526 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:21:42,527 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:21:43,526 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:43,527 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:43,527 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:43,528 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:43,528 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:21:43,529 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:21:44,130 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:21:44,131 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:21:44,132 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:21:44,162 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:21:44,528 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:44,529 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:44,529 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:44,530 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:44,530 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:21:44,531 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:21:45,531 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:45,531 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:45,532 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:45,532 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:45,533 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:21:45,533 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:21:46,533 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:46,533 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:46,534 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:46,534 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:46,535 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:21:46,535 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:21:47,535 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:47,536 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:47,536 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:47,537 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:47,537 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:21:47,538 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:21:48,537 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:48,538 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:48,538 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:48,539 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:48,539 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:21:48,540 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:21:49,540 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:49,541 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:49,541 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:49,542 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:49,542 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:21:49,543 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:21:50,542 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:50,543 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:50,544 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:50,545 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:50,545 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:21:50,545 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:21:51,545 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:51,546 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:51,546 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:51,547 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:51,547 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:21:51,548 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:21:52,547 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:52,548 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:52,548 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:52,549 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:52,549 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:21:52,550 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:21:53,550 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:53,551 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:53,551 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:53,552 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:53,552 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:21:53,553 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:21:54,553 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:54,553 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:54,554 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:54,555 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:54,556 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:21:54,556 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:21:55,555 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:55,556 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:55,556 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:55,557 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:55,557 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:21:55,558 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:21:56,559 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:56,560 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:56,560 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:56,560 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:56,561 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:21:56,561 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:21:57,561 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:57,562 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:57,562 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:57,562 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:57,563 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:21:57,563 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:21:58,563 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:58,563 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:58,564 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:58,564 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:58,565 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:21:58,565 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:21:59,133 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:21:59,134 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:21:59,135 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:21:59,234 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:21:59,565 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:59,566 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:21:59,566 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:59,566 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:21:59,567 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:21:59,568 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:00,566 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:00,567 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:00,568 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:00,568 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:00,569 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:00,569 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:01,569 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:01,569 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:01,570 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:01,570 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:01,571 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:01,571 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:02,571 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:02,571 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:02,572 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:02,572 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:02,573 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:02,573 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:03,573 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:03,573 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:03,574 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:03,575 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:03,575 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:03,575 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:04,574 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:04,575 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:04,575 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:04,576 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:04,576 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:04,577 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:05,578 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:05,579 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:05,579 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:05,580 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:05,581 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:05,581 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:06,581 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:06,582 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:06,583 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:06,583 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:06,584 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:06,584 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:07,584 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:07,585 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:07,586 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:07,586 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:07,587 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:07,587 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:08,587 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:08,588 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:08,588 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:08,589 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:08,589 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:08,590 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:09,589 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:09,590 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:09,590 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:09,591 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:09,591 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:09,592 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:10,591 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:10,592 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:10,592 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:10,593 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:10,593 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:10,594 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:11,594 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:11,595 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:11,596 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:11,596 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:11,597 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:11,598 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:12,597 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:12,598 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:12,598 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:12,599 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:12,599 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:12,600 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:13,600 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:13,601 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:13,601 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:13,602 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:13,602 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:13,603 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:14,136 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:22:14,136 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:22:14,138 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:22:14,198 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:22:14,602 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:14,603 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:14,603 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:14,603 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:14,604 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:14,604 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:15,604 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:15,605 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:15,605 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:15,606 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:15,606 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:15,607 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:16,607 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:16,608 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:16,608 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:16,609 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:16,610 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:16,610 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:17,610 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:17,611 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:17,611 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:17,612 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:17,612 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:17,613 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:18,612 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:18,613 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:18,613 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:18,614 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:18,614 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:18,616 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:19,615 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:19,616 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:19,616 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:19,617 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:19,618 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:19,618 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:20,619 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:20,620 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:20,620 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:20,621 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:20,621 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:20,622 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:21,621 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:21,621 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:21,622 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:21,622 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:21,622 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:21,623 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:22,623 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:22,624 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:22,624 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:22,625 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:22,625 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:22,626 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:23,627 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:23,628 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:23,628 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:23,629 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:23,630 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:23,630 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:23,850 - APP.ui.app_ui - INFO - Autorun tick: Kích hoạt worker kiểm tra.
2025-10-10 04:22:23,850 - APP.utils.threading_utils - DEBUG - Gửi task 'ui.autorun.guard' vào nhóm 'ui.autorun' (metadata={'component': 'analysis', 'operation': 'autorun_guard'})
2025-10-10 04:22:23,851 - APP.ui.controllers.io_controller - INFO - Đã gửi worker I/O ui.autorun.guard vào group ui.autorun (metadata={'component': 'analysis', 'operation': 'autorun_guard'})
2025-10-10 04:22:23,851 - APP.ui.app_ui - DEBUG - Autorun tick worker: Bắt đầu kiểm tra điều kiện.
2025-10-10 04:22:23,854 - APP.ui.app_ui - INFO - Autorun tick worker: Điều kiện hợp lệ, yêu cầu bắt đầu phân tích trên luồng UI.
2025-10-10 04:22:23,855 - APP.utils.threading_utils - DEBUG - Task 'ui.autorun.guard' (group=ui.autorun) hoàn tất sau 0.00s
2025-10-10 04:22:23,883 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: _request_autorun_start
2025-10-10 04:22:23,884 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:22:23,885 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:22:23,886 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:22:23,886 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:22:23,887 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:22:23,888 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:22:23,888 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:22:23,889 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:22:24,369 - APP.services.te_service - INFO - Đăng nhập thành công vào Trading Economics API.
2025-10-10 04:22:24,370 - APP.services.news_service - DEBUG - Cấu hình NewsService đã được cập nhật.
2025-10-10 04:22:24,370 - APP.utils.threading_utils - DEBUG - Gửi task 'news.refresh.autorun' vào nhóm 'news.polling' (metadata={'component': 'news', 'priority': 'autorun', 'timeout_sec': 20})
2025-10-10 04:22:24,371 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.session.autorun-20251010-042224' vào nhóm 'analysis.session' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-042224', 'priority': 'autorun'})
2025-10-10 04:22:24,371 - APP.utils.threading_utils - INFO - Task 'news.refresh.autorun' (group=news.polling) bị hủy sau 0.00s
2025-10-10 04:22:24,372 - APP.core.analysis_controller - INFO - Đã submit phiên phân tích autorun-20251010-042224 (priority=autorun)
2025-10-10 04:22:24,372 - APP.core.analysis_worker - DEBUG - Bắt đầu AnalysisWorker.run với model: models/gemini-2.5-flash
2025-10-10 04:22:24,372 - APP.ui.controllers.news_controller - DEBUG - Future news bị cancel, không cập nhật UI.
2025-10-10 04:22:24,373 - APP.ui.app_ui - INFO - Autorun autorun-20251010-042224 bắt đầu ngay lập tức.
2025-10-10 04:22:24,373 - APP.core.analysis_worker - DEBUG - GIAI ĐOẠN 1: Khởi tạo và kiểm tra đầu vào.
2025-10-10 04:22:24,374 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:22:24,374 - APP.ui.utils.ui_builder - DEBUG - Đã thay đổi trạng thái nút Start/Stop thành 'disabled'. Các điều khiển khác không bị ảnh hưởng.
2025-10-10 04:22:24,376 - APP.ui.app_ui - INFO - Phiên autorun-20251010-042224 bắt đầu (priority=autorun, source=autorun).
2025-10-10 04:22:24,377 - APP.services.gemini_service - INFO - Đã khởi tạo model 'models/gemini-2.5-flash' thành công.
2025-10-10 04:22:24,387 - APP.core.analysis_worker - DEBUG - BẮT ĐẦU GIAI ĐOẠN 2: Xây dựng ngữ cảnh và kiểm tra điều kiện.
2025-10-10 04:22:24,404 - APP.core.trading.conditions - DEBUG - Bắt đầu kiểm tra các điều kiện NO-RUN.
2025-10-10 04:22:24,406 - APP.core.analysis_worker - DEBUG - BẮT ĐẦU GIAI ĐOẠN 3: Chuẩn bị và upload ảnh (TaskGroup analysis.upload).
2025-10-10 04:22:24,407 - APP.analysis.image_processor - DEBUG - Đang thử tải cache upload.
2025-10-10 04:22:24,411 - APP.services.mt5_service - DEBUG - Bắt đầu get_active_killzone cho 2025-10-10 04:22:24.405453 với timezone Asia/Ho_Chi_Minh
2025-10-10 04:22:24,412 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: 2025-10-10 04:22:24.405453+07:00, Target TZ: None
2025-10-10 04:22:24,412 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 04:22:24.405453+07:00
2025-10-10 04:22:24,412 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 04:22:24.405453+07:00 trong DST: True
2025-10-10 04:22:24,413 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:22:24,413 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:22:24,414 - APP.services.mt5_service - DEBUG - Không trong killzone nào.
2025-10-10 04:22:24,415 - APP.core.trading.conditions - INFO - Điều kiện NO-RUN được kích hoạt: Không chạy ngoài các Kill Zone đã định nghĩa.
2025-10-10 04:22:24,416 - APP.core.trading.conditions - INFO - Thoát sớm. Giai đoạn: no-run, Lý do: Không chạy ngoài các Kill Zone đã định nghĩa.
2025-10-10 04:22:24,416 - APP.persistence.log_handler - DEBUG - Đang chuẩn bị ghi log giao dịch. Giai đoạn: no-run, Thư mục con: None
2025-10-10 04:22:24,441 - APP.analysis.image_processor - DEBUG - Đã tải cache upload với 4 mục.
2025-10-10 04:22:24,445 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-042224.0' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-042224', 'index': 0})
2025-10-10 04:22:24,446 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-042224.1' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-042224', 'index': 1})
2025-10-10 04:22:24,447 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_H1.png: 19157:1760070143:1e0b00360fa78578
2025-10-10 04:22:24,448 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-042224.2' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-042224', 'index': 2})
2025-10-10 04:22:24,449 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M1.png: 16290:1760070128:305ccc3fb3837f70
2025-10-10 04:22:24,450 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_H1.png, nhưng chữ ký không khớp.
2025-10-10 04:22:24,451 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-042224.3' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-042224', 'index': 3})
2025-10-10 04:22:24,461 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M15.png: 16462:1760070138:53c3567962fb6d41
2025-10-10 04:22:24,478 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_H1.png, Tối ưu hóa: False
2025-10-10 04:22:24,479 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M5.png: 16505:1760070133:70ef769f69eaefbc
2025-10-10 04:22:24,481 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:22:24,483 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_M1.png, nhưng chữ ký không khớp.
2025-10-10 04:22:24,484 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_M1.png, Tối ưu hóa: False
2025-10-10 04:22:24,514 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:22:24,516 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_M5.png, nhưng chữ ký không khớp.
2025-10-10 04:22:24,518 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:22:24,520 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_M15.png, nhưng chữ ký không khớp.
2025-10-10 04:22:24,528 - APP.persistence.log_handler - DEBUG - Đã ghi log giao dịch thành công vào trade_log_20251010.jsonl.
2025-10-10 04:22:24,544 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:22:24,545 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_M1.png' lên Gemini File API...
2025-10-10 04:22:24,546 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_M5.png, Tối ưu hóa: False
2025-10-10 04:22:24,547 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_M15.png, Tối ưu hóa: False
2025-10-10 04:22:24,547 - APP.persistence.log_handler - DEBUG - Kết thúc hàm log_trade.
2025-10-10 04:22:24,548 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:22:24,548 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_H1.png' lên Gemini File API...
2025-10-10 04:22:24,551 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:22:24,579 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_M5.png' lên Gemini File API...
2025-10-10 04:22:24,579 - APP.services.telegram_service - DEBUG - Đang khởi tạo TelegramClient từ cấu hình.
2025-10-10 04:22:24,612 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:22:24,646 - APP.services.telegram_service - INFO - Đang gửi tin nhắn đến chat_id: 90773...
2025-10-10 04:22:24,646 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:24,647 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_M15.png' lên Gemini File API...
2025-10-10 04:22:24,661 - APP.services.telegram_service - DEBUG - Đang tạo urllib opener với SSL context.
2025-10-10 04:22:24,676 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:24,676 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:24,679 - APP.services.telegram_service - DEBUG - Bắt đầu tạo SSL context. cafile: None, skip_verify: True
2025-10-10 04:22:24,727 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:24,729 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:22:24,780 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:24,824 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:24,962 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:22:25,084 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:22:25,199 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:22:25,309 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:22:25,449 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:22:25,573 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:22:25,728 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:25,733 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:25,733 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:25,751 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:25,798 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:25,801 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:26,362 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:22:26,422 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:22:26,426 - APP.services.telegram_service - DEBUG - Đã tạo SSL context với certifi.
2025-10-10 04:22:26,444 - APP.services.telegram_service - WARNING - !!! BỎ QUA XÁC MINH SSL (INSECURE) !!!
2025-10-10 04:22:26,477 - APP.services.telegram_service - DEBUG - Tạo SSL context thành công.
2025-10-10 04:22:26,484 - APP.services.telegram_service - DEBUG - Đang thực hiện API call (POST) đến method 'sendMessage'.
2025-10-10 04:22:26,538 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:22:26,595 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:22:26,751 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:26,752 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:26,753 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:26,756 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:26,757 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:26,757 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:27,267 - APP.services.telegram_service - DEBUG - Cuộc gọi API (POST) thành công. OK=True.
2025-10-10 04:22:27,269 - APP.core.analysis_worker - INFO - Giai đoạn 2 thoát sớm: Điều kiện No-Run: Không chạy ngoài các Kill Zone đã định nghĩa.
2025-10-10 04:22:27,305 - APP.utils.threading_utils - DEBUG - Task song song '_execute_stage_2_logic' hoàn tất thành công.
2025-10-10 04:22:27,758 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:27,759 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:27,759 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:27,760 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:27,761 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:27,762 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:28,496 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/121irh87dsqa. Đang chờ trạng thái ACTIVE.
2025-10-10 04:22:28,526 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/xt23b44qh54h. Đang chờ trạng thái ACTIVE.
2025-10-10 04:22:28,534 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/udanziaoodsv. Đang chờ trạng thái ACTIVE.
2025-10-10 04:22:28,762 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:28,763 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:28,763 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:28,764 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:28,764 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:28,764 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:28,807 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/peqgf164dsyq. Đang chờ trạng thái ACTIVE.
2025-10-10 04:22:29,133 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_M1.png': ACTIVE. Thời gian đã trôi qua: 0.6s
2025-10-10 04:22:29,133 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_M1.png'.
2025-10-10 04:22:29,134 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M1.png: 16290:1760070128:305ccc3fb3837f70
2025-10-10 04:22:29,135 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_M1.png trong cache với tên từ xa files/121irh87dsqa.
2025-10-10 04:22:29,136 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-042224.1' (group=analysis.upload) hoàn tất sau 4.69s
2025-10-10 04:22:29,140 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:22:29,140 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:22:29,141 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:22:29,171 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_M5.png': ACTIVE. Thời gian đã trôi qua: 0.6s
2025-10-10 04:22:29,171 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_M5.png'.
2025-10-10 04:22:29,174 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M5.png: 16505:1760070133:70ef769f69eaefbc
2025-10-10 04:22:29,190 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_H1.png': ACTIVE. Thời gian đã trôi qua: 0.7s
2025-10-10 04:22:29,192 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_M5.png trong cache với tên từ xa files/udanziaoodsv.
2025-10-10 04:22:29,193 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_H1.png'.
2025-10-10 04:22:29,194 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-042224.3' (group=analysis.upload) hoàn tất sau 4.72s
2025-10-10 04:22:29,195 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_H1.png: 19157:1760070143:1e0b00360fa78578
2025-10-10 04:22:29,195 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_H1.png trong cache với tên từ xa files/xt23b44qh54h.
2025-10-10 04:22:29,195 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-042224.0' (group=analysis.upload) hoàn tất sau 4.75s
2025-10-10 04:22:29,201 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:22:29,202 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:22:29,202 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:22:29,303 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:22:29,304 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:22:29,485 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_M15.png': ACTIVE. Thời gian đã trôi qua: 0.7s
2025-10-10 04:22:29,485 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_M15.png'.
2025-10-10 04:22:29,486 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M15.png: 16462:1760070138:53c3567962fb6d41
2025-10-10 04:22:29,487 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_M15.png trong cache với tên từ xa files/peqgf164dsyq.
2025-10-10 04:22:29,487 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-042224.2' (group=analysis.upload) hoàn tất sau 5.03s
2025-10-10 04:22:29,488 - APP.analysis.image_processor - DEBUG - Đang lưu cache upload với 4 mục.
2025-10-10 04:22:29,489 - APP.analysis.image_processor - DEBUG - Đã lưu cache upload thành công.
2025-10-10 04:22:29,490 - APP.utils.threading_utils - DEBUG - Task song song '_execute_stage_3_logic' hoàn tất thành công.
2025-10-10 04:22:29,491 - APP.core.analysis_worker - WARNING - Một trong các giai đoạn song song đã thất bại. Dừng worker.
2025-10-10 04:22:29,492 - APP.core.analysis_worker - INFO - Worker đã thoát một cách có kiểm soát: Thoát sớm do lỗi ở Giai đoạn 2 hoặc 3.
2025-10-10 04:22:29,493 - APP.core.analysis_worker - DEBUG - GIAI ĐOẠN 6: Hoàn tất và dọn dẹp.
2025-10-10 04:22:29,493 - APP.core.analysis_worker - DEBUG - Kết thúc AnalysisWorker.run.
2025-10-10 04:22:29,493 - APP.utils.threading_utils - DEBUG - Task 'analysis.session.autorun-20251010-042224' (group=analysis.session) hoàn tất sau 5.12s
2025-10-10 04:22:29,516 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:22:29,519 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:22:29,619 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:22:29,620 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:22:29,721 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:22:29,722 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:22:29,722 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: _finalize_done
2025-10-10 04:22:29,723 - APP.ui.utils.ui_builder - DEBUG - Đã thay đổi trạng thái nút Start/Stop thành 'normal'. Các điều khiển khác không bị ảnh hưởng.
2025-10-10 04:22:29,723 - APP.ui.app_ui - DEBUG - Lên lịch chạy tự động tiếp theo sau 60000ms.
2025-10-10 04:22:29,724 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:22:29,724 - APP.core.analysis_controller - INFO - Kết thúc session autorun-20251010-042224: {'status': 'completed', 'early_exit': True}
2025-10-10 04:22:29,764 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:29,765 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:29,766 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:29,766 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:29,767 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:29,767 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:30,767 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:30,768 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:30,768 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:30,769 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:30,769 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:30,769 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:31,769 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:31,770 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:31,770 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:31,771 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:31,771 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:31,771 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:32,771 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:32,772 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:32,773 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:32,774 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:32,774 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:32,774 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:33,774 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:33,775 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:33,776 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:33,777 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:33,778 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:33,779 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:35,064 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:35,097 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:35,098 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:35,100 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:35,122 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:35,280 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:36,721 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:36,722 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:36,722 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:36,725 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:36,728 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:36,729 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:37,725 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:37,726 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:37,727 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:37,743 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:37,790 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:37,851 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:38,743 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:38,744 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:38,745 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:38,745 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:38,746 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:38,746 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:39,746 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:39,747 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:39,747 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:39,748 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:39,749 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:39,749 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:40,749 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:40,749 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:40,750 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:40,751 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:40,751 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:40,751 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:41,751 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:41,752 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:41,752 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:41,753 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:41,753 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:41,754 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:42,753 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:42,754 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:42,754 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:42,755 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:42,755 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:42,756 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:43,755 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:43,756 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:43,756 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:43,757 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:43,757 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:43,758 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:44,143 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:22:44,144 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:22:44,145 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:22:44,222 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:22:44,757 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:44,758 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:44,758 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:44,759 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:44,760 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:44,760 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:45,761 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:45,762 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:45,762 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:45,763 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:45,763 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:45,764 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:46,877 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:46,877 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:46,878 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:46,879 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:46,879 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:46,879 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:47,879 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:47,880 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:47,880 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:47,881 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:47,881 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:47,881 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:48,881 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:48,882 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:48,882 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:48,882 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:48,883 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:48,883 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:49,883 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:49,884 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:49,884 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:49,885 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:49,885 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:49,886 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:50,886 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:50,887 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:50,888 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:50,888 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:50,889 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:50,889 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:51,889 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:51,890 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:51,890 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:51,892 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:51,892 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:51,893 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:52,892 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:52,893 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:52,893 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:52,894 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:52,894 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:52,895 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:53,894 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:53,895 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:53,895 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:53,896 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:53,896 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:53,897 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:54,896 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:54,897 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:54,898 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:54,898 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:54,899 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:54,899 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:55,899 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:55,900 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:55,900 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:55,901 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:55,902 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:55,902 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:56,902 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:56,903 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:56,903 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:56,904 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:56,904 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:56,905 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:57,904 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:57,905 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:57,905 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:57,906 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:57,906 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:57,907 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:58,907 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:58,907 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:58,908 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:58,908 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:58,909 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:58,909 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:22:59,145 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:22:59,145 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:22:59,147 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:22:59,157 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:22:59,908 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:59,909 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:22:59,910 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:59,910 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:22:59,911 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:22:59,911 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:00,911 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:00,911 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:00,912 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:00,913 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:00,913 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:00,913 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:01,913 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:01,914 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:01,914 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:01,915 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:01,915 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:01,916 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:02,916 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:02,917 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:02,917 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:02,918 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:02,918 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:02,919 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:03,919 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:03,920 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:03,920 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:03,921 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:03,921 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:03,922 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:04,923 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:04,924 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:04,924 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:04,925 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:04,925 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:04,926 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:05,926 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:05,927 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:05,927 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:05,928 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:05,929 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:05,929 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:06,929 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:06,930 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:06,930 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:06,931 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:06,931 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:06,932 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:07,931 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:07,932 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:07,932 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:07,933 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:07,934 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:07,934 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:08,934 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:08,935 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:08,935 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:08,936 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:08,937 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:08,937 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:09,936 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:09,937 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:09,937 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:09,938 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:09,938 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:09,939 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:10,939 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:10,940 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:10,940 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:10,941 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:10,941 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:10,942 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:11,943 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:11,944 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:11,944 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:11,945 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:11,945 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:11,945 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:12,945 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:12,946 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:12,946 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:12,947 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:12,947 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:12,948 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:13,948 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:13,949 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:13,949 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:13,950 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:13,950 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:13,951 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:14,148 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:23:14,149 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:23:14,150 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:23:14,192 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:23:14,950 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:14,951 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:14,951 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:14,952 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:14,953 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:14,953 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:15,953 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:15,953 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:15,954 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:15,954 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:15,954 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:15,956 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:16,956 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:16,957 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:16,957 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:16,958 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:16,958 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:16,959 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:17,959 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:17,959 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:17,960 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:17,961 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:17,961 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:17,962 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:18,961 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:18,962 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:18,962 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:18,963 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:18,963 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:18,964 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:19,964 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:19,964 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:19,965 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:19,965 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:19,966 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:19,966 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:20,966 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:20,967 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:20,967 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:20,968 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:20,968 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:20,968 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:21,968 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:21,969 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:21,969 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:21,970 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:21,970 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:21,970 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:22,971 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:22,971 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:22,972 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:22,972 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:22,973 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:22,973 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:23,973 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:23,974 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:23,974 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:23,975 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:23,975 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:23,976 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:24,976 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:24,976 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:24,977 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:24,977 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:24,978 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:24,978 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:25,978 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:25,979 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:25,979 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:25,980 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:25,981 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:25,981 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:26,982 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:26,983 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:26,983 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:26,984 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:26,984 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:26,985 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:27,989 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:27,990 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:27,990 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:27,991 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:27,991 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:27,991 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:28,992 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:28,993 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:28,993 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:28,995 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:28,995 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:28,995 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:29,151 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:23:29,152 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:23:29,153 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:23:29,209 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:23:29,724 - APP.ui.app_ui - INFO - Autorun tick: Kích hoạt worker kiểm tra.
2025-10-10 04:23:29,725 - APP.utils.threading_utils - DEBUG - Gửi task 'ui.autorun.guard' vào nhóm 'ui.autorun' (metadata={'component': 'analysis', 'operation': 'autorun_guard'})
2025-10-10 04:23:29,725 - APP.ui.controllers.io_controller - INFO - Đã gửi worker I/O ui.autorun.guard vào group ui.autorun (metadata={'component': 'analysis', 'operation': 'autorun_guard'})
2025-10-10 04:23:29,725 - APP.ui.app_ui - DEBUG - Autorun tick worker: Bắt đầu kiểm tra điều kiện.
2025-10-10 04:23:29,727 - APP.ui.app_ui - INFO - Autorun tick worker: Điều kiện hợp lệ, yêu cầu bắt đầu phân tích trên luồng UI.
2025-10-10 04:23:29,728 - APP.utils.threading_utils - DEBUG - Task 'ui.autorun.guard' (group=ui.autorun) hoàn tất sau 0.00s
2025-10-10 04:23:29,828 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: _request_autorun_start
2025-10-10 04:23:29,830 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:23:29,838 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:23:29,839 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:23:29,842 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:23:29,843 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:23:29,846 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:23:29,847 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:23:29,848 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:23:30,461 - APP.services.te_service - INFO - Đăng nhập thành công vào Trading Economics API.
2025-10-10 04:23:30,461 - APP.services.news_service - DEBUG - Cấu hình NewsService đã được cập nhật.
2025-10-10 04:23:30,462 - APP.utils.threading_utils - DEBUG - Gửi task 'news.refresh.autorun' vào nhóm 'news.polling' (metadata={'component': 'news', 'priority': 'autorun', 'timeout_sec': 20})
2025-10-10 04:23:30,463 - APP.utils.threading_utils - INFO - Task 'news.refresh.autorun' (group=news.polling) bị hủy sau 0.00s
2025-10-10 04:23:30,463 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.session.autorun-20251010-042330' vào nhóm 'analysis.session' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-042330', 'priority': 'autorun'})
2025-10-10 04:23:30,464 - APP.ui.controllers.news_controller - DEBUG - Future news bị cancel, không cập nhật UI.
2025-10-10 04:23:30,464 - APP.core.analysis_controller - INFO - Đã submit phiên phân tích autorun-20251010-042330 (priority=autorun)
2025-10-10 04:23:30,464 - APP.core.analysis_worker - DEBUG - Bắt đầu AnalysisWorker.run với model: models/gemini-2.5-flash
2025-10-10 04:23:30,465 - APP.ui.app_ui - INFO - Autorun autorun-20251010-042330 bắt đầu ngay lập tức.
2025-10-10 04:23:30,465 - APP.core.analysis_worker - DEBUG - GIAI ĐOẠN 1: Khởi tạo và kiểm tra đầu vào.
2025-10-10 04:23:30,466 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:23:30,466 - APP.ui.utils.ui_builder - DEBUG - Đã thay đổi trạng thái nút Start/Stop thành 'disabled'. Các điều khiển khác không bị ảnh hưởng.
2025-10-10 04:23:30,467 - APP.ui.app_ui - INFO - Phiên autorun-20251010-042330 bắt đầu (priority=autorun, source=autorun).
2025-10-10 04:23:30,469 - APP.services.gemini_service - INFO - Đã khởi tạo model 'models/gemini-2.5-flash' thành công.
2025-10-10 04:23:30,471 - APP.core.analysis_worker - DEBUG - BẮT ĐẦU GIAI ĐOẠN 2: Xây dựng ngữ cảnh và kiểm tra điều kiện.
2025-10-10 04:23:30,477 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:30,495 - APP.core.trading.conditions - DEBUG - Bắt đầu kiểm tra các điều kiện NO-RUN.
2025-10-10 04:23:30,497 - APP.core.analysis_worker - DEBUG - BẮT ĐẦU GIAI ĐOẠN 3: Chuẩn bị và upload ảnh (TaskGroup analysis.upload).
2025-10-10 04:23:30,498 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:30,498 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:30,499 - APP.analysis.image_processor - DEBUG - Đang thử tải cache upload.
2025-10-10 04:23:30,500 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:30,501 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:30,505 - APP.services.mt5_service - DEBUG - Bắt đầu get_active_killzone cho 2025-10-10 04:23:30.498784 với timezone Asia/Ho_Chi_Minh
2025-10-10 04:23:30,506 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:30,507 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: 2025-10-10 04:23:30.498784+07:00, Target TZ: None
2025-10-10 04:23:30,508 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 04:23:30.498784+07:00
2025-10-10 04:23:30,508 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 04:23:30.498784+07:00 trong DST: True
2025-10-10 04:23:30,509 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:23:30,509 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:23:30,509 - APP.services.mt5_service - DEBUG - Không trong killzone nào.
2025-10-10 04:23:30,510 - APP.core.trading.conditions - INFO - Điều kiện NO-RUN được kích hoạt: Không chạy ngoài các Kill Zone đã định nghĩa.
2025-10-10 04:23:30,510 - APP.core.trading.conditions - INFO - Thoát sớm. Giai đoạn: no-run, Lý do: Không chạy ngoài các Kill Zone đã định nghĩa.
2025-10-10 04:23:30,511 - APP.persistence.log_handler - DEBUG - Đang chuẩn bị ghi log giao dịch. Giai đoạn: no-run, Thư mục con: None
2025-10-10 04:23:30,527 - APP.analysis.image_processor - DEBUG - Đã tải cache upload với 4 mục.
2025-10-10 04:23:30,556 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-042330.0' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-042330', 'index': 0})
2025-10-10 04:23:30,557 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-042330.1' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-042330', 'index': 1})
2025-10-10 04:23:30,558 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_H1.png: 19157:1760070143:1e0b00360fa78578
2025-10-10 04:23:30,559 - APP.persistence.log_handler - DEBUG - Đã ghi log giao dịch thành công vào trade_log_20251010.jsonl.
2025-10-10 04:23:30,560 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-042330.2' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-042330', 'index': 2})
2025-10-10 04:23:30,561 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M1.png: 16371:1760070208:8d7c921098451f7b
2025-10-10 04:23:30,561 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_H1.png. Tên từ xa: files/xt23b44qh54h
2025-10-10 04:23:30,561 - APP.persistence.log_handler - DEBUG - Kết thúc hàm log_trade.
2025-10-10 04:23:30,562 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-042330.3' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-042330', 'index': 3})
2025-10-10 04:23:30,563 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M15.png: 16462:1760070138:53c3567962fb6d41
2025-10-10 04:23:30,563 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_M1.png, nhưng chữ ký không khớp.
2025-10-10 04:23:30,563 - APP.core.analysis_worker - DEBUG - Tìm thấy trong cache: XAUUSD_H1.png, đang lấy thông tin file...
2025-10-10 04:23:30,564 - APP.services.telegram_service - DEBUG - Đang khởi tạo TelegramClient từ cấu hình.
2025-10-10 04:23:30,565 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M5.png: 16505:1760070133:70ef769f69eaefbc
2025-10-10 04:23:30,566 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_M15.png. Tên từ xa: files/peqgf164dsyq
2025-10-10 04:23:30,567 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_M1.png, Tối ưu hóa: False
2025-10-10 04:23:30,568 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:23:30,568 - APP.services.telegram_service - INFO - Đang gửi tin nhắn đến chat_id: 90773...
2025-10-10 04:23:30,571 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_M5.png. Tên từ xa: files/udanziaoodsv
2025-10-10 04:23:30,573 - APP.core.analysis_worker - DEBUG - Tìm thấy trong cache: XAUUSD_M15.png, đang lấy thông tin file...
2025-10-10 04:23:30,574 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:23:30,575 - APP.services.telegram_service - DEBUG - Đang tạo urllib opener với SSL context.
2025-10-10 04:23:30,575 - APP.core.analysis_worker - DEBUG - Tìm thấy trong cache: XAUUSD_M5.png, đang lấy thông tin file...
2025-10-10 04:23:30,577 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:23:30,577 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_M1.png' lên Gemini File API...
2025-10-10 04:23:30,578 - APP.services.telegram_service - DEBUG - Bắt đầu tạo SSL context. cafile: None, skip_verify: True
2025-10-10 04:23:30,609 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:23:30,664 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-042330.0' (group=analysis.upload) hoàn tất sau 0.11s
2025-10-10 04:23:30,669 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-042330.2' (group=analysis.upload) hoàn tất sau 0.11s
2025-10-10 04:23:30,670 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-042330.3' (group=analysis.upload) hoàn tất sau 0.11s
2025-10-10 04:23:30,746 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:23:30,856 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:23:30,965 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:23:31,066 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:23:31,168 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:23:31,169 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:23:31,500 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:31,502 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:31,502 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:31,503 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:31,503 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:31,504 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:31,606 - APP.services.telegram_service - DEBUG - Đã tạo SSL context với certifi.
2025-10-10 04:23:31,607 - APP.services.telegram_service - WARNING - !!! BỎ QUA XÁC MINH SSL (INSECURE) !!!
2025-10-10 04:23:31,608 - APP.services.telegram_service - DEBUG - Tạo SSL context thành công.
2025-10-10 04:23:31,619 - APP.services.telegram_service - DEBUG - Đang thực hiện API call (POST) đến method 'sendMessage'.
2025-10-10 04:23:31,621 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:23:32,317 - APP.services.telegram_service - DEBUG - Cuộc gọi API (POST) thành công. OK=True.
2025-10-10 04:23:32,318 - APP.core.analysis_worker - INFO - Giai đoạn 2 thoát sớm: Điều kiện No-Run: Không chạy ngoài các Kill Zone đã định nghĩa.
2025-10-10 04:23:32,318 - APP.utils.threading_utils - DEBUG - Task song song '_execute_stage_2_logic' hoàn tất thành công.
2025-10-10 04:23:32,504 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:32,505 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:32,505 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:32,506 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:32,507 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:32,507 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:33,096 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/st7ezzppjzc4. Đang chờ trạng thái ACTIVE.
2025-10-10 04:23:33,507 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:33,507 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:33,508 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:33,509 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:33,509 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:33,509 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:33,745 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_M1.png': ACTIVE. Thời gian đã trôi qua: 0.6s
2025-10-10 04:23:33,745 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_M1.png'.
2025-10-10 04:23:33,746 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M1.png: 16371:1760070208:8d7c921098451f7b
2025-10-10 04:23:33,747 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_M1.png trong cache với tên từ xa files/st7ezzppjzc4.
2025-10-10 04:23:33,747 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-042330.1' (group=analysis.upload) hoàn tất sau 3.19s
2025-10-10 04:23:33,748 - APP.analysis.image_processor - DEBUG - Đang lưu cache upload với 4 mục.
2025-10-10 04:23:33,750 - APP.analysis.image_processor - DEBUG - Đã lưu cache upload thành công.
2025-10-10 04:23:33,750 - APP.utils.threading_utils - DEBUG - Task song song '_execute_stage_3_logic' hoàn tất thành công.
2025-10-10 04:23:33,752 - APP.core.analysis_worker - WARNING - Một trong các giai đoạn song song đã thất bại. Dừng worker.
2025-10-10 04:23:33,752 - APP.core.analysis_worker - INFO - Worker đã thoát một cách có kiểm soát: Thoát sớm do lỗi ở Giai đoạn 2 hoặc 3.
2025-10-10 04:23:33,753 - APP.core.analysis_worker - DEBUG - GIAI ĐOẠN 6: Hoàn tất và dọn dẹp.
2025-10-10 04:23:33,753 - APP.core.analysis_worker - DEBUG - Kết thúc AnalysisWorker.run.
2025-10-10 04:23:33,754 - APP.utils.threading_utils - DEBUG - Task 'analysis.session.autorun-20251010-042330' (group=analysis.session) hoàn tất sau 3.29s
2025-10-10 04:23:33,793 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:23:33,794 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:23:33,895 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:23:33,895 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:23:33,997 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:23:33,997 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:23:34,098 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:23:34,099 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:23:34,100 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: _finalize_done
2025-10-10 04:23:34,102 - APP.ui.utils.ui_builder - DEBUG - Đã thay đổi trạng thái nút Start/Stop thành 'normal'. Các điều khiển khác không bị ảnh hưởng.
2025-10-10 04:23:34,103 - APP.ui.app_ui - DEBUG - Lên lịch chạy tự động tiếp theo sau 60000ms.
2025-10-10 04:23:34,103 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:23:34,104 - APP.core.analysis_controller - INFO - Kết thúc session autorun-20251010-042330: {'status': 'completed', 'early_exit': True}
2025-10-10 04:23:34,509 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:34,510 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:34,510 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:34,511 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:34,511 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:34,512 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:35,511 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:35,512 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:35,512 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:35,513 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:35,513 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:35,514 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:36,513 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:36,514 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:36,515 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:36,515 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:36,516 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:36,516 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:37,516 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:37,517 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:37,517 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:37,518 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:37,518 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:37,519 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:38,518 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:38,519 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:38,519 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:38,520 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:38,521 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:38,521 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:39,520 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:39,521 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:39,521 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:39,522 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:39,522 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:39,523 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:40,523 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:40,524 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:40,524 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:40,525 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:40,525 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:40,526 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:41,526 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:41,526 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:41,527 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:41,527 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:41,528 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:41,528 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:42,528 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:42,529 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:42,530 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:42,530 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:42,531 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:42,531 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:43,530 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:43,531 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:43,531 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:43,532 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:43,532 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:43,533 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:44,154 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:23:44,155 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:23:44,156 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:23:44,171 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:23:44,533 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:44,534 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:44,535 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:44,535 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:44,535 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:44,536 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:45,536 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:45,537 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:45,537 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:45,538 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:45,538 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:45,539 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:46,540 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:46,540 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:46,541 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:46,541 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:46,542 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:46,542 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:47,542 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:47,543 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:47,543 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:47,544 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:47,544 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:47,544 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:48,546 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:48,546 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:48,547 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:48,547 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:48,548 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:48,549 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:49,548 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:49,549 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:49,549 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:49,550 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:49,550 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:49,550 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:50,550 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:50,551 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:50,551 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:50,552 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:50,552 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:50,553 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:51,553 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:51,553 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:51,554 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:51,555 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:51,555 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:51,555 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:52,555 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:52,556 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:52,556 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:52,557 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:52,557 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:52,558 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:53,557 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:53,558 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:53,558 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:53,559 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:53,559 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:53,560 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:54,559 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:54,560 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:54,560 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:54,561 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:54,562 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:54,562 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:55,562 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:55,563 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:55,563 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:55,564 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:55,567 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:55,567 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:56,564 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:56,565 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:56,565 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:56,566 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:56,566 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:56,566 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:57,566 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:57,567 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:57,567 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:57,568 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:57,568 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:57,568 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:58,569 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:58,570 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:58,570 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:58,570 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:58,571 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:58,571 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:23:59,157 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:23:59,158 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:23:59,159 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:23:59,174 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:23:59,571 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:59,572 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:23:59,572 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:59,573 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:23:59,573 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:23:59,574 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:00,573 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:00,574 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:00,574 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:00,575 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:00,575 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:00,576 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:01,576 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:01,577 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:01,577 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:01,578 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:01,578 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:01,579 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:02,578 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:02,579 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:02,580 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:02,580 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:02,581 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:02,581 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:03,581 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:03,582 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:03,582 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:03,583 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:03,583 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:03,583 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:04,583 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:04,584 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:04,584 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:04,585 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:04,585 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:04,586 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:05,585 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:05,586 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:05,586 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:05,587 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:05,587 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:05,588 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:06,588 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:06,589 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:06,589 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:06,590 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:06,590 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:06,591 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:07,591 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:07,592 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:07,593 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:07,593 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:07,594 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:07,594 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:08,595 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:08,596 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:08,597 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:08,598 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:08,598 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:08,599 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:09,599 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:09,599 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:09,600 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:09,600 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:09,601 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:09,601 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:10,602 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:10,602 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:10,603 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:10,603 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:10,604 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:10,604 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:11,604 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:11,605 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:11,605 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:11,606 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:11,606 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:11,607 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:12,606 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:12,607 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:12,607 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:12,608 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:12,608 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:12,608 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:13,608 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:13,609 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:13,609 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:13,609 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:13,610 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:13,610 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:14,160 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:24:14,161 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:24:14,162 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:24:14,265 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:24:14,610 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:14,611 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:14,611 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:14,612 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:14,612 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:14,613 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:15,612 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:15,613 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:15,613 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:15,614 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:15,615 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:15,615 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:16,614 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:16,615 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:16,615 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:16,616 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:16,617 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:16,617 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:17,616 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:17,617 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:17,618 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:17,619 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:17,619 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:17,620 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:18,620 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:18,620 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:18,621 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:18,621 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:18,622 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:18,622 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:19,623 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:19,624 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:19,624 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:19,625 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:19,625 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:19,626 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:20,625 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:20,626 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:20,626 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:20,627 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:20,627 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:20,628 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:21,628 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:21,628 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:21,629 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:21,629 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:21,630 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:21,630 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:22,630 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:22,630 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:22,631 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:22,631 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:22,632 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:22,632 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:23,632 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:23,633 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:23,633 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:23,634 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:23,634 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:23,634 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:24,634 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:24,635 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:24,636 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:24,636 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:24,637 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:24,637 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:25,637 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:25,638 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:25,638 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:25,639 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:25,639 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:25,640 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:26,639 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:26,640 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:26,640 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:26,641 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:26,641 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:26,641 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:27,643 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:27,643 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:27,644 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:27,644 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:27,644 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:27,645 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:28,645 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:28,646 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:28,646 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:28,647 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:28,647 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:28,648 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:29,165 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:24:29,166 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:24:29,167 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:24:29,254 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:24:29,648 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:29,649 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:29,649 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:29,650 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:29,650 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:29,651 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:30,650 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:30,651 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:30,651 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:30,652 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:30,653 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:30,653 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:31,652 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:31,653 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:31,653 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:31,654 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:31,655 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:31,655 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:32,655 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:32,656 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:32,656 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:32,657 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:32,657 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:32,658 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:33,657 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:33,658 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:33,658 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:33,659 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:33,659 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:33,659 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:34,103 - APP.ui.app_ui - INFO - Autorun tick: Kích hoạt worker kiểm tra.
2025-10-10 04:24:34,104 - APP.utils.threading_utils - DEBUG - Gửi task 'ui.autorun.guard' vào nhóm 'ui.autorun' (metadata={'component': 'analysis', 'operation': 'autorun_guard'})
2025-10-10 04:24:34,105 - APP.ui.controllers.io_controller - INFO - Đã gửi worker I/O ui.autorun.guard vào group ui.autorun (metadata={'component': 'analysis', 'operation': 'autorun_guard'})
2025-10-10 04:24:34,105 - APP.ui.app_ui - DEBUG - Autorun tick worker: Bắt đầu kiểm tra điều kiện.
2025-10-10 04:24:34,107 - APP.ui.app_ui - INFO - Autorun tick worker: Điều kiện hợp lệ, yêu cầu bắt đầu phân tích trên luồng UI.
2025-10-10 04:24:34,107 - APP.utils.threading_utils - DEBUG - Task 'ui.autorun.guard' (group=ui.autorun) hoàn tất sau 0.00s
2025-10-10 04:24:34,182 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: _request_autorun_start
2025-10-10 04:24:34,183 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:24:34,184 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:24:34,184 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:24:34,185 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:24:34,186 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:24:34,186 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:24:34,187 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:24:34,187 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:24:34,674 - APP.services.te_service - INFO - Đăng nhập thành công vào Trading Economics API.
2025-10-10 04:24:34,675 - APP.services.news_service - DEBUG - Cấu hình NewsService đã được cập nhật.
2025-10-10 04:24:34,675 - APP.utils.threading_utils - DEBUG - Gửi task 'news.refresh.autorun' vào nhóm 'news.polling' (metadata={'component': 'news', 'priority': 'autorun', 'timeout_sec': 20})
2025-10-10 04:24:34,676 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.session.autorun-20251010-042434' vào nhóm 'analysis.session' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-042434', 'priority': 'autorun'})
2025-10-10 04:24:34,676 - APP.utils.threading_utils - INFO - Task 'news.refresh.autorun' (group=news.polling) bị hủy sau 0.00s
2025-10-10 04:24:34,677 - APP.core.analysis_controller - INFO - Đã submit phiên phân tích autorun-20251010-042434 (priority=autorun)
2025-10-10 04:24:34,677 - APP.core.analysis_worker - DEBUG - Bắt đầu AnalysisWorker.run với model: models/gemini-2.5-flash
2025-10-10 04:24:34,677 - APP.ui.controllers.news_controller - DEBUG - Future news bị cancel, không cập nhật UI.
2025-10-10 04:24:34,678 - APP.ui.app_ui - INFO - Autorun autorun-20251010-042434 bắt đầu ngay lập tức.
2025-10-10 04:24:34,678 - APP.core.analysis_worker - DEBUG - GIAI ĐOẠN 1: Khởi tạo và kiểm tra đầu vào.
2025-10-10 04:24:34,679 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:24:34,679 - APP.ui.utils.ui_builder - DEBUG - Đã thay đổi trạng thái nút Start/Stop thành 'disabled'. Các điều khiển khác không bị ảnh hưởng.
2025-10-10 04:24:34,680 - APP.ui.app_ui - INFO - Phiên autorun-20251010-042434 bắt đầu (priority=autorun, source=autorun).
2025-10-10 04:24:34,681 - APP.services.gemini_service - INFO - Đã khởi tạo model 'models/gemini-2.5-flash' thành công.
2025-10-10 04:24:34,681 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:34,683 - APP.core.analysis_worker - DEBUG - BẮT ĐẦU GIAI ĐOẠN 2: Xây dựng ngữ cảnh và kiểm tra điều kiện.
2025-10-10 04:24:34,686 - APP.core.trading.conditions - DEBUG - Bắt đầu kiểm tra các điều kiện NO-RUN.
2025-10-10 04:24:34,687 - APP.core.analysis_worker - DEBUG - BẮT ĐẦU GIAI ĐOẠN 3: Chuẩn bị và upload ảnh (TaskGroup analysis.upload).
2025-10-10 04:24:34,697 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:34,704 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:34,710 - APP.analysis.image_processor - DEBUG - Đang thử tải cache upload.
2025-10-10 04:24:34,711 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:34,711 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:34,713 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:34,715 - APP.services.mt5_service - DEBUG - Bắt đầu get_active_killzone cho 2025-10-10 04:24:34.708448 với timezone Asia/Ho_Chi_Minh
2025-10-10 04:24:34,717 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: 2025-10-10 04:24:34.708448+07:00, Target TZ: None
2025-10-10 04:24:34,718 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 04:24:34.708448+07:00
2025-10-10 04:24:34,718 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 04:24:34.708448+07:00 trong DST: True
2025-10-10 04:24:34,719 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:24:34,719 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:24:34,719 - APP.services.mt5_service - DEBUG - Không trong killzone nào.
2025-10-10 04:24:34,720 - APP.core.trading.conditions - INFO - Điều kiện NO-RUN được kích hoạt: Không chạy ngoài các Kill Zone đã định nghĩa.
2025-10-10 04:24:34,720 - APP.core.trading.conditions - INFO - Thoát sớm. Giai đoạn: no-run, Lý do: Không chạy ngoài các Kill Zone đã định nghĩa.
2025-10-10 04:24:34,721 - APP.persistence.log_handler - DEBUG - Đang chuẩn bị ghi log giao dịch. Giai đoạn: no-run, Thư mục con: None
2025-10-10 04:24:34,765 - APP.analysis.image_processor - DEBUG - Đã tải cache upload với 4 mục.
2025-10-10 04:24:34,766 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-042434.0' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-042434', 'index': 0})
2025-10-10 04:24:34,767 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-042434.1' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-042434', 'index': 1})
2025-10-10 04:24:34,767 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-042434.2' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-042434', 'index': 2})
2025-10-10 04:24:34,769 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_H1.png: 17802:1760070223:f3803ff2e38ee8a7
2025-10-10 04:24:34,769 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M1.png: 16371:1760070208:8d7c921098451f7b
2025-10-10 04:24:34,770 - APP.persistence.log_handler - DEBUG - Đã ghi log giao dịch thành công vào trade_log_20251010.jsonl.
2025-10-10 04:24:34,770 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-042434.3' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-042434', 'index': 3})
2025-10-10 04:24:34,771 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M15.png: 17180:1760070218:e7e70afc4e1edb59
2025-10-10 04:24:34,771 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_H1.png, nhưng chữ ký không khớp.
2025-10-10 04:24:34,772 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_M1.png. Tên từ xa: files/st7ezzppjzc4
2025-10-10 04:24:34,773 - APP.persistence.log_handler - DEBUG - Kết thúc hàm log_trade.
2025-10-10 04:24:34,774 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_M15.png, nhưng chữ ký không khớp.
2025-10-10 04:24:34,775 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_H1.png, Tối ưu hóa: False
2025-10-10 04:24:34,775 - APP.core.analysis_worker - DEBUG - Tìm thấy trong cache: XAUUSD_M1.png, đang lấy thông tin file...
2025-10-10 04:24:34,776 - APP.services.telegram_service - DEBUG - Đang khởi tạo TelegramClient từ cấu hình.
2025-10-10 04:24:34,776 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M5.png: 16800:1760070213:e74b7c0a16eba121
2025-10-10 04:24:34,776 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_M15.png, Tối ưu hóa: False
2025-10-10 04:24:34,777 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:24:34,781 - APP.services.telegram_service - INFO - Đang gửi tin nhắn đến chat_id: 90773...
2025-10-10 04:24:34,782 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:24:34,782 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_M5.png, nhưng chữ ký không khớp.
2025-10-10 04:24:34,782 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:24:34,783 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_H1.png' lên Gemini File API...
2025-10-10 04:24:34,783 - APP.services.telegram_service - DEBUG - Đang tạo urllib opener với SSL context.
2025-10-10 04:24:34,784 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_M5.png, Tối ưu hóa: False
2025-10-10 04:24:34,785 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:24:34,786 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_M15.png' lên Gemini File API...
2025-10-10 04:24:34,787 - APP.services.telegram_service - DEBUG - Bắt đầu tạo SSL context. cafile: None, skip_verify: True
2025-10-10 04:24:34,788 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:24:34,789 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:24:34,867 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_M5.png' lên Gemini File API...
2025-10-10 04:24:34,929 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-042434.1' (group=analysis.upload) hoàn tất sau 0.16s
2025-10-10 04:24:35,012 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:24:35,151 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:24:35,368 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:24:35,511 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:24:35,625 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:24:35,735 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:35,750 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:35,751 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:35,762 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:24:35,762 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:35,817 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:35,825 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:36,262 - APP.services.telegram_service - DEBUG - Đã tạo SSL context với certifi.
2025-10-10 04:24:36,263 - APP.services.telegram_service - WARNING - !!! BỎ QUA XÁC MINH SSL (INSECURE) !!!
2025-10-10 04:24:36,264 - APP.services.telegram_service - DEBUG - Tạo SSL context thành công.
2025-10-10 04:24:36,267 - APP.services.telegram_service - DEBUG - Đang thực hiện API call (POST) đến method 'sendMessage'.
2025-10-10 04:24:36,328 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:24:36,340 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:24:36,372 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:24:36,767 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:36,770 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:36,770 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:36,772 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:36,772 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:36,773 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:37,064 - APP.services.telegram_service - DEBUG - Cuộc gọi API (POST) thành công. OK=True.
2025-10-10 04:24:37,066 - APP.core.analysis_worker - INFO - Giai đoạn 2 thoát sớm: Điều kiện No-Run: Không chạy ngoài các Kill Zone đã định nghĩa.
2025-10-10 04:24:37,076 - APP.utils.threading_utils - DEBUG - Task song song '_execute_stage_2_logic' hoàn tất thành công.
2025-10-10 04:24:37,772 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:37,773 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:37,773 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:37,774 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:37,774 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:37,775 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:38,123 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/xx2dpmedwbs8. Đang chờ trạng thái ACTIVE.
2025-10-10 04:24:38,450 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/kt3i4zo6wkmo. Đang chờ trạng thái ACTIVE.
2025-10-10 04:24:38,468 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/y4x9ibg0yw2p. Đang chờ trạng thái ACTIVE.
2025-10-10 04:24:38,764 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_M5.png': ACTIVE. Thời gian đã trôi qua: 0.6s
2025-10-10 04:24:38,765 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_M5.png'.
2025-10-10 04:24:38,766 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M5.png: 16800:1760070213:e74b7c0a16eba121
2025-10-10 04:24:38,766 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_M5.png trong cache với tên từ xa files/xx2dpmedwbs8.
2025-10-10 04:24:38,766 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-042434.3' (group=analysis.upload) hoàn tất sau 3.99s
2025-10-10 04:24:38,778 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:38,794 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:38,794 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:38,795 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:38,796 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:38,797 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:39,100 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_H1.png': ACTIVE. Thời gian đã trôi qua: 0.6s
2025-10-10 04:24:39,101 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_H1.png'.
2025-10-10 04:24:39,102 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_H1.png: 17802:1760070223:f3803ff2e38ee8a7
2025-10-10 04:24:39,102 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_H1.png trong cache với tên từ xa files/kt3i4zo6wkmo.
2025-10-10 04:24:39,102 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-042434.0' (group=analysis.upload) hoàn tất sau 4.34s
2025-10-10 04:24:39,117 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_M15.png': ACTIVE. Thời gian đã trôi qua: 0.6s
2025-10-10 04:24:39,137 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_M15.png'.
2025-10-10 04:24:39,138 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:24:39,138 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M15.png: 17180:1760070218:e7e70afc4e1edb59
2025-10-10 04:24:39,139 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:24:39,139 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_M15.png trong cache với tên từ xa files/y4x9ibg0yw2p.
2025-10-10 04:24:39,140 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-042434.2' (group=analysis.upload) hoàn tất sau 4.37s
2025-10-10 04:24:39,141 - APP.analysis.image_processor - DEBUG - Đang lưu cache upload với 4 mục.
2025-10-10 04:24:39,143 - APP.analysis.image_processor - DEBUG - Đã lưu cache upload thành công.
2025-10-10 04:24:39,143 - APP.utils.threading_utils - DEBUG - Task song song '_execute_stage_3_logic' hoàn tất thành công.
2025-10-10 04:24:39,147 - APP.core.analysis_worker - WARNING - Một trong các giai đoạn song song đã thất bại. Dừng worker.
2025-10-10 04:24:39,166 - APP.core.analysis_worker - INFO - Worker đã thoát một cách có kiểm soát: Thoát sớm do lỗi ở Giai đoạn 2 hoặc 3.
2025-10-10 04:24:39,167 - APP.core.analysis_worker - DEBUG - GIAI ĐOẠN 6: Hoàn tất và dọn dẹp.
2025-10-10 04:24:39,168 - APP.core.analysis_worker - DEBUG - Kết thúc AnalysisWorker.run.
2025-10-10 04:24:39,168 - APP.utils.threading_utils - DEBUG - Task 'analysis.session.autorun-20251010-042434' (group=analysis.session) hoàn tất sau 4.49s
2025-10-10 04:24:39,240 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:24:39,240 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:24:39,341 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:24:39,342 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:24:39,443 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:24:39,443 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:24:39,544 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:24:39,545 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:24:39,545 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: _finalize_done
2025-10-10 04:24:39,547 - APP.ui.utils.ui_builder - DEBUG - Đã thay đổi trạng thái nút Start/Stop thành 'normal'. Các điều khiển khác không bị ảnh hưởng.
2025-10-10 04:24:39,548 - APP.ui.app_ui - DEBUG - Lên lịch chạy tự động tiếp theo sau 60000ms.
2025-10-10 04:24:39,548 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:24:39,549 - APP.core.analysis_controller - INFO - Kết thúc session autorun-20251010-042434: {'status': 'completed', 'early_exit': True}
2025-10-10 04:24:39,796 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:39,797 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:39,797 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:39,798 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:39,799 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:39,799 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:40,799 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:40,800 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:40,801 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:40,801 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:40,802 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:40,802 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:41,803 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:41,804 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:41,804 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:41,805 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:41,805 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:41,806 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:42,806 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:42,806 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:42,807 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:42,808 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:42,808 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:42,809 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:43,809 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:43,810 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:43,810 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:43,811 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:43,811 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:43,812 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:44,169 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:24:44,170 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:24:44,171 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:24:44,261 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:24:44,811 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:44,812 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:44,813 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:44,813 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:44,814 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:44,815 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:45,815 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:45,816 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:45,816 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:45,817 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:45,817 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:45,818 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:46,818 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:46,818 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:46,819 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:46,820 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:46,821 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:46,821 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:47,822 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:47,823 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:47,823 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:47,824 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:47,824 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:47,825 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:48,824 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:48,825 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:48,825 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:48,826 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:48,826 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:48,827 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:49,826 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:49,827 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:49,827 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:49,828 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:49,829 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:49,829 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:50,828 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:50,829 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:50,829 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:50,830 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:50,831 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:50,831 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:51,832 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:51,833 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:51,833 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:51,834 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:51,834 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:51,835 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:52,835 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:52,836 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:52,836 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:52,837 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:52,837 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:52,838 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:53,837 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:53,838 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:53,838 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:53,839 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:53,839 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:53,840 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:54,840 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:54,844 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:54,844 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:54,846 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:54,847 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:54,848 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:55,847 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:55,847 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:55,848 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:55,848 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:55,849 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:55,849 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:56,849 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:56,850 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:56,850 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:56,851 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:56,852 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:56,852 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:57,851 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:57,853 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:57,854 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:57,854 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:57,855 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:57,855 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:58,855 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:58,856 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:58,856 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:58,857 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:58,858 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:58,858 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:24:59,171 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:24:59,172 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:24:59,174 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:24:59,238 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:24:59,859 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:59,859 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:24:59,860 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:59,860 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:24:59,861 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:24:59,861 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:00,861 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:00,861 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:00,861 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:00,862 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:00,863 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:00,863 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:01,862 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:01,863 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:01,864 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:01,864 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:01,865 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:01,865 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:02,865 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:02,866 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:02,866 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:02,867 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:02,867 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:02,867 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:03,868 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:03,868 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:03,869 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:03,869 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:03,870 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:03,870 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:04,870 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:04,871 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:04,871 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:04,872 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:04,873 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:04,873 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:05,873 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:05,874 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:05,874 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:05,875 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:05,875 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:05,876 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:06,875 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:06,876 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:06,877 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:06,877 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:06,878 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:06,878 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:07,877 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:07,878 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:07,878 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:07,879 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:07,879 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:07,880 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:08,880 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:08,881 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:08,881 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:08,882 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:08,882 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:08,883 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:09,884 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:09,885 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:09,885 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:09,886 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:09,886 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:09,886 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:10,886 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:10,887 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:10,887 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:10,888 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:10,888 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:10,888 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:11,888 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:11,889 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:11,889 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:11,890 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:11,890 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:11,891 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:12,890 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:12,891 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:12,891 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:12,892 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:12,892 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:12,892 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:13,892 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:13,893 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:13,894 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:13,895 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:13,895 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:13,895 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:14,174 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:25:14,175 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:25:14,176 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:25:14,231 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:25:14,895 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:14,895 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:14,896 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:14,896 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:14,897 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:14,897 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:15,897 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:15,898 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:15,898 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:15,899 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:15,899 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:15,900 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:16,899 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:16,900 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:16,900 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:16,901 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:16,901 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:16,902 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:17,902 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:17,903 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:17,903 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:17,904 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:17,904 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:17,905 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:18,904 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:18,905 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:18,905 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:18,906 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:18,906 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:18,907 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:19,907 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:19,908 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:19,908 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:19,909 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:19,910 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:19,910 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:20,910 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:20,910 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:20,911 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:20,912 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:20,912 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:20,913 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:21,912 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:21,913 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:21,914 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:21,914 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:21,915 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:21,915 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:22,915 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:22,916 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:22,916 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:22,917 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:22,917 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:22,918 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:23,917 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:23,918 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:23,918 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:23,919 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:23,919 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:23,920 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:24,921 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:24,922 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:24,922 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:24,923 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:24,923 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:24,924 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:25,923 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:25,924 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:25,924 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:25,925 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:25,925 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:25,926 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:26,926 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:26,927 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:26,927 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:26,928 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:26,928 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:26,929 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:27,928 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:27,929 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:27,929 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:27,930 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:27,930 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:27,931 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:28,930 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:28,931 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:28,931 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:28,932 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:28,932 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:28,933 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:29,178 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:25:29,178 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:25:29,180 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:25:29,226 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:25:29,933 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:29,934 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:29,934 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:29,935 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:29,935 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:29,936 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:30,935 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:30,936 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:30,937 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:30,937 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:30,938 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:30,938 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:31,939 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:31,940 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:31,940 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:31,940 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:31,941 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:31,941 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:32,941 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:32,942 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:32,942 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:32,943 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:32,944 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:32,944 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:33,944 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:33,945 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:33,945 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:33,946 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:33,946 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:33,946 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:34,946 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:34,947 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:34,948 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:34,948 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:34,949 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:34,949 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:35,948 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:35,949 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:35,950 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:35,950 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:35,951 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:35,951 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:36,951 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:36,952 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:36,952 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:36,952 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:36,953 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:36,953 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:37,954 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:37,955 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:37,955 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:37,956 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:37,956 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:37,956 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:38,956 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:38,957 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:38,957 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:38,958 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:38,958 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:38,959 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:39,550 - APP.ui.app_ui - INFO - Autorun tick: Kích hoạt worker kiểm tra.
2025-10-10 04:25:39,550 - APP.utils.threading_utils - DEBUG - Gửi task 'ui.autorun.guard' vào nhóm 'ui.autorun' (metadata={'component': 'analysis', 'operation': 'autorun_guard'})
2025-10-10 04:25:39,551 - APP.ui.controllers.io_controller - INFO - Đã gửi worker I/O ui.autorun.guard vào group ui.autorun (metadata={'component': 'analysis', 'operation': 'autorun_guard'})
2025-10-10 04:25:39,551 - APP.ui.app_ui - DEBUG - Autorun tick worker: Bắt đầu kiểm tra điều kiện.
2025-10-10 04:25:39,554 - APP.ui.app_ui - INFO - Autorun tick worker: Điều kiện hợp lệ, yêu cầu bắt đầu phân tích trên luồng UI.
2025-10-10 04:25:39,554 - APP.utils.threading_utils - DEBUG - Task 'ui.autorun.guard' (group=ui.autorun) hoàn tất sau 0.00s
2025-10-10 04:25:39,592 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: _request_autorun_start
2025-10-10 04:25:39,607 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:25:39,608 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:25:39,609 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:25:39,609 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:25:39,610 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:25:39,611 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:25:39,612 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:25:39,612 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:25:40,158 - APP.services.te_service - INFO - Đăng nhập thành công vào Trading Economics API.
2025-10-10 04:25:40,158 - APP.services.news_service - DEBUG - Cấu hình NewsService đã được cập nhật.
2025-10-10 04:25:40,159 - APP.utils.threading_utils - DEBUG - Gửi task 'news.refresh.autorun' vào nhóm 'news.polling' (metadata={'component': 'news', 'priority': 'autorun', 'timeout_sec': 20})
2025-10-10 04:25:40,160 - APP.utils.threading_utils - INFO - Task 'news.refresh.autorun' (group=news.polling) bị hủy sau 0.00s
2025-10-10 04:25:40,160 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.session.autorun-20251010-042540' vào nhóm 'analysis.session' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-042540', 'priority': 'autorun'})
2025-10-10 04:25:40,160 - APP.ui.controllers.news_controller - DEBUG - Future news bị cancel, không cập nhật UI.
2025-10-10 04:25:40,161 - APP.core.analysis_controller - INFO - Đã submit phiên phân tích autorun-20251010-042540 (priority=autorun)
2025-10-10 04:25:40,161 - APP.core.analysis_worker - DEBUG - Bắt đầu AnalysisWorker.run với model: models/gemini-2.5-flash
2025-10-10 04:25:40,161 - APP.ui.app_ui - INFO - Autorun autorun-20251010-042540 bắt đầu ngay lập tức.
2025-10-10 04:25:40,162 - APP.core.analysis_worker - DEBUG - GIAI ĐOẠN 1: Khởi tạo và kiểm tra đầu vào.
2025-10-10 04:25:40,162 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:25:40,163 - APP.ui.utils.ui_builder - DEBUG - Đã thay đổi trạng thái nút Start/Stop thành 'disabled'. Các điều khiển khác không bị ảnh hưởng.
2025-10-10 04:25:40,164 - APP.ui.app_ui - INFO - Phiên autorun-20251010-042540 bắt đầu (priority=autorun, source=autorun).
2025-10-10 04:25:40,165 - APP.services.gemini_service - INFO - Đã khởi tạo model 'models/gemini-2.5-flash' thành công.
2025-10-10 04:25:40,165 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:40,167 - APP.core.analysis_worker - DEBUG - BẮT ĐẦU GIAI ĐOẠN 2: Xây dựng ngữ cảnh và kiểm tra điều kiện.
2025-10-10 04:25:40,192 - APP.core.analysis_worker - DEBUG - BẮT ĐẦU GIAI ĐOẠN 3: Chuẩn bị và upload ảnh (TaskGroup analysis.upload).
2025-10-10 04:25:40,193 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:40,193 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:40,194 - APP.core.trading.conditions - DEBUG - Bắt đầu kiểm tra các điều kiện NO-RUN.
2025-10-10 04:25:40,196 - APP.analysis.image_processor - DEBUG - Đang thử tải cache upload.
2025-10-10 04:25:40,196 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:40,197 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:40,199 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:40,204 - APP.services.mt5_service - DEBUG - Bắt đầu get_active_killzone cho 2025-10-10 04:25:40.198211 với timezone Asia/Ho_Chi_Minh
2025-10-10 04:25:40,205 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: 2025-10-10 04:25:40.198211+07:00, Target TZ: None
2025-10-10 04:25:40,205 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 04:25:40.198211+07:00
2025-10-10 04:25:40,206 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 04:25:40.198211+07:00 trong DST: True
2025-10-10 04:25:40,206 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:25:40,206 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:25:40,207 - APP.services.mt5_service - DEBUG - Không trong killzone nào.
2025-10-10 04:25:40,207 - APP.core.trading.conditions - INFO - Điều kiện NO-RUN được kích hoạt: Không chạy ngoài các Kill Zone đã định nghĩa.
2025-10-10 04:25:40,207 - APP.core.trading.conditions - INFO - Thoát sớm. Giai đoạn: no-run, Lý do: Không chạy ngoài các Kill Zone đã định nghĩa.
2025-10-10 04:25:40,208 - APP.persistence.log_handler - DEBUG - Đang chuẩn bị ghi log giao dịch. Giai đoạn: no-run, Thư mục con: None
2025-10-10 04:25:40,242 - APP.analysis.image_processor - DEBUG - Đã tải cache upload với 4 mục.
2025-10-10 04:25:40,266 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:25:40,267 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-042540.0' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-042540', 'index': 0})
2025-10-10 04:25:40,268 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:25:40,268 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-042540.1' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-042540', 'index': 1})
2025-10-10 04:25:40,270 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_H1.png: 17792:1760070303:7a07a404318f2b78
2025-10-10 04:25:40,270 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-042540.2' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-042540', 'index': 2})
2025-10-10 04:25:40,271 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:25:40,271 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_H1.png, nhưng chữ ký không khớp.
2025-10-10 04:25:40,272 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M1.png: 16266:1760070288:3517b75804508b4f
2025-10-10 04:25:40,273 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-042540.3' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-042540', 'index': 3})
2025-10-10 04:25:40,297 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M15.png: 17094:1760070298:c803984a86fd0d21
2025-10-10 04:25:40,298 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_H1.png, Tối ưu hóa: False
2025-10-10 04:25:40,298 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:25:40,301 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_M15.png, nhưng chữ ký không khớp.
2025-10-10 04:25:40,302 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M5.png: 16582:1760070293:9e6d4733f18e584c
2025-10-10 04:25:40,302 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_M1.png, nhưng chữ ký không khớp.
2025-10-10 04:25:40,303 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_H1.png' lên Gemini File API...
2025-10-10 04:25:40,303 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_M15.png, Tối ưu hóa: False
2025-10-10 04:25:40,304 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_M5.png, nhưng chữ ký không khớp.
2025-10-10 04:25:40,317 - APP.persistence.log_handler - DEBUG - Đã ghi log giao dịch thành công vào trade_log_20251010.jsonl.
2025-10-10 04:25:40,335 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_M1.png, Tối ưu hóa: False
2025-10-10 04:25:40,366 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:25:40,396 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_M5.png, Tối ưu hóa: False
2025-10-10 04:25:40,396 - APP.persistence.log_handler - DEBUG - Kết thúc hàm log_trade.
2025-10-10 04:25:40,397 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:25:40,397 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:25:40,400 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_M15.png' lên Gemini File API...
2025-10-10 04:25:40,429 - APP.services.telegram_service - DEBUG - Đang khởi tạo TelegramClient từ cấu hình.
2025-10-10 04:25:40,524 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_M1.png' lên Gemini File API...
2025-10-10 04:25:40,525 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:25:40,525 - APP.services.telegram_service - INFO - Đang gửi tin nhắn đến chat_id: 90773...
2025-10-10 04:25:40,564 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_M5.png' lên Gemini File API...
2025-10-10 04:25:40,564 - APP.services.telegram_service - DEBUG - Đang tạo urllib opener với SSL context.
2025-10-10 04:25:40,571 - APP.services.telegram_service - DEBUG - Bắt đầu tạo SSL context. cafile: None, skip_verify: True
2025-10-10 04:25:40,640 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:25:40,861 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:25:41,041 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:25:41,213 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:41,257 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:41,259 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:41,293 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:41,294 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:25:41,297 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:41,653 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:41,654 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:25:41,908 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:25:41,949 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:25:42,015 - APP.services.telegram_service - DEBUG - Đã tạo SSL context với certifi.
2025-10-10 04:25:42,041 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:25:42,044 - APP.services.telegram_service - WARNING - !!! BỎ QUA XÁC MINH SSL (INSECURE) !!!
2025-10-10 04:25:42,047 - APP.services.telegram_service - DEBUG - Tạo SSL context thành công.
2025-10-10 04:25:42,095 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:25:42,106 - APP.services.telegram_service - DEBUG - Đang thực hiện API call (POST) đến method 'sendMessage'.
2025-10-10 04:25:42,258 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:25:42,293 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:42,299 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:42,299 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:42,302 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:42,303 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:42,374 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:42,909 - APP.services.telegram_service - DEBUG - Cuộc gọi API (POST) thành công. OK=True.
2025-10-10 04:25:42,922 - APP.core.analysis_worker - INFO - Giai đoạn 2 thoát sớm: Điều kiện No-Run: Không chạy ngoài các Kill Zone đã định nghĩa.
2025-10-10 04:25:42,930 - APP.utils.threading_utils - DEBUG - Task song song '_execute_stage_2_logic' hoàn tất thành công.
2025-10-10 04:25:43,303 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:43,316 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:43,316 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:43,355 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:43,358 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:43,364 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:44,181 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:25:44,181 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:25:44,183 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:25:44,210 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/bnm98y6vsu0g. Đang chờ trạng thái ACTIVE.
2025-10-10 04:25:44,213 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/3c5uho8gu1az. Đang chờ trạng thái ACTIVE.
2025-10-10 04:25:44,259 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:25:44,264 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/qtv999fsv19z. Đang chờ trạng thái ACTIVE.
2025-10-10 04:25:44,356 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:44,357 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:44,357 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:44,358 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:44,358 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:44,359 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:44,580 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/pefj87sng5or. Đang chờ trạng thái ACTIVE.
2025-10-10 04:25:44,856 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_H1.png': ACTIVE. Thời gian đã trôi qua: 0.6s
2025-10-10 04:25:44,857 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_H1.png'.
2025-10-10 04:25:44,858 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_H1.png: 17792:1760070303:7a07a404318f2b78
2025-10-10 04:25:44,858 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_H1.png trong cache với tên từ xa files/3c5uho8gu1az.
2025-10-10 04:25:44,858 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-042540.0' (group=analysis.upload) hoàn tất sau 4.59s
2025-10-10 04:25:44,869 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_M5.png': ACTIVE. Thời gian đã trôi qua: 0.7s
2025-10-10 04:25:44,873 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:25:44,885 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_M5.png'.
2025-10-10 04:25:44,888 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:25:44,889 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M5.png: 16582:1760070293:9e6d4733f18e584c
2025-10-10 04:25:44,889 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_M5.png trong cache với tên từ xa files/bnm98y6vsu0g.
2025-10-10 04:25:44,890 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-042540.3' (group=analysis.upload) hoàn tất sau 4.59s
2025-10-10 04:25:44,923 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_M15.png': ACTIVE. Thời gian đã trôi qua: 0.7s
2025-10-10 04:25:44,924 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_M15.png'.
2025-10-10 04:25:44,925 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M15.png: 17094:1760070298:c803984a86fd0d21
2025-10-10 04:25:44,926 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_M15.png trong cache với tên từ xa files/qtv999fsv19z.
2025-10-10 04:25:44,926 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-042540.2' (group=analysis.upload) hoàn tất sau 4.63s
2025-10-10 04:25:45,232 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_M1.png': ACTIVE. Thời gian đã trôi qua: 0.7s
2025-10-10 04:25:45,232 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_M1.png'.
2025-10-10 04:25:45,234 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M1.png: 16266:1760070288:3517b75804508b4f
2025-10-10 04:25:45,234 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_M1.png trong cache với tên từ xa files/pefj87sng5or.
2025-10-10 04:25:45,234 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-042540.1' (group=analysis.upload) hoàn tất sau 4.96s
2025-10-10 04:25:45,235 - APP.analysis.image_processor - DEBUG - Đang lưu cache upload với 4 mục.
2025-10-10 04:25:45,236 - APP.analysis.image_processor - DEBUG - Đã lưu cache upload thành công.
2025-10-10 04:25:45,237 - APP.utils.threading_utils - DEBUG - Task song song '_execute_stage_3_logic' hoàn tất thành công.
2025-10-10 04:25:45,238 - APP.core.analysis_worker - WARNING - Một trong các giai đoạn song song đã thất bại. Dừng worker.
2025-10-10 04:25:45,238 - APP.core.analysis_worker - INFO - Worker đã thoát một cách có kiểm soát: Thoát sớm do lỗi ở Giai đoạn 2 hoặc 3.
2025-10-10 04:25:45,238 - APP.core.analysis_worker - DEBUG - GIAI ĐOẠN 6: Hoàn tất và dọn dẹp.
2025-10-10 04:25:45,239 - APP.core.analysis_worker - DEBUG - Kết thúc AnalysisWorker.run.
2025-10-10 04:25:45,239 - APP.utils.threading_utils - DEBUG - Task 'analysis.session.autorun-20251010-042540' (group=analysis.session) hoàn tất sau 5.08s
2025-10-10 04:25:45,298 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:25:45,299 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:25:45,359 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:45,360 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:45,360 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:45,361 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:45,361 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:45,362 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:45,399 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:25:45,401 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:25:45,502 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:25:45,502 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:25:45,603 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:25:45,604 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:25:45,604 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: _finalize_done
2025-10-10 04:25:45,605 - APP.ui.utils.ui_builder - DEBUG - Đã thay đổi trạng thái nút Start/Stop thành 'normal'. Các điều khiển khác không bị ảnh hưởng.
2025-10-10 04:25:45,606 - APP.ui.app_ui - DEBUG - Lên lịch chạy tự động tiếp theo sau 60000ms.
2025-10-10 04:25:45,606 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:25:45,606 - APP.core.analysis_controller - INFO - Kết thúc session autorun-20251010-042540: {'status': 'completed', 'early_exit': True}
2025-10-10 04:25:46,363 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:46,364 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:46,364 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:46,365 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:46,365 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:46,366 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:47,366 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:47,367 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:47,367 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:47,368 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:47,368 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:47,369 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:48,368 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:48,369 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:48,369 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:48,370 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:48,370 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:48,370 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:49,371 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:49,372 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:49,372 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:49,373 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:49,373 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:49,374 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:50,373 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:50,374 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:50,374 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:50,375 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:50,375 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:50,376 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:51,375 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:51,376 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:51,377 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:51,377 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:51,378 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:51,378 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:52,378 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:52,379 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:52,379 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:52,380 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:52,380 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:52,381 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:53,381 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:53,381 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:53,382 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:53,382 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:53,383 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:53,383 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:54,383 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:54,384 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:54,384 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:54,385 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:54,385 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:54,386 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:55,385 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:55,386 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:55,387 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:55,387 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:55,388 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:55,389 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:56,388 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:56,389 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:56,389 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:56,390 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:56,390 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:56,391 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:57,390 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:57,391 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:57,392 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:57,392 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:57,393 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:57,393 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:58,393 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:58,394 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:58,394 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:58,395 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:58,396 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:58,396 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:25:59,184 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:25:59,184 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:25:59,186 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:25:59,279 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:25:59,396 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:59,397 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:25:59,397 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:59,398 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:25:59,398 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:25:59,398 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:00,399 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:00,399 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:00,400 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:00,401 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:00,401 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:00,401 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:01,401 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:01,402 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:01,402 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:01,403 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:01,403 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:01,404 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:02,403 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:02,404 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:02,404 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:02,405 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:02,405 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:02,406 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:03,406 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:03,406 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:03,407 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:03,407 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:03,407 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:03,408 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:04,408 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:04,409 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:04,409 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:04,410 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:04,411 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:04,411 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:05,411 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:05,412 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:05,413 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:05,413 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:05,414 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:05,414 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:06,414 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:06,415 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:06,415 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:06,416 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:06,416 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:06,417 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:07,416 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:07,417 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:07,417 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:07,418 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:07,419 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:07,419 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:08,419 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:08,420 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:08,420 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:08,421 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:08,422 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:08,422 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:09,422 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:09,422 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:09,423 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:09,423 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:09,424 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:09,424 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:10,424 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:10,425 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:10,425 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:10,426 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:10,427 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:10,427 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:11,428 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:11,428 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:11,429 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:11,429 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:11,430 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:11,430 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:12,430 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:12,431 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:12,432 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:12,432 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:12,433 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:12,433 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:13,434 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:13,435 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:13,435 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:13,436 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:13,437 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:13,437 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:14,186 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:26:14,187 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:26:14,188 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:26:14,191 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:26:14,437 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:14,437 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:14,438 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:14,438 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:14,439 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:14,439 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:15,439 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:15,440 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:15,440 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:15,441 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:15,441 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:15,441 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:16,441 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:16,442 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:16,442 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:16,443 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:16,443 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:16,444 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:17,444 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:17,445 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:17,445 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:17,446 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:17,446 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:17,447 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:18,446 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:18,447 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:18,447 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:18,448 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:18,449 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:18,449 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:19,448 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:19,449 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:19,449 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:19,450 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:19,450 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:19,451 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:20,452 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:20,453 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:20,453 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:20,454 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:20,454 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:20,455 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:21,454 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:21,455 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:21,455 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:21,456 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:21,457 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:21,457 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:22,457 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:22,458 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:22,458 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:22,458 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:22,459 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:22,459 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:23,459 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:23,460 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:23,460 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:23,461 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:23,461 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:23,462 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:24,464 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:24,464 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:24,465 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:24,465 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:24,466 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:24,466 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:25,466 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:25,466 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:25,467 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:25,468 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:25,468 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:25,469 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:26,468 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:26,469 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:26,469 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:26,470 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:26,470 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:26,471 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:27,470 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:27,471 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:27,471 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:27,472 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:27,472 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:27,473 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:28,475 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:28,476 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:28,476 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:28,477 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:28,477 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:28,478 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:29,189 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:26:29,191 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:26:29,192 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:26:29,268 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:26:29,477 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:29,478 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:29,478 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:29,479 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:29,479 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:29,480 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:30,479 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:30,480 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:30,481 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:30,481 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:30,482 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:30,482 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:31,482 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:31,482 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:31,483 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:31,483 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:31,484 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:31,484 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:32,484 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:32,485 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:32,485 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:32,486 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:32,486 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:32,487 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:33,488 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:33,489 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:33,489 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:33,490 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:33,491 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:33,491 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:34,491 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:34,492 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:34,492 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:34,493 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:34,493 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:34,494 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:35,493 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:35,494 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:35,494 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:35,495 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:35,495 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:35,496 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:36,496 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:36,497 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:36,497 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:36,498 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:36,498 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:36,498 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:37,500 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:37,500 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:37,501 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:37,501 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:37,502 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:37,502 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:38,502 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:38,503 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:38,503 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:38,504 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:38,504 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:38,504 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:39,505 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:39,506 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:39,506 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:39,506 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:39,507 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:39,508 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:40,507 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:40,508 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:40,508 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:40,509 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:40,509 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:40,510 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:41,511 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:41,512 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:41,512 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:41,513 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:41,513 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:41,513 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:42,514 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:42,514 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:42,515 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:42,515 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:42,516 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:42,517 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:43,518 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:43,519 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:43,520 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:43,520 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:43,521 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:43,521 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:44,194 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:26:44,194 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:26:44,196 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:26:44,265 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:26:44,521 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:44,522 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:44,522 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:44,523 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:44,524 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:44,524 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:45,523 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:45,524 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:45,525 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:45,525 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:45,526 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:45,526 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:45,606 - APP.ui.app_ui - INFO - Autorun tick: Kích hoạt worker kiểm tra.
2025-10-10 04:26:45,606 - APP.utils.threading_utils - DEBUG - Gửi task 'ui.autorun.guard' vào nhóm 'ui.autorun' (metadata={'component': 'analysis', 'operation': 'autorun_guard'})
2025-10-10 04:26:45,607 - APP.ui.controllers.io_controller - INFO - Đã gửi worker I/O ui.autorun.guard vào group ui.autorun (metadata={'component': 'analysis', 'operation': 'autorun_guard'})
2025-10-10 04:26:45,607 - APP.ui.app_ui - DEBUG - Autorun tick worker: Bắt đầu kiểm tra điều kiện.
2025-10-10 04:26:45,609 - APP.ui.app_ui - INFO - Autorun tick worker: Điều kiện hợp lệ, yêu cầu bắt đầu phân tích trên luồng UI.
2025-10-10 04:26:45,609 - APP.utils.threading_utils - DEBUG - Task 'ui.autorun.guard' (group=ui.autorun) hoàn tất sau 0.00s
2025-10-10 04:26:45,684 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: _request_autorun_start
2025-10-10 04:26:45,685 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:26:45,686 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:26:45,686 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:26:45,687 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:26:45,687 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:26:45,688 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:26:45,688 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:26:45,689 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:26:46,221 - APP.services.te_service - INFO - Đăng nhập thành công vào Trading Economics API.
2025-10-10 04:26:46,221 - APP.services.news_service - DEBUG - Cấu hình NewsService đã được cập nhật.
2025-10-10 04:26:46,222 - APP.utils.threading_utils - DEBUG - Gửi task 'news.refresh.autorun' vào nhóm 'news.polling' (metadata={'component': 'news', 'priority': 'autorun', 'timeout_sec': 20})
2025-10-10 04:26:46,222 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.session.autorun-20251010-042646' vào nhóm 'analysis.session' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-042646', 'priority': 'autorun'})
2025-10-10 04:26:46,223 - APP.utils.threading_utils - INFO - Task 'news.refresh.autorun' (group=news.polling) bị hủy sau 0.00s
2025-10-10 04:26:46,223 - APP.core.analysis_controller - INFO - Đã submit phiên phân tích autorun-20251010-042646 (priority=autorun)
2025-10-10 04:26:46,223 - APP.core.analysis_worker - DEBUG - Bắt đầu AnalysisWorker.run với model: models/gemini-2.5-flash
2025-10-10 04:26:46,224 - APP.ui.controllers.news_controller - DEBUG - Future news bị cancel, không cập nhật UI.
2025-10-10 04:26:46,224 - APP.ui.app_ui - INFO - Autorun autorun-20251010-042646 bắt đầu ngay lập tức.
2025-10-10 04:26:46,224 - APP.core.analysis_worker - DEBUG - GIAI ĐOẠN 1: Khởi tạo và kiểm tra đầu vào.
2025-10-10 04:26:46,225 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:26:46,226 - APP.ui.utils.ui_builder - DEBUG - Đã thay đổi trạng thái nút Start/Stop thành 'disabled'. Các điều khiển khác không bị ảnh hưởng.
2025-10-10 04:26:46,226 - APP.ui.app_ui - INFO - Phiên autorun-20251010-042646 bắt đầu (priority=autorun, source=autorun).
2025-10-10 04:26:46,227 - APP.services.gemini_service - INFO - Đã khởi tạo model 'models/gemini-2.5-flash' thành công.
2025-10-10 04:26:46,229 - APP.core.analysis_worker - DEBUG - BẮT ĐẦU GIAI ĐOẠN 2: Xây dựng ngữ cảnh và kiểm tra điều kiện.
2025-10-10 04:26:46,230 - APP.core.trading.conditions - DEBUG - Bắt đầu kiểm tra các điều kiện NO-RUN.
2025-10-10 04:26:46,231 - APP.core.analysis_worker - DEBUG - BẮT ĐẦU GIAI ĐOẠN 3: Chuẩn bị và upload ảnh (TaskGroup analysis.upload).
2025-10-10 04:26:46,259 - APP.analysis.image_processor - DEBUG - Đang thử tải cache upload.
2025-10-10 04:26:46,263 - APP.services.mt5_service - DEBUG - Bắt đầu get_active_killzone cho 2025-10-10 04:26:46.258485 với timezone Asia/Ho_Chi_Minh
2025-10-10 04:26:46,264 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: 2025-10-10 04:26:46.258485+07:00, Target TZ: None
2025-10-10 04:26:46,264 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 04:26:46.258485+07:00
2025-10-10 04:26:46,265 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 04:26:46.258485+07:00 trong DST: True
2025-10-10 04:26:46,265 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:26:46,266 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:26:46,266 - APP.services.mt5_service - DEBUG - Không trong killzone nào.
2025-10-10 04:26:46,266 - APP.core.trading.conditions - INFO - Điều kiện NO-RUN được kích hoạt: Không chạy ngoài các Kill Zone đã định nghĩa.
2025-10-10 04:26:46,267 - APP.core.trading.conditions - INFO - Thoát sớm. Giai đoạn: no-run, Lý do: Không chạy ngoài các Kill Zone đã định nghĩa.
2025-10-10 04:26:46,267 - APP.persistence.log_handler - DEBUG - Đang chuẩn bị ghi log giao dịch. Giai đoạn: no-run, Thư mục con: None
2025-10-10 04:26:46,305 - APP.analysis.image_processor - DEBUG - Đã tải cache upload với 4 mục.
2025-10-10 04:26:46,306 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-042646.0' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-042646', 'index': 0})
2025-10-10 04:26:46,306 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-042646.1' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-042646', 'index': 1})
2025-10-10 04:26:46,307 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_H1.png: 17799:1760070384:bf75fede3387c3e2
2025-10-10 04:26:46,308 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-042646.2' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-042646', 'index': 2})
2025-10-10 04:26:46,309 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M1.png: 16454:1760070369:6f4b4ce69a3d1f62
2025-10-10 04:26:46,331 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:26:46,333 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_H1.png, nhưng chữ ký không khớp.
2025-10-10 04:26:46,334 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-042646.3' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-042646', 'index': 3})
2025-10-10 04:26:46,335 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M15.png: 17196:1760070379:e4ad3c3c616c1457
2025-10-10 04:26:46,336 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_M1.png, nhưng chữ ký không khớp.
2025-10-10 04:26:46,337 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:26:46,337 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_H1.png, Tối ưu hóa: False
2025-10-10 04:26:46,338 - APP.persistence.log_handler - DEBUG - Đã ghi log giao dịch thành công vào trade_log_20251010.jsonl.
2025-10-10 04:26:46,340 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M5.png: 16335:1760070374:85f72fd2591420ff
2025-10-10 04:26:46,341 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_M15.png, nhưng chữ ký không khớp.
2025-10-10 04:26:46,343 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_M15.png, Tối ưu hóa: False
2025-10-10 04:26:46,368 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:26:46,369 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:26:46,370 - APP.persistence.log_handler - DEBUG - Kết thúc hàm log_trade.
2025-10-10 04:26:46,370 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_M5.png, nhưng chữ ký không khớp.
2025-10-10 04:26:46,374 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_M1.png, Tối ưu hóa: False
2025-10-10 04:26:46,400 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:26:46,401 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_M1.png' lên Gemini File API...
2025-10-10 04:26:46,406 - APP.services.telegram_service - DEBUG - Đang khởi tạo TelegramClient từ cấu hình.
2025-10-10 04:26:46,407 - APP.services.telegram_service - INFO - Đang gửi tin nhắn đến chat_id: 90773...
2025-10-10 04:26:46,408 - APP.services.telegram_service - DEBUG - Đang tạo urllib opener với SSL context.
2025-10-10 04:26:46,409 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_M15.png' lên Gemini File API...
2025-10-10 04:26:46,410 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_H1.png' lên Gemini File API...
2025-10-10 04:26:46,410 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_M5.png, Tối ưu hóa: False
2025-10-10 04:26:46,411 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:26:46,411 - APP.services.telegram_service - DEBUG - Bắt đầu tạo SSL context. cafile: None, skip_verify: True
2025-10-10 04:26:46,428 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:26:46,429 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_M5.png' lên Gemini File API...
2025-10-10 04:26:46,669 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:46,677 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:46,677 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:46,794 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:46,795 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:26:46,896 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:47,192 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:47,428 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:26:47,872 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:47,897 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:47,897 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:47,948 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:26:47,953 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:47,961 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:47,965 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:47,972 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:26:47,995 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:26:48,020 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:26:48,021 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:26:48,150 - APP.services.telegram_service - DEBUG - Đã tạo SSL context với certifi.
2025-10-10 04:26:48,193 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:26:48,196 - APP.services.telegram_service - WARNING - !!! BỎ QUA XÁC MINH SSL (INSECURE) !!!
2025-10-10 04:26:48,213 - APP.services.telegram_service - DEBUG - Tạo SSL context thành công.
2025-10-10 04:26:48,214 - APP.services.telegram_service - DEBUG - Đang thực hiện API call (POST) đến method 'sendMessage'.
2025-10-10 04:26:48,332 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:26:48,466 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:26:48,607 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:26:48,946 - APP.services.telegram_service - DEBUG - Cuộc gọi API (POST) thành công. OK=True.
2025-10-10 04:26:48,984 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:48,990 - APP.core.analysis_worker - INFO - Giai đoạn 2 thoát sớm: Điều kiện No-Run: Không chạy ngoài các Kill Zone đã định nghĩa.
2025-10-10 04:26:49,229 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:49,229 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:49,329 - APP.utils.threading_utils - DEBUG - Task song song '_execute_stage_2_logic' hoàn tất thành công.
2025-10-10 04:26:49,403 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:49,434 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:49,478 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:50,060 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/p6odlmh4muz9. Đang chờ trạng thái ACTIVE.
2025-10-10 04:26:50,407 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:50,409 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:50,409 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:50,410 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:50,413 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:50,416 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:50,455 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/nghqqeoro13z. Đang chờ trạng thái ACTIVE.
2025-10-10 04:26:50,456 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/nu6ziuytbmho. Đang chờ trạng thái ACTIVE.
2025-10-10 04:26:50,504 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/t53tf9wcg2yv. Đang chờ trạng thái ACTIVE.
2025-10-10 04:26:50,709 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_M15.png': ACTIVE. Thời gian đã trôi qua: 0.6s
2025-10-10 04:26:50,711 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_M15.png'.
2025-10-10 04:26:50,757 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M15.png: 17196:1760070379:e4ad3c3c616c1457
2025-10-10 04:26:50,760 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_M15.png trong cache với tên từ xa files/p6odlmh4muz9.
2025-10-10 04:26:50,761 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-042646.2' (group=analysis.upload) hoàn tất sau 4.43s
2025-10-10 04:26:51,137 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_H1.png': ACTIVE. Thời gian đã trôi qua: 0.6s
2025-10-10 04:26:51,137 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_H1.png'.
2025-10-10 04:26:51,138 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_H1.png: 17799:1760070384:bf75fede3387c3e2
2025-10-10 04:26:51,139 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_H1.png trong cache với tên từ xa files/nghqqeoro13z.
2025-10-10 04:26:51,139 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-042646.0' (group=analysis.upload) hoàn tất sau 4.83s
2025-10-10 04:26:51,179 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:26:51,180 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:26:51,221 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_M1.png': ACTIVE. Thời gian đã trôi qua: 0.7s
2025-10-10 04:26:51,227 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_M5.png': ACTIVE. Thời gian đã trôi qua: 0.7s
2025-10-10 04:26:51,234 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_M1.png'.
2025-10-10 04:26:51,235 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_M5.png'.
2025-10-10 04:26:51,236 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M1.png: 16454:1760070369:6f4b4ce69a3d1f62
2025-10-10 04:26:51,237 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M5.png: 16335:1760070374:85f72fd2591420ff
2025-10-10 04:26:51,237 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_M1.png trong cache với tên từ xa files/nu6ziuytbmho.
2025-10-10 04:26:51,237 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_M5.png trong cache với tên từ xa files/t53tf9wcg2yv.
2025-10-10 04:26:51,238 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-042646.1' (group=analysis.upload) hoàn tất sau 4.93s
2025-10-10 04:26:51,238 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-042646.3' (group=analysis.upload) hoàn tất sau 4.90s
2025-10-10 04:26:51,239 - APP.analysis.image_processor - DEBUG - Đang lưu cache upload với 4 mục.
2025-10-10 04:26:51,240 - APP.analysis.image_processor - DEBUG - Đã lưu cache upload thành công.
2025-10-10 04:26:51,241 - APP.utils.threading_utils - DEBUG - Task song song '_execute_stage_3_logic' hoàn tất thành công.
2025-10-10 04:26:51,242 - APP.core.analysis_worker - WARNING - Một trong các giai đoạn song song đã thất bại. Dừng worker.
2025-10-10 04:26:51,242 - APP.core.analysis_worker - INFO - Worker đã thoát một cách có kiểm soát: Thoát sớm do lỗi ở Giai đoạn 2 hoặc 3.
2025-10-10 04:26:51,242 - APP.core.analysis_worker - DEBUG - GIAI ĐOẠN 6: Hoàn tất và dọn dẹp.
2025-10-10 04:26:51,243 - APP.core.analysis_worker - DEBUG - Kết thúc AnalysisWorker.run.
2025-10-10 04:26:51,243 - APP.utils.threading_utils - DEBUG - Task 'analysis.session.autorun-20251010-042646' (group=analysis.session) hoàn tất sau 5.02s
2025-10-10 04:26:51,280 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:26:51,281 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:26:51,404 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:26:51,404 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:26:51,410 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:51,411 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:51,411 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:51,412 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:51,413 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:51,413 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:51,505 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:26:51,506 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:26:51,607 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:26:51,608 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:26:51,608 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: _finalize_done
2025-10-10 04:26:51,609 - APP.ui.utils.ui_builder - DEBUG - Đã thay đổi trạng thái nút Start/Stop thành 'normal'. Các điều khiển khác không bị ảnh hưởng.
2025-10-10 04:26:51,609 - APP.ui.app_ui - DEBUG - Lên lịch chạy tự động tiếp theo sau 60000ms.
2025-10-10 04:26:51,610 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:26:51,610 - APP.core.analysis_controller - INFO - Kết thúc session autorun-20251010-042646: {'status': 'completed', 'early_exit': True}
2025-10-10 04:26:52,413 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:52,413 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:52,414 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:52,414 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:52,415 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:52,415 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:53,415 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:53,416 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:53,417 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:53,417 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:53,417 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:53,418 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:54,418 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:54,419 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:54,419 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:54,420 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:54,420 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:54,421 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:55,420 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:55,421 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:55,422 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:55,422 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:55,423 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:55,423 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:56,423 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:56,424 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:56,424 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:56,425 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:56,425 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:56,426 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:57,428 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:57,428 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:57,429 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:57,429 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:57,430 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:57,430 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:58,432 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:58,433 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:58,433 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:58,434 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:58,434 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:58,434 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:26:59,197 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:26:59,197 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:26:59,199 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:26:59,269 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:26:59,450 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:59,503 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:26:59,503 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:59,516 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:26:59,517 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:26:59,519 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:00,519 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:00,519 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:00,520 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:00,521 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:00,521 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:00,522 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:01,521 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:01,521 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:01,522 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:01,523 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:01,523 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:01,524 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:02,524 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:02,524 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:02,525 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:02,525 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:02,526 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:02,527 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:03,526 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:03,527 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:03,527 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:03,528 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:03,528 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:03,529 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:04,528 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:04,529 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:04,529 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:04,530 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:04,531 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:04,531 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:05,532 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:05,533 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:05,533 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:05,534 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:05,534 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:05,535 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:06,535 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:06,536 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:06,536 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:06,537 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:06,538 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:06,538 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:07,538 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:07,539 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:07,539 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:07,541 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:07,541 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:07,541 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:08,540 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:08,541 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:08,542 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:08,542 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:08,543 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:08,543 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:09,543 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:09,543 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:09,544 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:09,545 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:09,545 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:09,545 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:10,545 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:10,545 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:10,546 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:10,547 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:10,547 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:10,548 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:11,547 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:11,548 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:11,548 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:11,549 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:11,549 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:11,550 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:12,550 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:12,550 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:12,551 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:12,551 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:12,552 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:12,552 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:13,552 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:13,553 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:13,553 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:13,554 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:13,554 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:13,555 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:14,199 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:27:14,200 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:27:14,202 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:27:14,241 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:27:14,556 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:14,557 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:14,557 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:14,558 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:14,558 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:14,559 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:15,559 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:15,559 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:15,560 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:15,561 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:15,561 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:15,561 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:16,562 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:16,562 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:16,563 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:16,563 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:16,564 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:16,564 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:17,564 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:17,565 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:17,565 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:17,566 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:17,566 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:17,567 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:18,568 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:18,568 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:18,569 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:18,569 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:18,570 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:18,570 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:19,570 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:19,571 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:19,571 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:19,572 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:19,573 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:19,573 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:20,573 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:20,573 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:20,573 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:20,574 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:20,575 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:20,575 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:21,575 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:21,575 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:21,576 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:21,577 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:21,577 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:21,578 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:22,578 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:22,579 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:22,579 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:22,580 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:22,580 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:22,581 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:23,581 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:23,581 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:23,582 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:23,582 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:23,583 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:23,583 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:24,583 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:24,584 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:24,584 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:24,585 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:24,586 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:24,586 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:25,585 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:25,586 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:25,587 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:25,587 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:25,588 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:25,588 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:26,588 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:26,588 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:26,589 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:26,589 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:26,590 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:26,590 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:27,590 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:27,591 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:27,591 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:27,592 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:27,592 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:27,593 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:28,592 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:28,593 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:28,593 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:28,594 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:28,594 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:28,595 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:29,203 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:27:29,203 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:27:29,205 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:27:29,293 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:27:29,595 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:29,596 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:29,596 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:29,597 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:29,597 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:29,598 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:30,597 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:30,598 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:30,598 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:30,599 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:30,600 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:30,600 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:31,600 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:31,601 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:31,601 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:31,602 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:31,602 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:31,603 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:32,603 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:32,604 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:32,604 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:32,605 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:32,605 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:32,606 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:33,606 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:33,606 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:33,607 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:33,607 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:33,608 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:33,608 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:34,609 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:34,610 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:34,610 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:34,611 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:34,611 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:34,612 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:35,612 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:35,614 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:35,615 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:35,615 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:35,616 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:35,616 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:36,616 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:36,617 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:36,617 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:36,618 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:36,618 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:36,619 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:37,619 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:37,620 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:37,620 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:37,621 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:37,621 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:37,622 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:38,622 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:38,623 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:38,624 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:38,624 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:38,625 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:38,625 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:39,625 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:39,626 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:39,626 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:39,627 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:39,627 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:39,628 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:40,628 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:40,629 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:40,629 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:40,630 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:40,630 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:40,631 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:41,631 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:41,632 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:41,632 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:41,633 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:41,633 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:41,634 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:42,633 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:42,634 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:42,635 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:42,635 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:42,636 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:42,636 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:43,636 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:43,637 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:43,637 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:43,638 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:43,638 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:43,639 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:44,206 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:27:44,207 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:27:44,208 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:27:44,287 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:27:44,638 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:44,639 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:44,640 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:44,640 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:44,641 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:44,641 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:45,642 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:45,643 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:45,643 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:45,644 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:45,644 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:45,645 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:46,644 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:46,645 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:46,645 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:46,646 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:46,647 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:46,647 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:47,647 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:47,648 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:47,648 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:47,649 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:47,649 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:47,650 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:48,650 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:48,650 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:48,651 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:48,652 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:48,652 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:48,652 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:49,652 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:49,653 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:49,653 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:49,654 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:49,654 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:49,655 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:50,655 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:50,655 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:50,656 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:50,656 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:50,657 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:50,657 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:51,611 - APP.ui.app_ui - INFO - Autorun tick: Kích hoạt worker kiểm tra.
2025-10-10 04:27:51,612 - APP.utils.threading_utils - DEBUG - Gửi task 'ui.autorun.guard' vào nhóm 'ui.autorun' (metadata={'component': 'analysis', 'operation': 'autorun_guard'})
2025-10-10 04:27:51,612 - APP.ui.controllers.io_controller - INFO - Đã gửi worker I/O ui.autorun.guard vào group ui.autorun (metadata={'component': 'analysis', 'operation': 'autorun_guard'})
2025-10-10 04:27:51,613 - APP.ui.app_ui - DEBUG - Autorun tick worker: Bắt đầu kiểm tra điều kiện.
2025-10-10 04:27:51,614 - APP.ui.app_ui - INFO - Autorun tick worker: Điều kiện hợp lệ, yêu cầu bắt đầu phân tích trên luồng UI.
2025-10-10 04:27:51,615 - APP.utils.threading_utils - DEBUG - Task 'ui.autorun.guard' (group=ui.autorun) hoàn tất sau 0.00s
2025-10-10 04:27:51,628 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: _request_autorun_start
2025-10-10 04:27:51,645 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:27:51,646 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:27:51,647 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:27:51,648 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:27:51,648 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:27:51,649 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:27:51,649 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:27:51,650 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:27:52,156 - APP.services.te_service - INFO - Đăng nhập thành công vào Trading Economics API.
2025-10-10 04:27:52,157 - APP.services.news_service - DEBUG - Cấu hình NewsService đã được cập nhật.
2025-10-10 04:27:52,157 - APP.utils.threading_utils - DEBUG - Gửi task 'news.refresh.autorun' vào nhóm 'news.polling' (metadata={'component': 'news', 'priority': 'autorun', 'timeout_sec': 20})
2025-10-10 04:27:52,158 - APP.utils.threading_utils - INFO - Task 'news.refresh.autorun' (group=news.polling) bị hủy sau 0.00s
2025-10-10 04:27:52,158 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.session.autorun-20251010-042752' vào nhóm 'analysis.session' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-042752', 'priority': 'autorun'})
2025-10-10 04:27:52,159 - APP.ui.controllers.news_controller - DEBUG - Future news bị cancel, không cập nhật UI.
2025-10-10 04:27:52,159 - APP.core.analysis_controller - INFO - Đã submit phiên phân tích autorun-20251010-042752 (priority=autorun)
2025-10-10 04:27:52,159 - APP.core.analysis_worker - DEBUG - Bắt đầu AnalysisWorker.run với model: models/gemini-2.5-flash
2025-10-10 04:27:52,160 - APP.ui.app_ui - INFO - Autorun autorun-20251010-042752 bắt đầu ngay lập tức.
2025-10-10 04:27:52,160 - APP.core.analysis_worker - DEBUG - GIAI ĐOẠN 1: Khởi tạo và kiểm tra đầu vào.
2025-10-10 04:27:52,161 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:27:52,161 - APP.ui.utils.ui_builder - DEBUG - Đã thay đổi trạng thái nút Start/Stop thành 'disabled'. Các điều khiển khác không bị ảnh hưởng.
2025-10-10 04:27:52,162 - APP.ui.app_ui - INFO - Phiên autorun-20251010-042752 bắt đầu (priority=autorun, source=autorun).
2025-10-10 04:27:52,163 - APP.services.gemini_service - INFO - Đã khởi tạo model 'models/gemini-2.5-flash' thành công.
2025-10-10 04:27:52,163 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:52,166 - APP.core.analysis_worker - DEBUG - BẮT ĐẦU GIAI ĐOẠN 2: Xây dựng ngữ cảnh và kiểm tra điều kiện.
2025-10-10 04:27:52,188 - APP.core.trading.conditions - DEBUG - Bắt đầu kiểm tra các điều kiện NO-RUN.
2025-10-10 04:27:52,188 - APP.core.analysis_worker - DEBUG - BẮT ĐẦU GIAI ĐOẠN 3: Chuẩn bị và upload ảnh (TaskGroup analysis.upload).
2025-10-10 04:27:52,189 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:52,190 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:52,192 - APP.analysis.image_processor - DEBUG - Đang thử tải cache upload.
2025-10-10 04:27:52,194 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:52,195 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:52,197 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:52,197 - APP.services.mt5_service - DEBUG - Bắt đầu get_active_killzone cho 2025-10-10 04:27:52.191447 với timezone Asia/Ho_Chi_Minh
2025-10-10 04:27:52,198 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: 2025-10-10 04:27:52.191447+07:00, Target TZ: None
2025-10-10 04:27:52,200 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 04:27:52.191447+07:00
2025-10-10 04:27:52,201 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 04:27:52.191447+07:00 trong DST: True
2025-10-10 04:27:52,201 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:27:52,202 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:27:52,202 - APP.services.mt5_service - DEBUG - Không trong killzone nào.
2025-10-10 04:27:52,202 - APP.core.trading.conditions - INFO - Điều kiện NO-RUN được kích hoạt: Không chạy ngoài các Kill Zone đã định nghĩa.
2025-10-10 04:27:52,203 - APP.core.trading.conditions - INFO - Thoát sớm. Giai đoạn: no-run, Lý do: Không chạy ngoài các Kill Zone đã định nghĩa.
2025-10-10 04:27:52,204 - APP.persistence.log_handler - DEBUG - Đang chuẩn bị ghi log giao dịch. Giai đoạn: no-run, Thư mục con: None
2025-10-10 04:27:52,218 - APP.analysis.image_processor - DEBUG - Đã tải cache upload với 4 mục.
2025-10-10 04:27:52,218 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-042752.0' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-042752', 'index': 0})
2025-10-10 04:27:52,219 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-042752.1' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-042752', 'index': 1})
2025-10-10 04:27:52,223 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_H1.png: 17797:1760070464:4f93cc7be61df62e
2025-10-10 04:27:52,242 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-042752.2' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-042752', 'index': 2})
2025-10-10 04:27:52,243 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M1.png: 16204:1760070449:4afadff22645655a
2025-10-10 04:27:52,243 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_H1.png, nhưng chữ ký không khớp.
2025-10-10 04:27:52,244 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-042752.3' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-042752', 'index': 3})
2025-10-10 04:27:52,245 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_M1.png, nhưng chữ ký không khớp.
2025-10-10 04:27:52,245 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_H1.png, Tối ưu hóa: False
2025-10-10 04:27:52,246 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_M1.png, Tối ưu hóa: False
2025-10-10 04:27:52,246 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M15.png: 17188:1760070459:c6e449cd4452c143
2025-10-10 04:27:52,247 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M5.png: 16244:1760070454:d1b6c1999e17c349
2025-10-10 04:27:52,247 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:27:52,247 - APP.persistence.log_handler - DEBUG - Đã ghi log giao dịch thành công vào trade_log_20251010.jsonl.
2025-10-10 04:27:52,248 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:27:52,249 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_M15.png, nhưng chữ ký không khớp.
2025-10-10 04:27:52,249 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_M5.png, nhưng chữ ký không khớp.
2025-10-10 04:27:52,250 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_H1.png' lên Gemini File API...
2025-10-10 04:27:52,250 - APP.persistence.log_handler - DEBUG - Kết thúc hàm log_trade.
2025-10-10 04:27:52,250 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_M1.png' lên Gemini File API...
2025-10-10 04:27:52,251 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_M15.png, Tối ưu hóa: False
2025-10-10 04:27:52,252 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_M5.png, Tối ưu hóa: False
2025-10-10 04:27:52,254 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:27:52,283 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:27:52,328 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_M5.png' lên Gemini File API...
2025-10-10 04:27:52,334 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:27:52,337 - APP.services.telegram_service - DEBUG - Đang khởi tạo TelegramClient từ cấu hình.
2025-10-10 04:27:52,338 - APP.services.telegram_service - INFO - Đang gửi tin nhắn đến chat_id: 90773...
2025-10-10 04:27:52,339 - APP.services.telegram_service - DEBUG - Đang tạo urllib opener với SSL context.
2025-10-10 04:27:52,340 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_M15.png' lên Gemini File API...
2025-10-10 04:27:52,341 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:27:52,401 - APP.services.telegram_service - DEBUG - Bắt đầu tạo SSL context. cafile: None, skip_verify: True
2025-10-10 04:27:52,448 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:27:52,626 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:27:53,024 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:27:53,154 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:27:53,342 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:53,398 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:53,398 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:53,537 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:53,538 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:27:53,554 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:53,556 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:53,666 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:27:53,906 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:27:53,928 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:27:53,959 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:27:53,976 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:27:54,016 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:27:54,030 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:27:54,142 - APP.services.telegram_service - DEBUG - Đã tạo SSL context với certifi.
2025-10-10 04:27:54,202 - APP.services.telegram_service - WARNING - !!! BỎ QUA XÁC MINH SSL (INSECURE) !!!
2025-10-10 04:27:54,214 - APP.services.telegram_service - DEBUG - Tạo SSL context thành công.
2025-10-10 04:27:54,215 - APP.services.telegram_service - DEBUG - Đang thực hiện API call (POST) đến method 'sendMessage'.
2025-10-10 04:27:54,552 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:54,565 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:54,565 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:54,633 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:54,640 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:54,641 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:54,997 - APP.services.telegram_service - DEBUG - Cuộc gọi API (POST) thành công. OK=True.
2025-10-10 04:27:55,003 - APP.core.analysis_worker - INFO - Giai đoạn 2 thoát sớm: Điều kiện No-Run: Không chạy ngoài các Kill Zone đã định nghĩa.
2025-10-10 04:27:55,009 - APP.utils.threading_utils - DEBUG - Task song song '_execute_stage_2_logic' hoàn tất thành công.
2025-10-10 04:27:55,634 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:55,635 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:55,635 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:55,636 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:55,636 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:55,637 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:55,956 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/5v2agk4z0eje. Đang chờ trạng thái ACTIVE.
2025-10-10 04:27:55,972 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/uylzawgjfl47. Đang chờ trạng thái ACTIVE.
2025-10-10 04:27:56,129 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/lbns49xdl43q. Đang chờ trạng thái ACTIVE.
2025-10-10 04:27:56,342 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/e1cr09k1z1ue. Đang chờ trạng thái ACTIVE.
2025-10-10 04:27:56,604 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_M1.png': ACTIVE. Thời gian đã trôi qua: 0.6s
2025-10-10 04:27:56,604 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_M1.png'.
2025-10-10 04:27:56,605 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M1.png: 16204:1760070449:4afadff22645655a
2025-10-10 04:27:56,606 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_M1.png trong cache với tên từ xa files/5v2agk4z0eje.
2025-10-10 04:27:56,606 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-042752.1' (group=analysis.upload) hoàn tất sau 4.36s
2025-10-10 04:27:56,628 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_H1.png': ACTIVE. Thời gian đã trôi qua: 0.6s
2025-10-10 04:27:56,637 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:56,638 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_H1.png'.
2025-10-10 04:27:56,639 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:56,639 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:56,641 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:56,641 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:56,642 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_H1.png: 17797:1760070464:4f93cc7be61df62e
2025-10-10 04:27:56,642 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:56,642 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_H1.png trong cache với tên từ xa files/uylzawgjfl47.
2025-10-10 04:27:56,643 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-042752.0' (group=analysis.upload) hoàn tất sau 4.42s
2025-10-10 04:27:56,674 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:27:56,680 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:27:56,780 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_M15.png': ACTIVE. Thời gian đã trôi qua: 0.7s
2025-10-10 04:27:56,780 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:27:56,781 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_M15.png'.
2025-10-10 04:27:56,781 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:27:56,782 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M15.png: 17188:1760070459:c6e449cd4452c143
2025-10-10 04:27:56,783 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_M15.png trong cache với tên từ xa files/lbns49xdl43q.
2025-10-10 04:27:56,783 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-042752.2' (group=analysis.upload) hoàn tất sau 4.54s
2025-10-10 04:27:56,883 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:27:56,884 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:27:57,005 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_M5.png': ACTIVE. Thời gian đã trôi qua: 0.7s
2025-10-10 04:27:57,037 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_M5.png'.
2025-10-10 04:27:57,038 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M5.png: 16244:1760070454:d1b6c1999e17c349
2025-10-10 04:27:57,046 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_M5.png trong cache với tên từ xa files/e1cr09k1z1ue.
2025-10-10 04:27:57,107 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-042752.3' (group=analysis.upload) hoàn tất sau 4.86s
2025-10-10 04:27:57,164 - APP.analysis.image_processor - DEBUG - Đang lưu cache upload với 4 mục.
2025-10-10 04:27:57,187 - APP.analysis.image_processor - DEBUG - Đã lưu cache upload thành công.
2025-10-10 04:27:57,211 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:27:57,232 - APP.utils.threading_utils - DEBUG - Task song song '_execute_stage_3_logic' hoàn tất thành công.
2025-10-10 04:27:57,238 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:27:57,239 - APP.core.analysis_worker - WARNING - Một trong các giai đoạn song song đã thất bại. Dừng worker.
2025-10-10 04:27:57,240 - APP.core.analysis_worker - INFO - Worker đã thoát một cách có kiểm soát: Thoát sớm do lỗi ở Giai đoạn 2 hoặc 3.
2025-10-10 04:27:57,241 - APP.core.analysis_worker - DEBUG - GIAI ĐOẠN 6: Hoàn tất và dọn dẹp.
2025-10-10 04:27:57,242 - APP.core.analysis_worker - DEBUG - Kết thúc AnalysisWorker.run.
2025-10-10 04:27:57,243 - APP.utils.threading_utils - DEBUG - Task 'analysis.session.autorun-20251010-042752' (group=analysis.session) hoàn tất sau 5.08s
2025-10-10 04:27:57,340 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:27:57,341 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:27:57,341 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: _finalize_done
2025-10-10 04:27:57,342 - APP.ui.utils.ui_builder - DEBUG - Đã thay đổi trạng thái nút Start/Stop thành 'normal'. Các điều khiển khác không bị ảnh hưởng.
2025-10-10 04:27:57,342 - APP.ui.app_ui - DEBUG - Lên lịch chạy tự động tiếp theo sau 60000ms.
2025-10-10 04:27:57,343 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:27:57,343 - APP.core.analysis_controller - INFO - Kết thúc session autorun-20251010-042752: {'status': 'completed', 'early_exit': True}
2025-10-10 04:27:57,641 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:57,641 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:57,642 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:57,642 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:57,643 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:57,643 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:58,643 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:58,644 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:58,644 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:58,645 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:58,645 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:58,646 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:27:59,210 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:27:59,211 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:27:59,212 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:27:59,250 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:27:59,645 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:59,646 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:27:59,646 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:59,647 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:27:59,648 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:27:59,648 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:00,648 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:00,649 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:00,649 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:00,650 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:00,650 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:00,651 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:01,652 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:01,652 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:01,653 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:01,653 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:01,654 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:01,654 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:02,655 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:02,656 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:02,656 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:02,657 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:02,657 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:02,658 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:03,658 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:03,658 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:03,659 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:03,659 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:03,660 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:03,660 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:04,660 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:04,661 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:04,662 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:04,662 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:04,663 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:04,663 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:05,663 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:05,664 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:05,664 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:05,665 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:05,665 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:05,666 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:06,665 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:06,666 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:06,666 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:06,667 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:06,668 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:06,668 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:07,668 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:07,668 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:07,669 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:07,669 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:07,670 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:07,670 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:08,672 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:08,673 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:08,673 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:08,674 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:08,674 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:08,675 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:09,676 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:09,676 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:09,677 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:09,678 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:09,678 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:09,679 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:10,678 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:10,678 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:10,679 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:10,679 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:10,680 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:10,680 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:11,680 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:11,681 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:11,681 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:11,682 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:11,682 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:11,682 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:12,683 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:12,683 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:12,684 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:12,685 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:12,685 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:12,686 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:13,685 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:13,686 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:13,686 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:13,687 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:13,687 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:13,688 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:14,214 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:28:14,215 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:28:14,216 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:28:14,252 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:28:14,689 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:14,689 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:14,690 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:14,691 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:14,691 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:14,692 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:15,692 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:15,693 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:15,693 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:15,694 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:15,694 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:15,695 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:16,695 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:16,696 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:16,697 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:16,697 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:16,698 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:16,698 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:17,698 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:17,699 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:17,699 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:17,700 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:17,700 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:17,701 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:18,701 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:18,702 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:18,702 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:18,702 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:18,703 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:18,703 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:19,703 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:19,704 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:19,704 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:19,705 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:19,705 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:19,706 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:20,705 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:20,706 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:20,707 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:20,707 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:20,708 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:20,709 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:21,707 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:21,709 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:21,709 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:21,710 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:21,710 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:21,711 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:22,712 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:22,713 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:22,714 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:22,715 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:22,715 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:22,715 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:23,715 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:23,716 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:23,716 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:23,717 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:23,718 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:23,718 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:24,718 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:24,718 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:24,719 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:24,720 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:24,720 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:24,720 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:25,720 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:25,721 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:25,722 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:25,722 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:25,723 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:25,723 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:26,723 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:26,724 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:26,724 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:26,725 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:26,725 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:26,726 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:27,726 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:27,727 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:27,727 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:27,728 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:27,728 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:27,729 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:28,729 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:28,729 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:28,730 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:28,731 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:28,731 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:28,731 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:29,216 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:28:29,217 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:28:29,219 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:28:29,275 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:28:29,731 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:29,732 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:29,732 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:29,732 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:29,733 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:29,733 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:30,733 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:30,734 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:30,734 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:30,736 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:30,736 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:30,736 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:31,736 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:31,736 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:31,737 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:31,738 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:31,738 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:31,739 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:32,738 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:32,739 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:32,740 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:32,740 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:32,741 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:32,741 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:33,741 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:33,742 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:33,743 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:33,744 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:33,744 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:33,745 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:34,745 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:34,746 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:34,747 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:34,748 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:34,748 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:34,749 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:35,748 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:35,749 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:35,749 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:35,750 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:35,750 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:35,751 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:36,752 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:36,753 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:36,753 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:36,754 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:36,754 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:36,754 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:37,754 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:37,755 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:37,756 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:37,756 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:37,757 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:37,757 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:38,758 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:38,759 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:38,759 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:38,760 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:38,761 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:38,761 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:39,761 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:39,762 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:39,762 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:39,763 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:39,763 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:39,764 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:40,765 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:40,766 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:40,767 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:40,767 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:40,768 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:40,768 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:41,768 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:41,768 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:41,769 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:41,769 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:41,770 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:41,770 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:42,770 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:42,770 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:42,771 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:42,771 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:42,772 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:42,772 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:43,772 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:43,772 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:43,773 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:43,773 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:43,774 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:43,774 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:44,220 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:28:44,220 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:28:44,222 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:28:44,278 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:28:44,774 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:44,775 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:44,775 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:44,776 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:44,776 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:44,777 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:45,777 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:45,778 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:45,778 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:45,780 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:45,780 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:45,781 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:46,780 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:46,781 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:46,781 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:46,782 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:46,782 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:46,782 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:47,782 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:47,783 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:47,784 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:47,784 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:47,785 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:47,785 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:48,784 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:48,785 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:48,785 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:48,786 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:48,787 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:48,787 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:49,786 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:49,787 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:49,787 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:49,788 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:49,788 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:49,789 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:50,788 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:50,789 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:50,789 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:50,790 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:50,790 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:50,791 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:51,790 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:51,791 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:51,791 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:51,792 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:51,792 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:51,793 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:52,792 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:52,793 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:52,794 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:52,795 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:52,795 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:52,796 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:53,795 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:53,796 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:53,796 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:53,797 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:53,797 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:53,798 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:54,798 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:54,799 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:54,799 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:54,800 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:54,800 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:54,801 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:55,800 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:55,801 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:55,802 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:55,802 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:55,803 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:55,803 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:56,803 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:56,804 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:56,804 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:56,805 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:56,805 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:56,806 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:57,343 - APP.ui.app_ui - INFO - Autorun tick: Kích hoạt worker kiểm tra.
2025-10-10 04:28:57,343 - APP.utils.threading_utils - DEBUG - Gửi task 'ui.autorun.guard' vào nhóm 'ui.autorun' (metadata={'component': 'analysis', 'operation': 'autorun_guard'})
2025-10-10 04:28:57,344 - APP.ui.controllers.io_controller - INFO - Đã gửi worker I/O ui.autorun.guard vào group ui.autorun (metadata={'component': 'analysis', 'operation': 'autorun_guard'})
2025-10-10 04:28:57,344 - APP.ui.app_ui - DEBUG - Autorun tick worker: Bắt đầu kiểm tra điều kiện.
2025-10-10 04:28:57,346 - APP.ui.app_ui - INFO - Autorun tick worker: Điều kiện hợp lệ, yêu cầu bắt đầu phân tích trên luồng UI.
2025-10-10 04:28:57,346 - APP.utils.threading_utils - DEBUG - Task 'ui.autorun.guard' (group=ui.autorun) hoàn tất sau 0.00s
2025-10-10 04:28:57,376 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: _request_autorun_start
2025-10-10 04:28:57,377 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:28:57,378 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:28:57,378 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:28:57,379 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:28:57,380 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:28:57,380 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:28:57,381 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:28:57,381 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:28:57,920 - APP.services.te_service - INFO - Đăng nhập thành công vào Trading Economics API.
2025-10-10 04:28:57,920 - APP.services.news_service - DEBUG - Cấu hình NewsService đã được cập nhật.
2025-10-10 04:28:57,921 - APP.utils.threading_utils - DEBUG - Gửi task 'news.refresh.autorun' vào nhóm 'news.polling' (metadata={'component': 'news', 'priority': 'autorun', 'timeout_sec': 20})
2025-10-10 04:28:57,922 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.session.autorun-20251010-042857' vào nhóm 'analysis.session' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-042857', 'priority': 'autorun'})
2025-10-10 04:28:57,922 - APP.utils.threading_utils - INFO - Task 'news.refresh.autorun' (group=news.polling) bị hủy sau 0.00s
2025-10-10 04:28:57,922 - APP.core.analysis_controller - INFO - Đã submit phiên phân tích autorun-20251010-042857 (priority=autorun)
2025-10-10 04:28:57,923 - APP.core.analysis_worker - DEBUG - Bắt đầu AnalysisWorker.run với model: models/gemini-2.5-flash
2025-10-10 04:28:57,923 - APP.ui.controllers.news_controller - DEBUG - Future news bị cancel, không cập nhật UI.
2025-10-10 04:28:57,923 - APP.ui.app_ui - INFO - Autorun autorun-20251010-042857 bắt đầu ngay lập tức.
2025-10-10 04:28:57,924 - APP.core.analysis_worker - DEBUG - GIAI ĐOẠN 1: Khởi tạo và kiểm tra đầu vào.
2025-10-10 04:28:57,924 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:28:57,925 - APP.ui.utils.ui_builder - DEBUG - Đã thay đổi trạng thái nút Start/Stop thành 'disabled'. Các điều khiển khác không bị ảnh hưởng.
2025-10-10 04:28:57,926 - APP.ui.app_ui - INFO - Phiên autorun-20251010-042857 bắt đầu (priority=autorun, source=autorun).
2025-10-10 04:28:57,928 - APP.services.gemini_service - INFO - Đã khởi tạo model 'models/gemini-2.5-flash' thành công.
2025-10-10 04:28:57,929 - APP.core.analysis_worker - DEBUG - BẮT ĐẦU GIAI ĐOẠN 2: Xây dựng ngữ cảnh và kiểm tra điều kiện.
2025-10-10 04:28:57,930 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:57,932 - APP.core.trading.conditions - DEBUG - Bắt đầu kiểm tra các điều kiện NO-RUN.
2025-10-10 04:28:57,959 - APP.core.analysis_worker - DEBUG - BẮT ĐẦU GIAI ĐOẠN 3: Chuẩn bị và upload ảnh (TaskGroup analysis.upload).
2025-10-10 04:28:57,960 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:57,960 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:57,962 - APP.analysis.image_processor - DEBUG - Đang thử tải cache upload.
2025-10-10 04:28:57,963 - APP.services.mt5_service - DEBUG - Bắt đầu get_active_killzone cho 2025-10-10 04:28:57.956324 với timezone Asia/Ho_Chi_Minh
2025-10-10 04:28:57,963 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:57,963 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:57,964 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: 2025-10-10 04:28:57.956324+07:00, Target TZ: None
2025-10-10 04:28:57,965 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:57,966 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 04:28:57.956324+07:00
2025-10-10 04:28:57,966 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 04:28:57.956324+07:00 trong DST: True
2025-10-10 04:28:57,967 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:28:57,967 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:28:57,969 - APP.services.mt5_service - DEBUG - Không trong killzone nào.
2025-10-10 04:28:57,970 - APP.core.trading.conditions - INFO - Điều kiện NO-RUN được kích hoạt: Không chạy ngoài các Kill Zone đã định nghĩa.
2025-10-10 04:28:57,970 - APP.core.trading.conditions - INFO - Thoát sớm. Giai đoạn: no-run, Lý do: Không chạy ngoài các Kill Zone đã định nghĩa.
2025-10-10 04:28:57,970 - APP.persistence.log_handler - DEBUG - Đang chuẩn bị ghi log giao dịch. Giai đoạn: no-run, Thư mục con: None
2025-10-10 04:28:58,009 - APP.persistence.log_handler - DEBUG - Đã ghi log giao dịch thành công vào trade_log_20251010.jsonl.
2025-10-10 04:28:58,010 - APP.persistence.log_handler - DEBUG - Kết thúc hàm log_trade.
2025-10-10 04:28:58,010 - APP.services.telegram_service - DEBUG - Đang khởi tạo TelegramClient từ cấu hình.
2025-10-10 04:28:58,011 - APP.services.telegram_service - INFO - Đang gửi tin nhắn đến chat_id: 90773...
2025-10-10 04:28:58,011 - APP.services.telegram_service - DEBUG - Đang tạo urllib opener với SSL context.
2025-10-10 04:28:58,011 - APP.services.telegram_service - DEBUG - Bắt đầu tạo SSL context. cafile: None, skip_verify: True
2025-10-10 04:28:58,018 - APP.analysis.image_processor - DEBUG - Đã tải cache upload với 4 mục.
2025-10-10 04:28:58,018 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-042857.0' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-042857', 'index': 0})
2025-10-10 04:28:58,019 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-042857.1' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-042857', 'index': 1})
2025-10-10 04:28:58,020 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-042857.2' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-042857', 'index': 2})
2025-10-10 04:28:58,020 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_H1.png: 17797:1760070464:4f93cc7be61df62e
2025-10-10 04:28:58,021 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-042857.3' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-042857', 'index': 3})
2025-10-10 04:28:58,021 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_H1.png. Tên từ xa: files/uylzawgjfl47
2025-10-10 04:28:58,021 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M1.png: 16761:1760070529:9b507bf6e6541e7a
2025-10-10 04:28:58,022 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M15.png: 17188:1760070459:c6e449cd4452c143
2025-10-10 04:28:58,023 - APP.core.analysis_worker - DEBUG - Tìm thấy trong cache: XAUUSD_H1.png, đang lấy thông tin file...
2025-10-10 04:28:58,024 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M5.png: 16440:1760070534:72fc88fcb23a7ea7
2025-10-10 04:28:58,024 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_M1.png, nhưng chữ ký không khớp.
2025-10-10 04:28:58,025 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_M1.png, Tối ưu hóa: False
2025-10-10 04:28:58,027 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_M5.png, nhưng chữ ký không khớp.
2025-10-10 04:28:58,029 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_M15.png. Tên từ xa: files/lbns49xdl43q
2025-10-10 04:28:58,031 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:28:58,032 - APP.core.analysis_worker - DEBUG - Tìm thấy trong cache: XAUUSD_M15.png, đang lấy thông tin file...
2025-10-10 04:28:58,033 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_M5.png, Tối ưu hóa: False
2025-10-10 04:28:58,033 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:28:58,034 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_M5.png' lên Gemini File API...
2025-10-10 04:28:58,036 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:28:58,040 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_M1.png' lên Gemini File API...
2025-10-10 04:28:58,066 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:28:58,068 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:28:58,169 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:28:58,193 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-042857.0' (group=analysis.upload) hoàn tất sau 0.17s
2025-10-10 04:28:58,197 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-042857.2' (group=analysis.upload) hoàn tất sau 0.18s
2025-10-10 04:28:58,306 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:28:58,414 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:28:58,529 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:28:58,632 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:28:58,737 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:28:58,739 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:28:58,966 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:58,972 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:58,972 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:58,978 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:58,981 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:58,981 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:28:59,118 - APP.services.telegram_service - DEBUG - Đã tạo SSL context với certifi.
2025-10-10 04:28:59,119 - APP.services.telegram_service - WARNING - !!! BỎ QUA XÁC MINH SSL (INSECURE) !!!
2025-10-10 04:28:59,120 - APP.services.telegram_service - DEBUG - Tạo SSL context thành công.
2025-10-10 04:28:59,122 - APP.services.telegram_service - DEBUG - Đang thực hiện API call (POST) đến method 'sendMessage'.
2025-10-10 04:28:59,224 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:28:59,226 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:28:59,228 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:28:59,256 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:28:59,281 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:28:59,317 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:28:59,845 - APP.services.telegram_service - DEBUG - Cuộc gọi API (POST) thành công. OK=True.
2025-10-10 04:28:59,845 - APP.core.analysis_worker - INFO - Giai đoạn 2 thoát sớm: Điều kiện No-Run: Không chạy ngoài các Kill Zone đã định nghĩa.
2025-10-10 04:28:59,846 - APP.utils.threading_utils - DEBUG - Task song song '_execute_stage_2_logic' hoàn tất thành công.
2025-10-10 04:28:59,978 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:59,979 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:28:59,979 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:59,980 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:28:59,980 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:28:59,981 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:00,963 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/4qdy3sxp4nz7. Đang chờ trạng thái ACTIVE.
2025-10-10 04:29:00,964 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/wqelpqvcxp7p. Đang chờ trạng thái ACTIVE.
2025-10-10 04:29:00,994 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:00,996 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:00,997 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:00,998 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:00,999 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:00,999 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:01,611 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_M1.png': ACTIVE. Thời gian đã trôi qua: 0.6s
2025-10-10 04:29:01,612 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_M1.png'.
2025-10-10 04:29:01,612 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M1.png: 16761:1760070529:9b507bf6e6541e7a
2025-10-10 04:29:01,613 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_M1.png trong cache với tên từ xa files/wqelpqvcxp7p.
2025-10-10 04:29:01,613 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-042857.1' (group=analysis.upload) hoàn tất sau 3.59s
2025-10-10 04:29:01,634 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_M5.png': ACTIVE. Thời gian đã trôi qua: 0.7s
2025-10-10 04:29:01,643 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_M5.png'.
2025-10-10 04:29:01,644 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M5.png: 16440:1760070534:72fc88fcb23a7ea7
2025-10-10 04:29:01,644 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_M5.png trong cache với tên từ xa files/4qdy3sxp4nz7.
2025-10-10 04:29:01,645 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-042857.3' (group=analysis.upload) hoàn tất sau 3.62s
2025-10-10 04:29:01,645 - APP.analysis.image_processor - DEBUG - Đang lưu cache upload với 4 mục.
2025-10-10 04:29:01,647 - APP.analysis.image_processor - DEBUG - Đã lưu cache upload thành công.
2025-10-10 04:29:01,648 - APP.utils.threading_utils - DEBUG - Task song song '_execute_stage_3_logic' hoàn tất thành công.
2025-10-10 04:29:01,649 - APP.core.analysis_worker - WARNING - Một trong các giai đoạn song song đã thất bại. Dừng worker.
2025-10-10 04:29:01,650 - APP.core.analysis_worker - INFO - Worker đã thoát một cách có kiểm soát: Thoát sớm do lỗi ở Giai đoạn 2 hoặc 3.
2025-10-10 04:29:01,650 - APP.core.analysis_worker - DEBUG - GIAI ĐOẠN 6: Hoàn tất và dọn dẹp.
2025-10-10 04:29:01,651 - APP.core.analysis_worker - DEBUG - Kết thúc AnalysisWorker.run.
2025-10-10 04:29:01,651 - APP.utils.threading_utils - DEBUG - Task 'analysis.session.autorun-20251010-042857' (group=analysis.session) hoàn tất sau 3.73s
2025-10-10 04:29:01,715 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:29:01,718 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:29:01,819 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:29:01,820 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:29:01,921 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:29:01,922 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:29:01,999 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:02,000 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:02,000 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:02,001 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:02,001 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:02,002 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:02,030 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:29:02,034 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:29:02,035 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: _finalize_done
2025-10-10 04:29:02,036 - APP.ui.utils.ui_builder - DEBUG - Đã thay đổi trạng thái nút Start/Stop thành 'normal'. Các điều khiển khác không bị ảnh hưởng.
2025-10-10 04:29:02,037 - APP.ui.app_ui - DEBUG - Lên lịch chạy tự động tiếp theo sau 60000ms.
2025-10-10 04:29:02,037 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:29:02,037 - APP.core.analysis_controller - INFO - Kết thúc session autorun-20251010-042857: {'status': 'completed', 'early_exit': True}
2025-10-10 04:29:03,001 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:03,002 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:03,002 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:03,003 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:03,004 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:03,004 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:04,004 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:04,005 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:04,006 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:04,007 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:04,008 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:04,009 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:05,009 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:05,010 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:05,010 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:05,011 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:05,011 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:05,012 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:06,013 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:06,014 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:06,014 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:06,015 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:06,015 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:06,016 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:07,015 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:07,016 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:07,016 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:07,017 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:07,017 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:07,018 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:08,018 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:08,019 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:08,019 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:08,020 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:08,020 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:08,020 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:09,020 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:09,021 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:09,021 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:09,022 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:09,022 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:09,023 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:10,022 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:10,023 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:10,023 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:10,024 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:10,025 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:10,025 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:11,025 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:11,026 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:11,026 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:11,027 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:11,027 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:11,027 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:12,027 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:12,028 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:12,028 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:12,029 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:12,029 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:12,030 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:13,030 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:13,031 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:13,031 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:13,032 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:13,032 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:13,032 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:14,032 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:14,033 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:14,034 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:14,034 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:14,034 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:14,035 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:14,230 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:29:14,231 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:29:14,232 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:29:14,311 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:29:15,034 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:15,035 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:15,035 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:15,036 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:15,037 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:15,037 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:16,037 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:16,038 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:16,038 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:16,039 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:16,040 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:16,040 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:17,042 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:17,042 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:17,043 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:17,043 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:17,044 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:17,044 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:18,044 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:18,044 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:18,045 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:18,045 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:18,046 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:18,046 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:19,046 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:19,046 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:19,047 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:19,047 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:19,048 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:19,049 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:20,048 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:20,049 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:20,049 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:20,050 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:20,050 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:20,051 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:21,051 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:21,052 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:21,052 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:21,052 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:21,053 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:21,053 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:22,053 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:22,054 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:22,054 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:22,054 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:22,055 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:22,055 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:23,055 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:23,058 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:23,059 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:23,062 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:23,063 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:23,064 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:24,063 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:24,066 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:24,068 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:24,071 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:24,072 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:24,076 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:25,073 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:25,074 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:25,074 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:25,076 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:25,077 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:25,077 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:26,077 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:26,078 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:26,078 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:26,079 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:26,079 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:26,080 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:27,079 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:27,080 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:27,081 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:27,082 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:27,082 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:27,083 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:28,082 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:28,083 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:28,083 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:28,084 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:28,086 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:28,086 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:29,087 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:29,088 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:29,088 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:29,089 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:29,089 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:29,090 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:29,233 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:29:29,233 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:29:29,235 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:29:29,264 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:29:30,089 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:30,090 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:30,091 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:30,091 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:30,092 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:30,092 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:31,092 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:31,092 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:31,093 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:31,094 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:31,094 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:31,094 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:32,094 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:32,095 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:32,095 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:32,096 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:32,096 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:32,097 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:33,097 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:33,098 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:33,098 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:33,099 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:33,099 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:33,100 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:34,099 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:34,100 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:34,100 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:34,101 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:34,102 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:34,102 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:35,102 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:35,103 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:35,103 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:35,104 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:35,104 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:35,105 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:36,106 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:36,107 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:36,107 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:36,108 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:36,109 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:36,109 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:37,109 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:37,109 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:37,109 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:37,110 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:37,111 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:37,111 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:38,111 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:38,111 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:38,112 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:38,113 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:38,113 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:38,114 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:39,113 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:39,114 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:39,114 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:39,115 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:39,115 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:39,116 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:40,115 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:40,116 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:40,116 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:40,117 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:40,117 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:40,118 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:41,118 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:41,118 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:41,119 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:41,119 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:41,120 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:41,120 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:42,120 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:42,121 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:42,121 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:42,122 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:42,122 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:42,123 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:43,123 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:43,123 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:43,124 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:43,124 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:43,125 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:43,125 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:44,125 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:44,126 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:44,126 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:44,127 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:44,127 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:44,128 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:44,236 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:29:44,236 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:29:44,238 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:29:44,323 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:29:45,130 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:45,130 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:45,131 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:45,131 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:45,132 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:45,132 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:46,132 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:46,133 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:46,133 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:46,134 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:46,134 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:46,135 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:47,135 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:47,136 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:47,136 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:47,137 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:47,137 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:47,138 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:48,139 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:48,139 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:48,140 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:48,140 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:48,140 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:48,141 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:49,141 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:49,142 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:49,142 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:49,143 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:49,143 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:49,144 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:50,144 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:50,144 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:50,145 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:50,146 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:50,146 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:50,146 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:51,146 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:51,147 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:51,147 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:51,148 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:51,149 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:51,149 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:52,149 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:52,150 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:52,150 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:52,151 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:52,151 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:52,152 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:53,151 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:53,153 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:53,153 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:53,154 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:53,154 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:53,155 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:54,155 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:54,156 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:54,156 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:54,157 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:54,158 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:54,158 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:55,158 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:55,160 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:55,160 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:55,161 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:55,162 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:55,162 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:56,169 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:56,175 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:56,175 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:56,181 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:56,182 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:56,183 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:57,182 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:57,183 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:57,183 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:57,184 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:57,184 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:57,185 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:58,184 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:58,185 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:58,185 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:58,186 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:58,187 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:58,187 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:59,187 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:59,188 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:29:59,188 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:59,189 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:29:59,189 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:29:59,190 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:29:59,239 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:29:59,251 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:29:59,253 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:29:59,324 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:30:00,190 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:00,191 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:00,191 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:00,192 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:00,192 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:00,193 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:01,193 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:01,193 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:01,194 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:01,194 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:01,195 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:01,195 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:02,038 - APP.ui.app_ui - INFO - Autorun tick: Kích hoạt worker kiểm tra.
2025-10-10 04:30:02,038 - APP.utils.threading_utils - DEBUG - Gửi task 'ui.autorun.guard' vào nhóm 'ui.autorun' (metadata={'component': 'analysis', 'operation': 'autorun_guard'})
2025-10-10 04:30:02,039 - APP.ui.controllers.io_controller - INFO - Đã gửi worker I/O ui.autorun.guard vào group ui.autorun (metadata={'component': 'analysis', 'operation': 'autorun_guard'})
2025-10-10 04:30:02,039 - APP.ui.app_ui - DEBUG - Autorun tick worker: Bắt đầu kiểm tra điều kiện.
2025-10-10 04:30:02,041 - APP.ui.app_ui - INFO - Autorun tick worker: Điều kiện hợp lệ, yêu cầu bắt đầu phân tích trên luồng UI.
2025-10-10 04:30:02,041 - APP.utils.threading_utils - DEBUG - Task 'ui.autorun.guard' (group=ui.autorun) hoàn tất sau 0.00s
2025-10-10 04:30:02,048 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: _request_autorun_start
2025-10-10 04:30:02,052 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:30:02,069 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:30:02,070 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:30:02,072 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:30:02,073 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:30:02,074 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:30:02,075 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:30:02,076 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:30:02,627 - APP.services.te_service - INFO - Đăng nhập thành công vào Trading Economics API.
2025-10-10 04:30:02,627 - APP.services.news_service - DEBUG - Cấu hình NewsService đã được cập nhật.
2025-10-10 04:30:02,628 - APP.utils.threading_utils - DEBUG - Gửi task 'news.refresh.autorun' vào nhóm 'news.polling' (metadata={'component': 'news', 'priority': 'autorun', 'timeout_sec': 20})
2025-10-10 04:30:02,629 - APP.utils.threading_utils - INFO - Task 'news.refresh.autorun' (group=news.polling) bị hủy sau 0.00s
2025-10-10 04:30:02,629 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.session.autorun-20251010-043002' vào nhóm 'analysis.session' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-043002', 'priority': 'autorun'})
2025-10-10 04:30:02,629 - APP.ui.controllers.news_controller - DEBUG - Future news bị cancel, không cập nhật UI.
2025-10-10 04:30:02,630 - APP.core.analysis_controller - INFO - Đã submit phiên phân tích autorun-20251010-043002 (priority=autorun)
2025-10-10 04:30:02,630 - APP.core.analysis_worker - DEBUG - Bắt đầu AnalysisWorker.run với model: models/gemini-2.5-flash
2025-10-10 04:30:02,630 - APP.ui.app_ui - INFO - Autorun autorun-20251010-043002 bắt đầu ngay lập tức.
2025-10-10 04:30:02,631 - APP.core.analysis_worker - DEBUG - GIAI ĐOẠN 1: Khởi tạo và kiểm tra đầu vào.
2025-10-10 04:30:02,631 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:30:02,632 - APP.ui.utils.ui_builder - DEBUG - Đã thay đổi trạng thái nút Start/Stop thành 'disabled'. Các điều khiển khác không bị ảnh hưởng.
2025-10-10 04:30:02,633 - APP.ui.app_ui - INFO - Phiên autorun-20251010-043002 bắt đầu (priority=autorun, source=autorun).
2025-10-10 04:30:02,634 - APP.services.gemini_service - INFO - Đã khởi tạo model 'models/gemini-2.5-flash' thành công.
2025-10-10 04:30:02,634 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:02,636 - APP.core.analysis_worker - DEBUG - BẮT ĐẦU GIAI ĐOẠN 2: Xây dựng ngữ cảnh và kiểm tra điều kiện.
2025-10-10 04:30:02,639 - APP.core.trading.conditions - DEBUG - Bắt đầu kiểm tra các điều kiện NO-RUN.
2025-10-10 04:30:02,663 - APP.core.analysis_worker - DEBUG - BẮT ĐẦU GIAI ĐOẠN 3: Chuẩn bị và upload ảnh (TaskGroup analysis.upload).
2025-10-10 04:30:02,664 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:02,664 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:02,664 - APP.analysis.image_processor - DEBUG - Đang thử tải cache upload.
2025-10-10 04:30:02,665 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:02,665 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:02,670 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:02,692 - APP.services.mt5_service - DEBUG - Bắt đầu get_active_killzone cho 2025-10-10 04:30:02.660581 với timezone Asia/Ho_Chi_Minh
2025-10-10 04:30:02,695 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: 2025-10-10 04:30:02.660581+07:00, Target TZ: None
2025-10-10 04:30:02,695 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 04:30:02.660581+07:00
2025-10-10 04:30:02,696 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 04:30:02.660581+07:00 trong DST: True
2025-10-10 04:30:02,697 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:30:02,697 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:30:02,698 - APP.services.mt5_service - DEBUG - Không trong killzone nào.
2025-10-10 04:30:02,702 - APP.core.trading.conditions - INFO - Điều kiện NO-RUN được kích hoạt: Không chạy ngoài các Kill Zone đã định nghĩa.
2025-10-10 04:30:02,758 - APP.analysis.image_processor - DEBUG - Đã tải cache upload với 4 mục.
2025-10-10 04:30:02,758 - APP.core.trading.conditions - INFO - Thoát sớm. Giai đoạn: no-run, Lý do: Không chạy ngoài các Kill Zone đã định nghĩa.
2025-10-10 04:30:02,759 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-043002.0' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-043002', 'index': 0})
2025-10-10 04:30:02,759 - APP.persistence.log_handler - DEBUG - Đang chuẩn bị ghi log giao dịch. Giai đoạn: no-run, Thư mục con: None
2025-10-10 04:30:02,760 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-043002.1' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-043002', 'index': 1})
2025-10-10 04:30:02,784 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_H1.png: 22237:1760070544:0edace157f762244
2025-10-10 04:30:02,792 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-043002.2' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-043002', 'index': 2})
2025-10-10 04:30:02,794 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M1.png: 16761:1760070529:9b507bf6e6541e7a
2025-10-10 04:30:02,795 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_H1.png, nhưng chữ ký không khớp.
2025-10-10 04:30:02,796 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_H1.png, Tối ưu hóa: False
2025-10-10 04:30:02,797 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:30:02,798 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_H1.png' lên Gemini File API...
2025-10-10 04:30:02,798 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_M1.png. Tên từ xa: files/wqelpqvcxp7p
2025-10-10 04:30:02,799 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-043002.3' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-043002', 'index': 3})
2025-10-10 04:30:02,800 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M15.png: 19150:1760070539:97da4d6ef8f7d6ca
2025-10-10 04:30:02,806 - APP.core.analysis_worker - DEBUG - Tìm thấy trong cache: XAUUSD_M1.png, đang lấy thông tin file...
2025-10-10 04:30:02,818 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_M15.png, nhưng chữ ký không khớp.
2025-10-10 04:30:02,820 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M5.png: 16440:1760070534:72fc88fcb23a7ea7
2025-10-10 04:30:02,821 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_M15.png, Tối ưu hóa: False
2025-10-10 04:30:02,821 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_M5.png. Tên từ xa: files/4qdy3sxp4nz7
2025-10-10 04:30:02,822 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:30:02,822 - APP.core.analysis_worker - DEBUG - Tìm thấy trong cache: XAUUSD_M5.png, đang lấy thông tin file...
2025-10-10 04:30:02,822 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_M15.png' lên Gemini File API...
2025-10-10 04:30:02,823 - APP.persistence.log_handler - DEBUG - Đã ghi log giao dịch thành công vào trade_log_20251010.jsonl.
2025-10-10 04:30:02,853 - APP.persistence.log_handler - DEBUG - Kết thúc hàm log_trade.
2025-10-10 04:30:02,853 - APP.services.telegram_service - DEBUG - Đang khởi tạo TelegramClient từ cấu hình.
2025-10-10 04:30:02,854 - APP.services.telegram_service - INFO - Đang gửi tin nhắn đến chat_id: 90773...
2025-10-10 04:30:02,854 - APP.services.telegram_service - DEBUG - Đang tạo urllib opener với SSL context.
2025-10-10 04:30:02,855 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:30:02,856 - APP.services.telegram_service - DEBUG - Bắt đầu tạo SSL context. cafile: None, skip_verify: True
2025-10-10 04:30:02,881 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-043002.1' (group=analysis.upload) hoàn tất sau 0.09s
2025-10-10 04:30:02,893 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:30:02,901 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:30:02,908 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-043002.3' (group=analysis.upload) hoàn tất sau 0.09s
2025-10-10 04:30:03,018 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:30:03,120 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:30:03,222 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:30:03,324 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:30:03,431 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:30:03,667 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:03,669 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:03,669 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:03,674 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:03,675 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:03,677 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:03,926 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:30:03,970 - APP.services.telegram_service - DEBUG - Đã tạo SSL context với certifi.
2025-10-10 04:30:03,975 - APP.services.telegram_service - WARNING - !!! BỎ QUA XÁC MINH SSL (INSECURE) !!!
2025-10-10 04:30:03,976 - APP.services.telegram_service - DEBUG - Tạo SSL context thành công.
2025-10-10 04:30:03,977 - APP.services.telegram_service - DEBUG - Đang thực hiện API call (POST) đến method 'sendMessage'.
2025-10-10 04:30:04,007 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:30:04,670 - APP.services.telegram_service - DEBUG - Cuộc gọi API (POST) thành công. OK=True.
2025-10-10 04:30:04,670 - APP.core.analysis_worker - INFO - Giai đoạn 2 thoát sớm: Điều kiện No-Run: Không chạy ngoài các Kill Zone đã định nghĩa.
2025-10-10 04:30:04,671 - APP.utils.threading_utils - DEBUG - Task song song '_execute_stage_2_logic' hoàn tất thành công.
2025-10-10 04:30:04,675 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:04,676 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:04,677 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:04,678 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:04,680 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:04,718 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:05,679 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:05,680 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:05,681 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:05,687 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:05,688 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:05,761 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:05,763 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/jo5d97xekrjg. Đang chờ trạng thái ACTIVE.
2025-10-10 04:30:06,003 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/jwv8zfaky0zk. Đang chờ trạng thái ACTIVE.
2025-10-10 04:30:06,428 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_H1.png': ACTIVE. Thời gian đã trôi qua: 0.7s
2025-10-10 04:30:06,429 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_H1.png'.
2025-10-10 04:30:06,430 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_H1.png: 22237:1760070544:0edace157f762244
2025-10-10 04:30:06,430 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_H1.png trong cache với tên từ xa files/jo5d97xekrjg.
2025-10-10 04:30:06,431 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-043002.0' (group=analysis.upload) hoàn tất sau 3.67s
2025-10-10 04:30:06,469 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:30:06,470 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:30:06,571 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:30:06,572 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:30:06,654 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_M15.png': ACTIVE. Thời gian đã trôi qua: 0.6s
2025-10-10 04:30:06,654 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_M15.png'.
2025-10-10 04:30:06,656 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M15.png: 19150:1760070539:97da4d6ef8f7d6ca
2025-10-10 04:30:06,656 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_M15.png trong cache với tên từ xa files/jwv8zfaky0zk.
2025-10-10 04:30:06,656 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-043002.2' (group=analysis.upload) hoàn tất sau 3.86s
2025-10-10 04:30:06,657 - APP.analysis.image_processor - DEBUG - Đang lưu cache upload với 4 mục.
2025-10-10 04:30:06,658 - APP.analysis.image_processor - DEBUG - Đã lưu cache upload thành công.
2025-10-10 04:30:06,659 - APP.utils.threading_utils - DEBUG - Task song song '_execute_stage_3_logic' hoàn tất thành công.
2025-10-10 04:30:06,660 - APP.core.analysis_worker - WARNING - Một trong các giai đoạn song song đã thất bại. Dừng worker.
2025-10-10 04:30:06,661 - APP.core.analysis_worker - INFO - Worker đã thoát một cách có kiểm soát: Thoát sớm do lỗi ở Giai đoạn 2 hoặc 3.
2025-10-10 04:30:06,661 - APP.core.analysis_worker - DEBUG - GIAI ĐOẠN 6: Hoàn tất và dọn dẹp.
2025-10-10 04:30:06,662 - APP.core.analysis_worker - DEBUG - Kết thúc AnalysisWorker.run.
2025-10-10 04:30:06,662 - APP.utils.threading_utils - DEBUG - Task 'analysis.session.autorun-20251010-043002' (group=analysis.session) hoàn tất sau 4.03s
2025-10-10 04:30:06,691 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:30:06,693 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:30:06,766 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:06,767 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:06,767 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:06,768 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:06,768 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:06,769 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:06,795 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:30:06,796 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:30:06,916 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:30:06,917 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:30:06,918 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: _finalize_done
2025-10-10 04:30:06,919 - APP.ui.utils.ui_builder - DEBUG - Đã thay đổi trạng thái nút Start/Stop thành 'normal'. Các điều khiển khác không bị ảnh hưởng.
2025-10-10 04:30:06,919 - APP.ui.app_ui - DEBUG - Lên lịch chạy tự động tiếp theo sau 60000ms.
2025-10-10 04:30:06,920 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:30:06,920 - APP.core.analysis_controller - INFO - Kết thúc session autorun-20251010-043002: {'status': 'completed', 'early_exit': True}
2025-10-10 04:30:07,768 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:07,769 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:07,769 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:07,770 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:07,770 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:07,771 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:08,772 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:08,773 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:08,773 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:08,774 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:08,774 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:08,775 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:09,774 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:09,775 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:09,775 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:09,776 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:09,776 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:09,777 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:10,777 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:10,778 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:10,778 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:10,779 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:10,779 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:10,780 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:11,780 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:11,781 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:11,781 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:11,782 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:11,782 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:11,783 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:12,783 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:12,784 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:12,784 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:12,785 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:12,785 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:12,786 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:13,786 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:13,787 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:13,787 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:13,788 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:13,788 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:13,789 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:14,255 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:30:14,256 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:30:14,257 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:30:14,264 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:30:14,788 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:14,789 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:14,789 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:14,790 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:14,790 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:14,790 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:15,793 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:15,794 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:15,794 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:15,795 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:15,795 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:15,796 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:16,796 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:16,797 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:16,797 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:16,798 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:16,799 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:16,799 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:17,799 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:17,800 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:17,801 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:17,801 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:17,802 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:17,802 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:18,802 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:18,803 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:18,803 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:18,804 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:18,804 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:18,805 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:19,804 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:19,805 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:19,805 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:19,806 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:19,807 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:19,807 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:20,807 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:20,808 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:20,808 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:20,809 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:20,809 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:20,810 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:21,809 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:21,810 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:21,811 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:21,811 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:21,812 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:21,812 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:22,812 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:22,813 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:22,813 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:22,814 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:22,814 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:22,815 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:23,815 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:23,816 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:23,816 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:23,817 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:23,817 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:23,817 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:24,817 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:24,818 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:24,818 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:24,819 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:24,819 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:24,819 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:25,819 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:25,820 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:25,821 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:25,821 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:25,822 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:25,822 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:26,822 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:26,823 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:26,823 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:26,824 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:26,824 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:26,825 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:27,825 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:27,826 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:27,826 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:27,827 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:27,827 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:27,828 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:28,829 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:28,829 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:28,830 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:28,830 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:28,831 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:28,832 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:29,259 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:30:29,260 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:30:29,261 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:30:29,284 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:30:29,831 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:29,832 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:29,832 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:29,833 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:29,833 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:29,833 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:30,833 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:30,835 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:30,836 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:30,836 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:30,837 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:30,837 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:31,837 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:31,838 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:31,838 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:31,839 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:31,839 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:31,840 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:32,839 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:32,840 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:32,841 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:32,842 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:32,842 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:32,842 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:33,842 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:33,844 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:33,844 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:33,844 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:33,845 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:33,846 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:34,845 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:34,846 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:34,846 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:34,847 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:34,847 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:34,848 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:35,849 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:35,849 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:35,850 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:35,850 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:35,851 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:35,851 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:36,851 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:36,852 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:36,852 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:36,853 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:36,854 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:36,854 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:37,856 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:37,857 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:37,857 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:37,860 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:37,860 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:37,861 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:38,864 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:38,867 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:38,867 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:38,869 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:38,870 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:38,871 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:39,879 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:39,884 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:39,884 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:39,900 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:39,904 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:39,907 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:40,900 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:40,906 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:40,906 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:40,908 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:40,909 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:40,909 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:41,909 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:41,909 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:41,910 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:41,911 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:41,911 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:41,911 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:42,911 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:42,912 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:42,913 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:42,914 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:42,914 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:42,914 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:43,914 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:43,914 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:43,915 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:43,916 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:43,916 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:43,916 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:44,264 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:30:44,270 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:30:44,273 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:30:44,329 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:30:44,915 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:44,916 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:44,916 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:44,917 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:44,917 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:44,918 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:45,918 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:45,918 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:45,919 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:45,919 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:45,920 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:45,921 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:46,931 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:46,956 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:46,956 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:46,972 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:46,973 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:46,986 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:47,974 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:47,975 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:47,975 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:47,976 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:47,977 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:47,978 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:48,977 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:48,978 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:48,978 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:48,979 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:48,979 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:48,980 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:49,979 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:49,980 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:49,980 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:49,981 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:49,981 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:49,982 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:50,985 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:50,986 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:50,986 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:50,987 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:50,988 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:50,988 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:51,989 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:51,989 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:51,990 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:51,990 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:51,991 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:51,991 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:52,991 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:52,992 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:52,992 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:52,993 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:52,993 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:52,994 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:53,995 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:53,996 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:53,997 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:53,997 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:53,998 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:53,998 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:54,998 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:54,998 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:54,999 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:54,999 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:55,000 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:55,000 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:56,000 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:56,002 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:56,002 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:56,003 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:56,003 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:56,004 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:57,004 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:57,005 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:57,005 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:57,006 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:57,006 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:57,007 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:58,007 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:58,007 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:58,008 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:58,008 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:58,009 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:58,009 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:59,009 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:59,009 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:30:59,010 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:59,011 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:30:59,011 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:30:59,011 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:30:59,276 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:30:59,276 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:30:59,278 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:30:59,320 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:31:00,011 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:00,013 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:00,013 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:00,014 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:00,014 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:00,015 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:01,014 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:01,015 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:01,015 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:01,016 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:01,017 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:01,017 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:02,018 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:02,019 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:02,019 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:02,020 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:02,020 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:02,021 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:03,020 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:03,021 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:03,021 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:03,022 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:03,023 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:03,023 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:04,022 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:04,023 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:04,024 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:04,024 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:04,025 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:04,025 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:05,026 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:05,026 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:05,027 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:05,027 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:05,028 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:05,028 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:06,028 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:06,028 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:06,029 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:06,029 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:06,029 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:06,030 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:06,921 - APP.ui.app_ui - INFO - Autorun tick: Kích hoạt worker kiểm tra.
2025-10-10 04:31:06,921 - APP.utils.threading_utils - DEBUG - Gửi task 'ui.autorun.guard' vào nhóm 'ui.autorun' (metadata={'component': 'analysis', 'operation': 'autorun_guard'})
2025-10-10 04:31:06,922 - APP.ui.controllers.io_controller - INFO - Đã gửi worker I/O ui.autorun.guard vào group ui.autorun (metadata={'component': 'analysis', 'operation': 'autorun_guard'})
2025-10-10 04:31:06,922 - APP.ui.app_ui - DEBUG - Autorun tick worker: Bắt đầu kiểm tra điều kiện.
2025-10-10 04:31:06,925 - APP.ui.app_ui - INFO - Autorun tick worker: Điều kiện hợp lệ, yêu cầu bắt đầu phân tích trên luồng UI.
2025-10-10 04:31:06,925 - APP.utils.threading_utils - DEBUG - Task 'ui.autorun.guard' (group=ui.autorun) hoàn tất sau 0.00s
2025-10-10 04:31:06,995 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: _request_autorun_start
2025-10-10 04:31:06,998 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:31:06,999 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:31:06,999 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:31:07,000 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:31:07,000 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:31:07,001 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:31:07,002 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:31:07,003 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:31:07,691 - APP.services.te_service - INFO - Đăng nhập thành công vào Trading Economics API.
2025-10-10 04:31:07,692 - APP.services.news_service - DEBUG - Cấu hình NewsService đã được cập nhật.
2025-10-10 04:31:07,692 - APP.utils.threading_utils - DEBUG - Gửi task 'news.refresh.autorun' vào nhóm 'news.polling' (metadata={'component': 'news', 'priority': 'autorun', 'timeout_sec': 20})
2025-10-10 04:31:07,693 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.session.autorun-20251010-043107' vào nhóm 'analysis.session' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-043107', 'priority': 'autorun'})
2025-10-10 04:31:07,693 - APP.utils.threading_utils - INFO - Task 'news.refresh.autorun' (group=news.polling) bị hủy sau 0.00s
2025-10-10 04:31:07,694 - APP.core.analysis_controller - INFO - Đã submit phiên phân tích autorun-20251010-043107 (priority=autorun)
2025-10-10 04:31:07,694 - APP.core.analysis_worker - DEBUG - Bắt đầu AnalysisWorker.run với model: models/gemini-2.5-flash
2025-10-10 04:31:07,694 - APP.ui.controllers.news_controller - DEBUG - Future news bị cancel, không cập nhật UI.
2025-10-10 04:31:07,695 - APP.ui.app_ui - INFO - Autorun autorun-20251010-043107 bắt đầu ngay lập tức.
2025-10-10 04:31:07,695 - APP.core.analysis_worker - DEBUG - GIAI ĐOẠN 1: Khởi tạo và kiểm tra đầu vào.
2025-10-10 04:31:07,696 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:31:07,696 - APP.ui.utils.ui_builder - DEBUG - Đã thay đổi trạng thái nút Start/Stop thành 'disabled'. Các điều khiển khác không bị ảnh hưởng.
2025-10-10 04:31:07,697 - APP.ui.app_ui - INFO - Phiên autorun-20251010-043107 bắt đầu (priority=autorun, source=autorun).
2025-10-10 04:31:07,698 - APP.services.gemini_service - INFO - Đã khởi tạo model 'models/gemini-2.5-flash' thành công.
2025-10-10 04:31:07,700 - APP.core.analysis_worker - DEBUG - BẮT ĐẦU GIAI ĐOẠN 2: Xây dựng ngữ cảnh và kiểm tra điều kiện.
2025-10-10 04:31:07,700 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:07,701 - APP.core.trading.conditions - DEBUG - Bắt đầu kiểm tra các điều kiện NO-RUN.
2025-10-10 04:31:07,705 - APP.core.analysis_worker - DEBUG - BẮT ĐẦU GIAI ĐOẠN 3: Chuẩn bị và upload ảnh (TaskGroup analysis.upload).
2025-10-10 04:31:07,706 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:07,706 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:07,709 - APP.analysis.image_processor - DEBUG - Đang thử tải cache upload.
2025-10-10 04:31:07,710 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:07,711 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:07,713 - APP.services.mt5_service - DEBUG - Bắt đầu get_active_killzone cho 2025-10-10 04:31:07.702973 với timezone Asia/Ho_Chi_Minh
2025-10-10 04:31:07,714 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:07,717 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: 2025-10-10 04:31:07.702973+07:00, Target TZ: None
2025-10-10 04:31:07,718 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 04:31:07.702973+07:00
2025-10-10 04:31:07,719 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 04:31:07.702973+07:00 trong DST: True
2025-10-10 04:31:07,721 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:31:07,722 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:31:07,723 - APP.services.mt5_service - DEBUG - Không trong killzone nào.
2025-10-10 04:31:07,724 - APP.core.trading.conditions - INFO - Điều kiện NO-RUN được kích hoạt: Không chạy ngoài các Kill Zone đã định nghĩa.
2025-10-10 04:31:07,724 - APP.core.trading.conditions - INFO - Thoát sớm. Giai đoạn: no-run, Lý do: Không chạy ngoài các Kill Zone đã định nghĩa.
2025-10-10 04:31:07,725 - APP.persistence.log_handler - DEBUG - Đang chuẩn bị ghi log giao dịch. Giai đoạn: no-run, Thư mục con: None
2025-10-10 04:31:07,741 - APP.analysis.image_processor - DEBUG - Đã tải cache upload với 4 mục.
2025-10-10 04:31:07,751 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-043107.0' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-043107', 'index': 0})
2025-10-10 04:31:07,753 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-043107.1' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-043107', 'index': 1})
2025-10-10 04:31:07,754 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_H1.png: 17762:1760070624:abd19cb2a3047fe4
2025-10-10 04:31:07,755 - APP.persistence.log_handler - DEBUG - Đã ghi log giao dịch thành công vào trade_log_20251010.jsonl.
2025-10-10 04:31:07,756 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-043107.2' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-043107', 'index': 2})
2025-10-10 04:31:07,757 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M1.png: 16903:1760070609:33f60c39a33e549d
2025-10-10 04:31:07,759 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-043107.3' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-043107', 'index': 3})
2025-10-10 04:31:07,760 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M15.png: 17194:1760070619:8191c84031dd063f
2025-10-10 04:31:07,767 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_H1.png, nhưng chữ ký không khớp.
2025-10-10 04:31:07,767 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M5.png: 16558:1760070614:7f98f115530678ca
2025-10-10 04:31:07,769 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_M1.png, nhưng chữ ký không khớp.
2025-10-10 04:31:07,769 - APP.persistence.log_handler - DEBUG - Kết thúc hàm log_trade.
2025-10-10 04:31:07,770 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_M15.png, nhưng chữ ký không khớp.
2025-10-10 04:31:07,772 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_H1.png, Tối ưu hóa: False
2025-10-10 04:31:07,773 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_M5.png, nhưng chữ ký không khớp.
2025-10-10 04:31:07,774 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_M1.png, Tối ưu hóa: False
2025-10-10 04:31:07,775 - APP.services.telegram_service - DEBUG - Đang khởi tạo TelegramClient từ cấu hình.
2025-10-10 04:31:07,775 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_M15.png, Tối ưu hóa: False
2025-10-10 04:31:07,776 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:31:07,776 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_M5.png, Tối ưu hóa: False
2025-10-10 04:31:07,777 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:31:07,777 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_M1.png' lên Gemini File API...
2025-10-10 04:31:07,778 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:31:07,778 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_M15.png' lên Gemini File API...
2025-10-10 04:31:07,779 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:31:07,780 - APP.services.telegram_service - INFO - Đang gửi tin nhắn đến chat_id: 90773...
2025-10-10 04:31:07,798 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_H1.png' lên Gemini File API...
2025-10-10 04:31:07,820 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:31:07,824 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_M5.png' lên Gemini File API...
2025-10-10 04:31:07,825 - APP.services.telegram_service - DEBUG - Đang tạo urllib opener với SSL context.
2025-10-10 04:31:07,911 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:31:08,123 - APP.services.telegram_service - DEBUG - Bắt đầu tạo SSL context. cafile: None, skip_verify: True
2025-10-10 04:31:08,341 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:31:08,814 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:08,964 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:08,964 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:09,044 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:09,044 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:31:09,119 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:09,125 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:09,320 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:31:09,527 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:31:09,649 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:31:09,766 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:31:09,878 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:31:10,001 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:31:10,047 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:10,072 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:10,072 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:10,181 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:10,208 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:10,209 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:10,664 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:31:10,675 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:31:10,728 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:31:10,871 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:31:10,917 - APP.services.telegram_service - DEBUG - Đã tạo SSL context với certifi.
2025-10-10 04:31:10,934 - APP.services.telegram_service - WARNING - !!! BỎ QUA XÁC MINH SSL (INSECURE) !!!
2025-10-10 04:31:10,948 - APP.services.telegram_service - DEBUG - Tạo SSL context thành công.
2025-10-10 04:31:11,021 - APP.services.telegram_service - DEBUG - Đang thực hiện API call (POST) đến method 'sendMessage'.
2025-10-10 04:31:11,190 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:11,210 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:11,210 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:11,213 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:11,214 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:11,214 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:11,744 - APP.services.telegram_service - DEBUG - Cuộc gọi API (POST) thành công. OK=True.
2025-10-10 04:31:11,746 - APP.core.analysis_worker - INFO - Giai đoạn 2 thoát sớm: Điều kiện No-Run: Không chạy ngoài các Kill Zone đã định nghĩa.
2025-10-10 04:31:11,770 - APP.utils.threading_utils - DEBUG - Task song song '_execute_stage_2_logic' hoàn tất thành công.
2025-10-10 04:31:12,220 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:12,225 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:12,226 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:12,233 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:12,280 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:12,282 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:13,062 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/d1yxhi0ga72q. Đang chờ trạng thái ACTIVE.
2025-10-10 04:31:13,071 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/bxz5zylrdaci. Đang chờ trạng thái ACTIVE.
2025-10-10 04:31:13,153 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/vvlt0xqpd2bw. Đang chờ trạng thái ACTIVE.
2025-10-10 04:31:13,239 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:13,239 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:13,240 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:13,240 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:13,241 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:13,241 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:13,370 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/btxlsojm05gb. Đang chờ trạng thái ACTIVE.
2025-10-10 04:31:13,709 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_H1.png': ACTIVE. Thời gian đã trôi qua: 0.6s
2025-10-10 04:31:13,710 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_H1.png'.
2025-10-10 04:31:13,711 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_H1.png: 17762:1760070624:abd19cb2a3047fe4
2025-10-10 04:31:13,711 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_H1.png trong cache với tên từ xa files/d1yxhi0ga72q.
2025-10-10 04:31:13,712 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-043107.0' (group=analysis.upload) hoàn tất sau 5.96s
2025-10-10 04:31:13,725 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_M1.png': ACTIVE. Thời gian đã trôi qua: 0.7s
2025-10-10 04:31:13,726 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_M1.png'.
2025-10-10 04:31:13,727 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M1.png: 16903:1760070609:33f60c39a33e549d
2025-10-10 04:31:13,728 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_M1.png trong cache với tên từ xa files/bxz5zylrdaci.
2025-10-10 04:31:13,728 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-043107.1' (group=analysis.upload) hoàn tất sau 5.97s
2025-10-10 04:31:13,744 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:31:13,744 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:31:13,817 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_M5.png': ACTIVE. Thời gian đã trôi qua: 0.7s
2025-10-10 04:31:13,818 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_M5.png'.
2025-10-10 04:31:13,819 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M5.png: 16558:1760070614:7f98f115530678ca
2025-10-10 04:31:13,819 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_M5.png trong cache với tên từ xa files/vvlt0xqpd2bw.
2025-10-10 04:31:13,820 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-043107.3' (group=analysis.upload) hoàn tất sau 6.05s
2025-10-10 04:31:13,845 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:31:13,846 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:31:14,017 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_M15.png': ACTIVE. Thời gian đã trôi qua: 0.6s
2025-10-10 04:31:14,018 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_M15.png'.
2025-10-10 04:31:14,019 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M15.png: 17194:1760070619:8191c84031dd063f
2025-10-10 04:31:14,020 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_M15.png trong cache với tên từ xa files/btxlsojm05gb.
2025-10-10 04:31:14,020 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-043107.2' (group=analysis.upload) hoàn tất sau 6.26s
2025-10-10 04:31:14,021 - APP.analysis.image_processor - DEBUG - Đang lưu cache upload với 4 mục.
2025-10-10 04:31:14,022 - APP.analysis.image_processor - DEBUG - Đã lưu cache upload thành công.
2025-10-10 04:31:14,022 - APP.utils.threading_utils - DEBUG - Task song song '_execute_stage_3_logic' hoàn tất thành công.
2025-10-10 04:31:14,024 - APP.core.analysis_worker - WARNING - Một trong các giai đoạn song song đã thất bại. Dừng worker.
2025-10-10 04:31:14,024 - APP.core.analysis_worker - INFO - Worker đã thoát một cách có kiểm soát: Thoát sớm do lỗi ở Giai đoạn 2 hoặc 3.
2025-10-10 04:31:14,025 - APP.core.analysis_worker - DEBUG - GIAI ĐOẠN 6: Hoàn tất và dọn dẹp.
2025-10-10 04:31:14,025 - APP.core.analysis_worker - DEBUG - Kết thúc AnalysisWorker.run.
2025-10-10 04:31:14,025 - APP.utils.threading_utils - DEBUG - Task 'analysis.session.autorun-20251010-043107' (group=analysis.session) hoàn tất sau 6.33s
2025-10-10 04:31:14,048 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:31:14,049 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:31:14,150 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:31:14,153 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:31:14,251 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:14,254 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:14,254 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:14,258 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:14,260 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:14,261 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:14,262 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:31:14,262 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:31:14,263 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: _finalize_done
2025-10-10 04:31:14,264 - APP.ui.utils.ui_builder - DEBUG - Đã thay đổi trạng thái nút Start/Stop thành 'normal'. Các điều khiển khác không bị ảnh hưởng.
2025-10-10 04:31:14,264 - APP.ui.app_ui - DEBUG - Lên lịch chạy tự động tiếp theo sau 60000ms.
2025-10-10 04:31:14,267 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:31:14,268 - APP.core.analysis_controller - INFO - Kết thúc session autorun-20251010-043107: {'status': 'completed', 'early_exit': True}
2025-10-10 04:31:14,287 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:31:14,294 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:31:14,298 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:31:14,371 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:31:15,263 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:15,321 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:15,321 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:15,345 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:15,346 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:15,364 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:16,346 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:16,347 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:16,347 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:16,348 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:16,348 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:16,349 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:17,349 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:17,350 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:17,350 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:17,351 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:17,351 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:17,352 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:18,351 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:18,352 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:18,353 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:18,353 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:18,354 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:18,354 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:19,354 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:19,355 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:19,355 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:19,356 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:19,356 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:19,357 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:20,356 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:20,357 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:20,357 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:20,358 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:20,358 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:20,359 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:21,360 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:21,365 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:21,365 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:21,367 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:21,368 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:21,374 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:22,367 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:22,367 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:22,368 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:22,369 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:22,369 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:22,370 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:23,402 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:23,434 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:23,434 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:23,439 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:23,450 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:23,454 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:24,439 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:24,441 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:24,441 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:24,442 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:24,443 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:24,443 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:25,443 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:25,443 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:25,444 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:25,444 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:25,445 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:25,445 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:26,445 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:26,446 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:26,446 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:26,447 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:26,448 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:26,448 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:27,449 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:27,450 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:27,450 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:27,451 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:27,451 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:27,452 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:28,452 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:28,452 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:28,453 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:28,453 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:28,454 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:28,454 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:29,311 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:31:29,312 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:31:29,313 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:31:29,381 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:31:29,454 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:29,455 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:29,455 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:29,458 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:29,459 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:29,459 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:30,459 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:30,459 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:30,460 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:30,460 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:30,461 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:30,461 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:31,462 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:31,463 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:31,464 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:31,464 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:31,465 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:31,465 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:32,539 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:32,633 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:32,633 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:32,636 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:32,638 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:32,728 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:33,635 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:33,636 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:33,637 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:33,637 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:33,638 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:33,638 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:34,638 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:34,639 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:34,639 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:34,640 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:34,640 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:34,641 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:35,640 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:35,641 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:35,641 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:35,642 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:35,642 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:35,644 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:36,643 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:36,645 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:36,646 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:36,647 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:36,647 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:36,647 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:37,650 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:37,650 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:37,651 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:37,652 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:37,652 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:37,652 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:38,653 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:38,655 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:38,655 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:38,657 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:38,657 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:38,658 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:39,658 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:39,659 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:39,659 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:39,659 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:39,660 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:39,661 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:40,660 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:40,661 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:40,661 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:40,662 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:40,662 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:40,663 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:41,663 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:41,664 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:41,664 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:41,665 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:41,665 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:41,666 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:42,665 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:42,666 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:42,667 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:42,667 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:42,668 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:42,668 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:43,668 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:43,670 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:43,670 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:43,671 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:43,671 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:43,671 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:44,314 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:31:44,315 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:31:44,316 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:31:44,347 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:31:44,671 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:44,672 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:44,672 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:44,673 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:44,673 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:44,674 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:45,673 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:45,674 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:45,674 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:45,677 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:45,677 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:45,678 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:46,677 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:46,678 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:46,678 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:46,679 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:46,680 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:46,680 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:47,680 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:47,681 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:47,681 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:47,682 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:47,682 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:47,683 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:48,683 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:48,684 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:48,684 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:48,685 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:48,685 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:48,686 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:49,685 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:49,686 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:49,686 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:49,687 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:49,687 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:49,688 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:50,689 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:50,690 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:50,691 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:50,691 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:50,691 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:50,692 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:51,692 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:51,693 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:51,693 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:51,694 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:51,694 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:51,695 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:52,695 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:52,696 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:52,696 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:52,697 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:52,697 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:52,698 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:53,698 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:53,699 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:53,699 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:53,700 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:53,700 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:53,700 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:54,701 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:54,701 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:54,702 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:54,702 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:54,703 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:54,703 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:55,703 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:55,704 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:55,704 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:55,705 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:55,706 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:55,706 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:56,705 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:56,706 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:56,706 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:56,708 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:56,708 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:56,709 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:57,707 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:57,709 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:57,709 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:57,710 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:57,710 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:57,711 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:58,710 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:58,711 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:58,711 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:58,712 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:58,712 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:58,713 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:31:59,317 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:31:59,318 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:31:59,319 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:31:59,355 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:31:59,714 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:59,715 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:31:59,715 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:59,716 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:31:59,716 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:31:59,717 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:00,716 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:00,717 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:00,717 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:00,718 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:00,718 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:00,719 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:01,718 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:01,719 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:01,719 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:01,720 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:01,721 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:01,721 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:02,721 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:02,722 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:02,722 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:02,724 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:02,724 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:02,725 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:03,726 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:03,727 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:03,728 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:03,728 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:03,729 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:03,729 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:04,729 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:04,730 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:04,731 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:04,731 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:04,732 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:04,732 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:05,733 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:05,734 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:05,734 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:05,735 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:05,735 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:05,736 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:06,735 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:06,736 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:06,736 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:06,737 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:06,737 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:06,738 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:07,740 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:07,741 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:07,742 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:07,742 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:07,743 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:07,743 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:08,743 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:08,744 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:08,744 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:08,745 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:08,745 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:08,745 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:09,745 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:09,746 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:09,746 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:09,747 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:09,747 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:09,747 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:10,747 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:10,748 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:10,749 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:10,749 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:10,750 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:10,750 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:11,749 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:11,750 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:11,750 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:11,751 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:11,751 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:11,752 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:12,751 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:12,752 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:12,752 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:12,753 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:12,753 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:12,754 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:13,753 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:13,754 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:13,755 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:13,755 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:13,756 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:13,756 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:14,267 - APP.ui.app_ui - INFO - Autorun tick: Kích hoạt worker kiểm tra.
2025-10-10 04:32:14,268 - APP.utils.threading_utils - DEBUG - Gửi task 'ui.autorun.guard' vào nhóm 'ui.autorun' (metadata={'component': 'analysis', 'operation': 'autorun_guard'})
2025-10-10 04:32:14,268 - APP.ui.controllers.io_controller - INFO - Đã gửi worker I/O ui.autorun.guard vào group ui.autorun (metadata={'component': 'analysis', 'operation': 'autorun_guard'})
2025-10-10 04:32:14,269 - APP.ui.app_ui - DEBUG - Autorun tick worker: Bắt đầu kiểm tra điều kiện.
2025-10-10 04:32:14,271 - APP.ui.app_ui - INFO - Autorun tick worker: Điều kiện hợp lệ, yêu cầu bắt đầu phân tích trên luồng UI.
2025-10-10 04:32:14,271 - APP.utils.threading_utils - DEBUG - Task 'ui.autorun.guard' (group=ui.autorun) hoàn tất sau 0.00s
2025-10-10 04:32:14,345 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:32:14,347 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:32:14,349 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:32:14,353 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: _request_autorun_start
2025-10-10 04:32:14,354 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:32:14,355 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:32:14,356 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:32:14,357 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:32:14,357 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:32:14,358 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:32:14,358 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:32:14,359 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:32:14,901 - APP.services.te_service - INFO - Đăng nhập thành công vào Trading Economics API.
2025-10-10 04:32:14,901 - APP.services.news_service - DEBUG - Cấu hình NewsService đã được cập nhật.
2025-10-10 04:32:14,902 - APP.utils.threading_utils - DEBUG - Gửi task 'news.refresh.autorun' vào nhóm 'news.polling' (metadata={'component': 'news', 'priority': 'autorun', 'timeout_sec': 20})
2025-10-10 04:32:14,903 - APP.utils.threading_utils - INFO - Task 'news.refresh.autorun' (group=news.polling) bị hủy sau 0.00s
2025-10-10 04:32:14,903 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.session.autorun-20251010-043214' vào nhóm 'analysis.session' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-043214', 'priority': 'autorun'})
2025-10-10 04:32:14,903 - APP.ui.controllers.news_controller - DEBUG - Future news bị cancel, không cập nhật UI.
2025-10-10 04:32:14,904 - APP.core.analysis_controller - INFO - Đã submit phiên phân tích autorun-20251010-043214 (priority=autorun)
2025-10-10 04:32:14,904 - APP.core.analysis_worker - DEBUG - Bắt đầu AnalysisWorker.run với model: models/gemini-2.5-flash
2025-10-10 04:32:14,905 - APP.ui.app_ui - INFO - Autorun autorun-20251010-043214 bắt đầu ngay lập tức.
2025-10-10 04:32:14,906 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:32:14,907 - APP.core.analysis_worker - DEBUG - GIAI ĐOẠN 1: Khởi tạo và kiểm tra đầu vào.
2025-10-10 04:32:14,909 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:32:14,909 - APP.ui.utils.ui_builder - DEBUG - Đã thay đổi trạng thái nút Start/Stop thành 'disabled'. Các điều khiển khác không bị ảnh hưởng.
2025-10-10 04:32:14,910 - APP.ui.app_ui - INFO - Phiên autorun-20251010-043214 bắt đầu (priority=autorun, source=autorun).
2025-10-10 04:32:14,911 - APP.services.gemini_service - INFO - Đã khởi tạo model 'models/gemini-2.5-flash' thành công.
2025-10-10 04:32:14,911 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:14,912 - APP.core.analysis_worker - DEBUG - BẮT ĐẦU GIAI ĐOẠN 2: Xây dựng ngữ cảnh và kiểm tra điều kiện.
2025-10-10 04:32:14,914 - APP.core.trading.conditions - DEBUG - Bắt đầu kiểm tra các điều kiện NO-RUN.
2025-10-10 04:32:14,916 - APP.core.analysis_worker - DEBUG - BẮT ĐẦU GIAI ĐOẠN 3: Chuẩn bị và upload ảnh (TaskGroup analysis.upload).
2025-10-10 04:32:14,916 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:14,916 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:14,917 - APP.analysis.image_processor - DEBUG - Đang thử tải cache upload.
2025-10-10 04:32:14,918 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:14,918 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:14,923 - APP.services.mt5_service - DEBUG - Bắt đầu get_active_killzone cho 2025-10-10 04:32:14.915146 với timezone Asia/Ho_Chi_Minh
2025-10-10 04:32:14,923 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:14,924 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: 2025-10-10 04:32:14.915146+07:00, Target TZ: None
2025-10-10 04:32:14,926 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 04:32:14.915146+07:00
2025-10-10 04:32:14,927 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 04:32:14.915146+07:00 trong DST: True
2025-10-10 04:32:14,927 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:32:14,934 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:32:14,934 - APP.services.mt5_service - DEBUG - Không trong killzone nào.
2025-10-10 04:32:14,935 - APP.core.trading.conditions - INFO - Điều kiện NO-RUN được kích hoạt: Không chạy ngoài các Kill Zone đã định nghĩa.
2025-10-10 04:32:14,935 - APP.core.trading.conditions - INFO - Thoát sớm. Giai đoạn: no-run, Lý do: Không chạy ngoài các Kill Zone đã định nghĩa.
2025-10-10 04:32:14,936 - APP.persistence.log_handler - DEBUG - Đang chuẩn bị ghi log giao dịch. Giai đoạn: no-run, Thư mục con: None
2025-10-10 04:32:14,980 - APP.analysis.image_processor - DEBUG - Đã tải cache upload với 4 mục.
2025-10-10 04:32:14,981 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-043214.0' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-043214', 'index': 0})
2025-10-10 04:32:14,982 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-043214.1' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-043214', 'index': 1})
2025-10-10 04:32:14,983 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_H1.png: 17804:1760070704:323bbfdbfae46a45
2025-10-10 04:32:14,984 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-043214.2' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-043214', 'index': 2})
2025-10-10 04:32:14,984 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_H1.png, nhưng chữ ký không khớp.
2025-10-10 04:32:14,985 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M1.png: 16655:1760070689:5e0aa74c53008171
2025-10-10 04:32:14,985 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-043214.3' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-043214', 'index': 3})
2025-10-10 04:32:14,986 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M15.png: 17238:1760070699:a0d213262134b8b5
2025-10-10 04:32:14,987 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_H1.png, Tối ưu hóa: False
2025-10-10 04:32:14,987 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_M1.png, nhưng chữ ký không khớp.
2025-10-10 04:32:14,988 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_M15.png, nhưng chữ ký không khớp.
2025-10-10 04:32:14,988 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:32:14,988 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_M1.png, Tối ưu hóa: False
2025-10-10 04:32:14,989 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_M15.png, Tối ưu hóa: False
2025-10-10 04:32:14,989 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M5.png: 16931:1760070694:3a15e473868416a4
2025-10-10 04:32:14,993 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_H1.png' lên Gemini File API...
2025-10-10 04:32:14,995 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:32:14,996 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_M1.png' lên Gemini File API...
2025-10-10 04:32:14,996 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_M5.png, nhưng chữ ký không khớp.
2025-10-10 04:32:15,024 - APP.persistence.log_handler - DEBUG - Đã ghi log giao dịch thành công vào trade_log_20251010.jsonl.
2025-10-10 04:32:15,024 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:32:15,026 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:32:15,027 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_M5.png, Tối ưu hóa: False
2025-10-10 04:32:15,027 - APP.persistence.log_handler - DEBUG - Kết thúc hàm log_trade.
2025-10-10 04:32:15,030 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:32:15,030 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_M15.png' lên Gemini File API...
2025-10-10 04:32:15,030 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:32:15,031 - APP.services.telegram_service - DEBUG - Đang khởi tạo TelegramClient từ cấu hình.
2025-10-10 04:32:15,032 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:32:15,033 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_M5.png' lên Gemini File API...
2025-10-10 04:32:15,037 - APP.services.telegram_service - INFO - Đang gửi tin nhắn đến chat_id: 90773...
2025-10-10 04:32:15,038 - APP.services.telegram_service - DEBUG - Đang tạo urllib opener với SSL context.
2025-10-10 04:32:15,039 - APP.services.telegram_service - DEBUG - Bắt đầu tạo SSL context. cafile: None, skip_verify: True
2025-10-10 04:32:15,222 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:32:15,357 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:32:15,500 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:32:15,614 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:32:15,719 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:32:15,834 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:32:15,926 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:15,957 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:15,958 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:16,003 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:16,004 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:32:16,057 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:16,058 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:16,839 - APP.services.telegram_service - DEBUG - Đã tạo SSL context với certifi.
2025-10-10 04:32:16,847 - APP.services.telegram_service - WARNING - !!! BỎ QUA XÁC MINH SSL (INSECURE) !!!
2025-10-10 04:32:16,870 - APP.services.telegram_service - DEBUG - Tạo SSL context thành công.
2025-10-10 04:32:16,882 - APP.services.telegram_service - DEBUG - Đang thực hiện API call (POST) đến method 'sendMessage'.
2025-10-10 04:32:16,911 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:32:16,941 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:32:17,004 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:32:17,028 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:32:17,028 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:17,044 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:17,044 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:17,051 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:17,107 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:17,150 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:17,640 - APP.services.telegram_service - DEBUG - Cuộc gọi API (POST) thành công. OK=True.
2025-10-10 04:32:17,643 - APP.core.analysis_worker - INFO - Giai đoạn 2 thoát sớm: Điều kiện No-Run: Không chạy ngoài các Kill Zone đã định nghĩa.
2025-10-10 04:32:17,644 - APP.utils.threading_utils - DEBUG - Task song song '_execute_stage_2_logic' hoàn tất thành công.
2025-10-10 04:32:18,058 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:18,063 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:18,063 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:18,149 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:18,150 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:18,151 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:19,153 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:19,154 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:19,154 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:19,155 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:19,155 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:19,156 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:19,222 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/3go263j3ukty. Đang chờ trạng thái ACTIVE.
2025-10-10 04:32:19,234 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/bubns0lyjq8l. Đang chờ trạng thái ACTIVE.
2025-10-10 04:32:19,419 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/55znkcj9f73d. Đang chờ trạng thái ACTIVE.
2025-10-10 04:32:19,500 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/nk70jxrluxe9. Đang chờ trạng thái ACTIVE.
2025-10-10 04:32:19,871 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_M5.png': ACTIVE. Thời gian đã trôi qua: 0.6s
2025-10-10 04:32:19,871 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_M5.png'.
2025-10-10 04:32:19,872 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M5.png: 16931:1760070694:3a15e473868416a4
2025-10-10 04:32:19,873 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_M5.png trong cache với tên từ xa files/3go263j3ukty.
2025-10-10 04:32:19,873 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-043214.3' (group=analysis.upload) hoàn tất sau 4.89s
2025-10-10 04:32:19,898 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_M15.png': ACTIVE. Thời gian đã trôi qua: 0.7s
2025-10-10 04:32:19,908 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_M15.png'.
2025-10-10 04:32:19,910 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M15.png: 17238:1760070699:a0d213262134b8b5
2025-10-10 04:32:19,910 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_M15.png trong cache với tên từ xa files/bubns0lyjq8l.
2025-10-10 04:32:19,911 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-043214.2' (group=analysis.upload) hoàn tất sau 4.93s
2025-10-10 04:32:20,068 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_H1.png': ACTIVE. Thời gian đã trôi qua: 0.6s
2025-10-10 04:32:20,069 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_H1.png'.
2025-10-10 04:32:20,070 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_H1.png: 17804:1760070704:323bbfdbfae46a45
2025-10-10 04:32:20,070 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_H1.png trong cache với tên từ xa files/55znkcj9f73d.
2025-10-10 04:32:20,071 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-043214.0' (group=analysis.upload) hoàn tất sau 5.09s
2025-10-10 04:32:20,140 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_M1.png': ACTIVE. Thời gian đã trôi qua: 0.6s
2025-10-10 04:32:20,149 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_M1.png'.
2025-10-10 04:32:20,151 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M1.png: 16655:1760070689:5e0aa74c53008171
2025-10-10 04:32:20,151 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_M1.png trong cache với tên từ xa files/nk70jxrluxe9.
2025-10-10 04:32:20,152 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-043214.1' (group=analysis.upload) hoàn tất sau 5.17s
2025-10-10 04:32:20,152 - APP.analysis.image_processor - DEBUG - Đang lưu cache upload với 4 mục.
2025-10-10 04:32:20,154 - APP.analysis.image_processor - DEBUG - Đã lưu cache upload thành công.
2025-10-10 04:32:20,154 - APP.utils.threading_utils - DEBUG - Task song song '_execute_stage_3_logic' hoàn tất thành công.
2025-10-10 04:32:20,156 - APP.core.analysis_worker - WARNING - Một trong các giai đoạn song song đã thất bại. Dừng worker.
2025-10-10 04:32:20,156 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:20,157 - APP.core.analysis_worker - INFO - Worker đã thoát một cách có kiểm soát: Thoát sớm do lỗi ở Giai đoạn 2 hoặc 3.
2025-10-10 04:32:20,157 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:20,158 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:20,158 - APP.core.analysis_worker - DEBUG - GIAI ĐOẠN 6: Hoàn tất và dọn dẹp.
2025-10-10 04:32:20,159 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:20,160 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:20,160 - APP.core.analysis_worker - DEBUG - Kết thúc AnalysisWorker.run.
2025-10-10 04:32:20,161 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:20,162 - APP.utils.threading_utils - DEBUG - Task 'analysis.session.autorun-20251010-043214' (group=analysis.session) hoàn tất sau 5.26s
2025-10-10 04:32:20,168 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:32:20,168 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:32:20,269 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:32:20,270 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:32:20,371 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:32:20,371 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:32:20,472 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:32:20,472 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:32:20,573 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:32:20,574 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:32:20,575 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: _finalize_done
2025-10-10 04:32:20,575 - APP.ui.utils.ui_builder - DEBUG - Đã thay đổi trạng thái nút Start/Stop thành 'normal'. Các điều khiển khác không bị ảnh hưởng.
2025-10-10 04:32:20,576 - APP.ui.app_ui - DEBUG - Lên lịch chạy tự động tiếp theo sau 60000ms.
2025-10-10 04:32:20,576 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:32:20,576 - APP.core.analysis_controller - INFO - Kết thúc session autorun-20251010-043214: {'status': 'completed', 'early_exit': True}
2025-10-10 04:32:21,160 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:21,161 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:21,162 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:21,162 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:21,163 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:21,163 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:22,165 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:22,166 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:22,166 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:22,167 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:22,168 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:22,168 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:23,168 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:23,169 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:23,169 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:23,170 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:23,170 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:23,171 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:24,170 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:24,171 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:24,172 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:24,172 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:24,173 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:24,173 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:25,174 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:25,174 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:25,175 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:25,175 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:25,176 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:25,176 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:26,178 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:26,180 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:26,180 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:26,181 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:26,181 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:26,182 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:27,182 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:27,182 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:27,183 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:27,183 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:27,183 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:27,184 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:28,183 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:28,184 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:28,184 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:28,185 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:28,186 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:28,186 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:29,186 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:29,187 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:29,187 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:29,188 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:29,188 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:29,188 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:29,350 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:32:29,351 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:32:29,352 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:32:29,363 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:32:30,188 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:30,189 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:30,189 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:30,190 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:30,190 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:30,190 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:31,190 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:31,190 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:31,191 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:31,192 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:31,192 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:31,193 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:32,193 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:32,194 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:32,194 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:32,195 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:32,195 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:32,195 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:33,195 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:33,196 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:33,196 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:33,197 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:33,198 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:33,198 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:34,197 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:34,198 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:34,198 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:34,199 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:34,199 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:34,200 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:35,200 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:35,201 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:35,201 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:35,202 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:35,202 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:35,202 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:36,202 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:36,203 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:36,204 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:36,204 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:36,205 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:36,205 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:37,205 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:37,206 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:37,206 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:37,207 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:37,207 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:37,208 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:38,207 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:38,208 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:38,208 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:38,209 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:38,209 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:38,210 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:39,210 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:39,211 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:39,212 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:39,213 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:39,213 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:39,213 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:40,213 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:40,214 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:40,214 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:40,215 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:40,216 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:40,216 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:41,216 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:41,216 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:41,216 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:41,217 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:41,218 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:41,218 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:42,217 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:42,218 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:42,219 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:42,219 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:42,220 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:42,220 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:43,220 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:43,221 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:43,221 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:43,222 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:43,223 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:43,223 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:44,223 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:44,223 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:44,224 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:44,225 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:44,226 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:44,226 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:44,355 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:32:44,355 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:32:44,357 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:32:44,440 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:32:45,226 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:45,226 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:45,227 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:45,227 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:45,228 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:45,228 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:46,228 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:46,228 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:46,229 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:46,229 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:46,230 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:46,230 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:47,230 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:47,231 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:47,232 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:47,232 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:47,233 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:47,233 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:48,233 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:48,233 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:48,234 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:48,235 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:48,235 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:48,235 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:49,235 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:49,236 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:49,236 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:49,237 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:49,237 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:49,238 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:50,237 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:50,238 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:50,238 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:50,239 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:50,240 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:50,240 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:51,240 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:51,241 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:51,241 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:51,241 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:51,242 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:51,244 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:52,242 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:52,243 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:52,244 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:52,245 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:52,246 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:52,246 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:53,246 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:53,247 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:53,247 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:53,248 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:53,250 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:53,251 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:54,249 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:54,250 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:54,250 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:54,251 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:54,252 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:54,252 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:55,253 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:55,254 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:55,254 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:55,255 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:55,255 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:55,256 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:56,257 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:56,258 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:56,258 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:56,259 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:56,259 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:56,260 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:57,260 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:57,260 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:57,261 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:57,262 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:57,262 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:57,263 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:58,262 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:58,263 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:58,264 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:58,264 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:58,265 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:58,265 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:59,266 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:59,267 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:32:59,267 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:59,268 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:32:59,268 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:32:59,269 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:32:59,358 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:32:59,358 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:32:59,360 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:32:59,441 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:33:00,270 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:00,271 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:00,272 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:00,272 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:00,273 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:00,273 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:01,273 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:01,273 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:01,274 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:01,275 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:01,275 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:01,276 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:02,276 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:02,277 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:02,278 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:02,279 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:02,279 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:02,279 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:03,279 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:03,280 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:03,280 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:03,281 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:03,281 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:03,282 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:04,281 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:04,282 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:04,282 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:04,283 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:04,283 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:04,284 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:05,285 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:05,285 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:05,286 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:05,286 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:05,287 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:05,287 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:06,287 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:06,288 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:06,288 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:06,289 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:06,289 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:06,289 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:07,289 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:07,290 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:07,290 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:07,291 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:07,291 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:07,291 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:08,293 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:08,294 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:08,294 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:08,295 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:08,296 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:08,296 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:09,296 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:09,297 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:09,297 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:09,298 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:09,299 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:09,299 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:10,299 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:10,300 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:10,300 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:10,301 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:10,301 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:10,302 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:11,301 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:11,302 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:11,302 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:11,303 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:11,303 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:11,304 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:12,303 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:12,304 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:12,304 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:12,305 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:12,306 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:12,306 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:13,307 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:13,308 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:13,308 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:13,309 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:13,309 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:13,310 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:14,310 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:14,310 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:14,311 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:14,311 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:14,312 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:14,312 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:14,360 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:33:14,361 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:33:14,363 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:33:14,452 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:33:15,313 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:15,315 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:15,315 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:15,316 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:15,316 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:15,316 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:16,316 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:16,317 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:16,317 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:16,318 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:16,318 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:16,319 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:17,320 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:17,321 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:17,322 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:17,322 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:17,323 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:17,323 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:18,323 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:18,324 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:18,324 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:18,325 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:18,325 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:18,325 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:19,325 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:19,326 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:19,326 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:19,327 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:19,328 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:19,328 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:20,327 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:20,328 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:20,328 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:20,329 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:20,330 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:20,330 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:20,576 - APP.ui.app_ui - INFO - Autorun tick: Kích hoạt worker kiểm tra.
2025-10-10 04:33:20,577 - APP.utils.threading_utils - DEBUG - Gửi task 'ui.autorun.guard' vào nhóm 'ui.autorun' (metadata={'component': 'analysis', 'operation': 'autorun_guard'})
2025-10-10 04:33:20,577 - APP.ui.controllers.io_controller - INFO - Đã gửi worker I/O ui.autorun.guard vào group ui.autorun (metadata={'component': 'analysis', 'operation': 'autorun_guard'})
2025-10-10 04:33:20,577 - APP.ui.app_ui - DEBUG - Autorun tick worker: Bắt đầu kiểm tra điều kiện.
2025-10-10 04:33:20,579 - APP.ui.app_ui - INFO - Autorun tick worker: Điều kiện hợp lệ, yêu cầu bắt đầu phân tích trên luồng UI.
2025-10-10 04:33:20,580 - APP.utils.threading_utils - DEBUG - Task 'ui.autorun.guard' (group=ui.autorun) hoàn tất sau 0.00s
2025-10-10 04:33:20,593 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: _request_autorun_start
2025-10-10 04:33:20,610 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:33:20,612 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:33:20,612 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:33:20,613 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:33:20,613 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:33:20,614 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:33:20,614 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:33:20,615 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:33:21,132 - APP.services.te_service - INFO - Đăng nhập thành công vào Trading Economics API.
2025-10-10 04:33:21,132 - APP.services.news_service - DEBUG - Cấu hình NewsService đã được cập nhật.
2025-10-10 04:33:21,133 - APP.utils.threading_utils - DEBUG - Gửi task 'news.refresh.autorun' vào nhóm 'news.polling' (metadata={'component': 'news', 'priority': 'autorun', 'timeout_sec': 20})
2025-10-10 04:33:21,134 - APP.utils.threading_utils - INFO - Task 'news.refresh.autorun' (group=news.polling) bị hủy sau 0.00s
2025-10-10 04:33:21,134 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.session.autorun-20251010-043321' vào nhóm 'analysis.session' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-043321', 'priority': 'autorun'})
2025-10-10 04:33:21,134 - APP.ui.controllers.news_controller - DEBUG - Future news bị cancel, không cập nhật UI.
2025-10-10 04:33:21,135 - APP.core.analysis_controller - INFO - Đã submit phiên phân tích autorun-20251010-043321 (priority=autorun)
2025-10-10 04:33:21,135 - APP.core.analysis_worker - DEBUG - Bắt đầu AnalysisWorker.run với model: models/gemini-2.5-flash
2025-10-10 04:33:21,136 - APP.ui.app_ui - INFO - Autorun autorun-20251010-043321 bắt đầu ngay lập tức.
2025-10-10 04:33:21,136 - APP.core.analysis_worker - DEBUG - GIAI ĐOẠN 1: Khởi tạo và kiểm tra đầu vào.
2025-10-10 04:33:21,136 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:33:21,137 - APP.ui.utils.ui_builder - DEBUG - Đã thay đổi trạng thái nút Start/Stop thành 'disabled'. Các điều khiển khác không bị ảnh hưởng.
2025-10-10 04:33:21,138 - APP.ui.app_ui - INFO - Phiên autorun-20251010-043321 bắt đầu (priority=autorun, source=autorun).
2025-10-10 04:33:21,140 - APP.services.gemini_service - INFO - Đã khởi tạo model 'models/gemini-2.5-flash' thành công.
2025-10-10 04:33:21,175 - APP.core.analysis_worker - DEBUG - BẮT ĐẦU GIAI ĐOẠN 2: Xây dựng ngữ cảnh và kiểm tra điều kiện.
2025-10-10 04:33:21,176 - APP.core.analysis_worker - DEBUG - BẮT ĐẦU GIAI ĐOẠN 3: Chuẩn bị và upload ảnh (TaskGroup analysis.upload).
2025-10-10 04:33:21,176 - APP.core.trading.conditions - DEBUG - Bắt đầu kiểm tra các điều kiện NO-RUN.
2025-10-10 04:33:21,178 - APP.analysis.image_processor - DEBUG - Đang thử tải cache upload.
2025-10-10 04:33:21,188 - APP.services.mt5_service - DEBUG - Bắt đầu get_active_killzone cho 2025-10-10 04:33:21.179183 với timezone Asia/Ho_Chi_Minh
2025-10-10 04:33:21,212 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: 2025-10-10 04:33:21.179183+07:00, Target TZ: None
2025-10-10 04:33:21,246 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 04:33:21.179183+07:00
2025-10-10 04:33:21,271 - APP.analysis.image_processor - DEBUG - Đã tải cache upload với 4 mục.
2025-10-10 04:33:21,272 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 04:33:21.179183+07:00 trong DST: True
2025-10-10 04:33:21,272 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-043321.0' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-043321', 'index': 0})
2025-10-10 04:33:21,273 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:33:21,273 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-043321.1' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-043321', 'index': 1})
2025-10-10 04:33:21,273 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:33:21,274 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-043321.2' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-043321', 'index': 2})
2025-10-10 04:33:21,275 - APP.services.mt5_service - DEBUG - Không trong killzone nào.
2025-10-10 04:33:21,275 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_H1.png: 17699:1760070784:18766ca313a53d41
2025-10-10 04:33:21,276 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M1.png: 16625:1760070769:afa9caac90290b7e
2025-10-10 04:33:21,277 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-043321.3' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-043321', 'index': 3})
2025-10-10 04:33:21,278 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M15.png: 17217:1760070779:51403658126cad5e
2025-10-10 04:33:21,294 - APP.core.trading.conditions - INFO - Điều kiện NO-RUN được kích hoạt: Không chạy ngoài các Kill Zone đã định nghĩa.
2025-10-10 04:33:21,302 - APP.core.trading.conditions - INFO - Thoát sớm. Giai đoạn: no-run, Lý do: Không chạy ngoài các Kill Zone đã định nghĩa.
2025-10-10 04:33:21,304 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_M1.png, nhưng chữ ký không khớp.
2025-10-10 04:33:21,306 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_M15.png, nhưng chữ ký không khớp.
2025-10-10 04:33:21,306 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_H1.png, nhưng chữ ký không khớp.
2025-10-10 04:33:21,306 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M5.png: 16856:1760070774:3012fbd8325b7b17
2025-10-10 04:33:21,307 - APP.persistence.log_handler - DEBUG - Đang chuẩn bị ghi log giao dịch. Giai đoạn: no-run, Thư mục con: None
2025-10-10 04:33:21,311 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_M15.png, Tối ưu hóa: False
2025-10-10 04:33:21,312 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_H1.png, Tối ưu hóa: False
2025-10-10 04:33:21,337 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:33:21,338 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_H1.png' lên Gemini File API...
2025-10-10 04:33:21,339 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:33:21,340 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_M5.png, nhưng chữ ký không khớp.
2025-10-10 04:33:21,341 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:21,343 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_M5.png, Tối ưu hóa: False
2025-10-10 04:33:21,343 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:33:21,369 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_M5.png' lên Gemini File API...
2025-10-10 04:33:21,450 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:21,459 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:21,461 - APP.persistence.log_handler - DEBUG - Đã ghi log giao dịch thành công vào trade_log_20251010.jsonl.
2025-10-10 04:33:21,464 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:21,466 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:33:21,491 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_M15.png' lên Gemini File API...
2025-10-10 04:33:21,491 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_M1.png, Tối ưu hóa: False
2025-10-10 04:33:21,493 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:21,552 - APP.persistence.log_handler - DEBUG - Kết thúc hàm log_trade.
2025-10-10 04:33:21,555 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:21,657 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:33:21,690 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:33:21,704 - APP.services.telegram_service - DEBUG - Đang khởi tạo TelegramClient từ cấu hình.
2025-10-10 04:33:21,709 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_M1.png' lên Gemini File API...
2025-10-10 04:33:21,843 - APP.services.telegram_service - INFO - Đang gửi tin nhắn đến chat_id: 90773...
2025-10-10 04:33:21,881 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:33:21,884 - APP.services.telegram_service - DEBUG - Đang tạo urllib opener với SSL context.
2025-10-10 04:33:21,898 - APP.services.telegram_service - DEBUG - Bắt đầu tạo SSL context. cafile: None, skip_verify: True
2025-10-10 04:33:22,028 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:33:22,162 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:33:22,169 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:33:22,176 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:33:22,287 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:33:22,442 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:33:22,464 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:22,523 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:22,523 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:22,532 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:22,532 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:22,535 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:22,572 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:33:23,500 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:33:23,513 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:33:23,552 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:33:23,570 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:23,619 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:23,619 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:23,661 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:23,711 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:23,789 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:33:23,790 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:23,879 - APP.services.telegram_service - DEBUG - Đã tạo SSL context với certifi.
2025-10-10 04:33:23,913 - APP.services.telegram_service - WARNING - !!! BỎ QUA XÁC MINH SSL (INSECURE) !!!
2025-10-10 04:33:23,923 - APP.services.telegram_service - DEBUG - Tạo SSL context thành công.
2025-10-10 04:33:23,964 - APP.services.telegram_service - DEBUG - Đang thực hiện API call (POST) đến method 'sendMessage'.
2025-10-10 04:33:24,667 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:24,670 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:24,670 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:24,711 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:24,748 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:24,750 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:24,774 - APP.services.telegram_service - DEBUG - Cuộc gọi API (POST) thành công. OK=True.
2025-10-10 04:33:24,881 - APP.core.analysis_worker - INFO - Giai đoạn 2 thoát sớm: Điều kiện No-Run: Không chạy ngoài các Kill Zone đã định nghĩa.
2025-10-10 04:33:24,937 - APP.utils.threading_utils - DEBUG - Task song song '_execute_stage_2_logic' hoàn tất thành công.
2025-10-10 04:33:25,712 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:25,713 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:25,713 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:25,714 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:25,714 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:25,715 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:25,961 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/gkbf2v3dar5l. Đang chờ trạng thái ACTIVE.
2025-10-10 04:33:25,963 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/s4wc502fin2b. Đang chờ trạng thái ACTIVE.
2025-10-10 04:33:25,985 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/hs15uz3ffq5i. Đang chờ trạng thái ACTIVE.
2025-10-10 04:33:26,411 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/43yqszqox9vo. Đang chờ trạng thái ACTIVE.
2025-10-10 04:33:26,608 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_M5.png': ACTIVE. Thời gian đã trôi qua: 0.6s
2025-10-10 04:33:26,608 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_M5.png'.
2025-10-10 04:33:26,609 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M5.png: 16856:1760070774:3012fbd8325b7b17
2025-10-10 04:33:26,610 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_M5.png trong cache với tên từ xa files/gkbf2v3dar5l.
2025-10-10 04:33:26,610 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-043321.3' (group=analysis.upload) hoàn tất sau 5.30s
2025-10-10 04:33:26,614 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_M1.png': ACTIVE. Thời gian đã trôi qua: 0.7s
2025-10-10 04:33:26,614 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_M1.png'.
2025-10-10 04:33:26,616 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M1.png: 16625:1760070769:afa9caac90290b7e
2025-10-10 04:33:26,616 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_M1.png trong cache với tên từ xa files/s4wc502fin2b.
2025-10-10 04:33:26,617 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-043321.1' (group=analysis.upload) hoàn tất sau 5.34s
2025-10-10 04:33:26,641 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_H1.png': ACTIVE. Thời gian đã trôi qua: 0.6s
2025-10-10 04:33:26,642 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_H1.png'.
2025-10-10 04:33:26,648 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_H1.png: 17699:1760070784:18766ca313a53d41
2025-10-10 04:33:26,649 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_H1.png trong cache với tên từ xa files/hs15uz3ffq5i.
2025-10-10 04:33:26,649 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-043321.0' (group=analysis.upload) hoàn tất sau 5.38s
2025-10-10 04:33:26,713 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:33:26,714 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:33:26,715 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:26,716 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:26,716 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:26,717 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:26,718 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:26,718 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:26,815 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:33:26,816 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:33:27,051 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_M15.png': ACTIVE. Thời gian đã trôi qua: 0.6s
2025-10-10 04:33:27,051 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_M15.png'.
2025-10-10 04:33:27,052 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M15.png: 17217:1760070779:51403658126cad5e
2025-10-10 04:33:27,053 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_M15.png trong cache với tên từ xa files/43yqszqox9vo.
2025-10-10 04:33:27,053 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-043321.2' (group=analysis.upload) hoàn tất sau 5.78s
2025-10-10 04:33:27,054 - APP.analysis.image_processor - DEBUG - Đang lưu cache upload với 4 mục.
2025-10-10 04:33:27,055 - APP.analysis.image_processor - DEBUG - Đã lưu cache upload thành công.
2025-10-10 04:33:27,055 - APP.utils.threading_utils - DEBUG - Task song song '_execute_stage_3_logic' hoàn tất thành công.
2025-10-10 04:33:27,056 - APP.core.analysis_worker - WARNING - Một trong các giai đoạn song song đã thất bại. Dừng worker.
2025-10-10 04:33:27,057 - APP.core.analysis_worker - INFO - Worker đã thoát một cách có kiểm soát: Thoát sớm do lỗi ở Giai đoạn 2 hoặc 3.
2025-10-10 04:33:27,057 - APP.core.analysis_worker - DEBUG - GIAI ĐOẠN 6: Hoàn tất và dọn dẹp.
2025-10-10 04:33:27,057 - APP.core.analysis_worker - DEBUG - Kết thúc AnalysisWorker.run.
2025-10-10 04:33:27,058 - APP.utils.threading_utils - DEBUG - Task 'analysis.session.autorun-20251010-043321' (group=analysis.session) hoàn tất sau 5.92s
2025-10-10 04:33:27,119 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:33:27,120 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:33:27,221 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:33:27,222 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:33:27,323 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:33:27,325 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:33:27,325 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: _finalize_done
2025-10-10 04:33:27,327 - APP.ui.utils.ui_builder - DEBUG - Đã thay đổi trạng thái nút Start/Stop thành 'normal'. Các điều khiển khác không bị ảnh hưởng.
2025-10-10 04:33:27,327 - APP.ui.app_ui - DEBUG - Lên lịch chạy tự động tiếp theo sau 60000ms.
2025-10-10 04:33:27,328 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:33:27,328 - APP.core.analysis_controller - INFO - Kết thúc session autorun-20251010-043321: {'status': 'completed', 'early_exit': True}
2025-10-10 04:33:27,718 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:27,719 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:27,719 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:27,720 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:27,720 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:27,721 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:28,720 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:28,721 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:28,721 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:28,722 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:28,722 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:28,723 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:29,363 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:33:29,364 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:33:29,365 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:33:29,448 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:33:29,723 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:29,724 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:29,725 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:29,725 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:29,725 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:29,726 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:30,725 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:30,726 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:30,727 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:30,727 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:30,728 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:30,728 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:31,728 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:31,728 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:31,729 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:31,729 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:31,730 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:31,730 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:32,730 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:32,731 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:32,731 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:32,732 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:32,733 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:32,733 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:33,735 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:33,735 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:33,736 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:33,736 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:33,737 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:33,737 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:34,737 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:34,737 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:34,738 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:34,738 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:34,739 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:34,739 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:35,739 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:35,739 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:35,740 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:35,741 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:35,741 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:35,741 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:36,741 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:36,742 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:36,742 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:36,743 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:36,743 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:36,744 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:37,744 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:37,745 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:37,745 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:37,746 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:37,746 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:37,746 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:38,747 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:38,747 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:38,748 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:38,748 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:38,749 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:38,749 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:39,749 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:39,750 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:39,750 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:39,751 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:39,752 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:39,752 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:40,752 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:40,752 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:40,753 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:40,753 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:40,754 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:40,754 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:41,754 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:41,755 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:41,755 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:41,755 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:41,756 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:41,756 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:42,757 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:42,758 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:42,758 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:42,759 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:42,759 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:42,760 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:43,761 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:43,762 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:43,762 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:43,763 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:43,764 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:43,764 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:44,366 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:33:44,367 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:33:44,368 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:33:44,379 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:33:44,764 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:44,765 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:44,765 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:44,766 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:44,766 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:44,767 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:45,767 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:45,767 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:45,767 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:45,768 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:45,769 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:45,769 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:46,771 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:46,771 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:46,772 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:46,772 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:46,773 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:46,773 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:47,773 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:47,774 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:47,774 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:47,775 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:47,775 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:47,776 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:48,775 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:48,776 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:48,777 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:48,777 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:48,778 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:48,778 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:49,778 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:49,779 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:49,779 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:49,780 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:49,782 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:49,782 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:50,782 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:50,783 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:50,783 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:50,784 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:50,784 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:50,785 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:51,785 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:51,786 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:51,786 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:51,787 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:51,787 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:51,788 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:52,789 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:52,789 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:52,790 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:52,790 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:52,791 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:52,791 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:53,791 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:53,792 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:53,792 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:53,793 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:53,794 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:53,794 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:54,794 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:54,795 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:54,795 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:54,796 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:54,797 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:54,797 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:55,796 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:55,797 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:55,797 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:55,798 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:55,798 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:55,799 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:56,798 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:56,799 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:56,799 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:56,800 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:56,800 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:56,801 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:57,800 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:57,801 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:57,801 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:57,802 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:57,802 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:57,803 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:58,802 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:58,803 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:58,803 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:58,804 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:58,805 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:58,805 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:33:59,371 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:33:59,371 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:33:59,372 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:33:59,382 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:33:59,805 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:59,805 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:33:59,806 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:59,807 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:33:59,807 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:33:59,808 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:00,807 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:00,808 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:00,808 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:00,809 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:00,809 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:00,810 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:01,810 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:01,811 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:01,811 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:01,812 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:01,812 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:01,813 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:02,812 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:02,813 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:02,813 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:02,814 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:02,814 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:02,815 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:03,815 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:03,816 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:03,816 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:03,817 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:03,818 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:03,818 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:04,818 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:04,819 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:04,819 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:04,820 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:04,820 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:04,821 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:05,821 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:05,822 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:05,822 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:05,822 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:05,823 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:05,823 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:06,823 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:06,823 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:06,824 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:06,824 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:06,825 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:06,825 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:07,825 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:07,826 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:07,826 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:07,827 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:07,827 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:07,828 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:08,827 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:08,828 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:08,828 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:08,829 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:08,830 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:08,830 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:09,830 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:09,831 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:09,831 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:09,832 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:09,832 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:09,833 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:10,834 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:10,834 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:10,835 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:10,836 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:10,836 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:10,836 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:11,836 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:11,836 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:11,837 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:11,837 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:11,838 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:11,838 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:12,838 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:12,839 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:12,839 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:12,840 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:12,840 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:12,841 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:13,841 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:13,841 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:13,842 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:13,842 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:13,843 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:13,843 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:14,374 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:34:14,375 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:34:14,377 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:34:14,394 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:34:14,843 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:14,844 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:14,844 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:14,845 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:14,845 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:14,846 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:15,845 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:15,846 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:15,846 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:15,847 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:15,847 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:15,848 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:16,848 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:16,849 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:16,849 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:16,850 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:16,850 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:16,851 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:17,851 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:17,852 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:17,852 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:17,853 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:17,853 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:17,854 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:18,854 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:18,855 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:18,855 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:18,856 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:18,857 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:18,857 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:19,857 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:19,858 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:19,859 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:19,859 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:19,860 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:19,860 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:20,860 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:20,861 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:20,861 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:20,862 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:20,862 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:20,863 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:21,863 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:21,864 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:21,864 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:21,865 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:21,865 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:21,866 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:22,865 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:22,866 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:22,866 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:22,867 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:22,868 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:22,869 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:23,868 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:23,869 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:23,869 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:23,870 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:23,871 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:23,871 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:24,870 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:24,871 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:24,871 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:24,873 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:24,873 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:24,873 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:25,873 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:25,873 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:25,874 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:25,874 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:25,875 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:25,875 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:26,875 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:26,876 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:26,877 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:26,878 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:26,879 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:26,879 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:27,328 - APP.ui.app_ui - INFO - Autorun tick: Kích hoạt worker kiểm tra.
2025-10-10 04:34:27,330 - APP.utils.threading_utils - DEBUG - Gửi task 'ui.autorun.guard' vào nhóm 'ui.autorun' (metadata={'component': 'analysis', 'operation': 'autorun_guard'})
2025-10-10 04:34:27,331 - APP.ui.controllers.io_controller - INFO - Đã gửi worker I/O ui.autorun.guard vào group ui.autorun (metadata={'component': 'analysis', 'operation': 'autorun_guard'})
2025-10-10 04:34:27,331 - APP.ui.app_ui - DEBUG - Autorun tick worker: Bắt đầu kiểm tra điều kiện.
2025-10-10 04:34:27,333 - APP.ui.app_ui - INFO - Autorun tick worker: Điều kiện hợp lệ, yêu cầu bắt đầu phân tích trên luồng UI.
2025-10-10 04:34:27,334 - APP.utils.threading_utils - DEBUG - Task 'ui.autorun.guard' (group=ui.autorun) hoàn tất sau 0.00s
2025-10-10 04:34:27,391 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: _request_autorun_start
2025-10-10 04:34:27,393 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:34:27,394 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:34:27,394 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:34:27,395 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:34:27,395 - APP.ui.app_ui - DEBUG - Bắt đầu chụp ảnh nhanh cấu hình từ UI.
2025-10-10 04:34:27,396 - APP.configs.app_config - DEBUG - Bắt đầu hàm __post_init__ của RunConfig.
2025-10-10 04:34:27,397 - APP.configs.app_config - DEBUG - RunConfig được khởi tạo: RunConfig(folder=FolderConfig(folder='C:/Users/leanhchi/AppData/Roaming/MetaQuotes/Terminal/D0E8209F77C8CF37AD8BF550E51FF075/MQL5/Files/Screenshots', delete_after=True, max_files=0, only_generate_if_changed=False), upload=UploadConfig(upload_workers=4, cache_enabled=True, optimize_lossless=False), image_processing=ImageProcessingConfig(max_width=1600, jpeg_quality=85), context=ContextConfig(ctx_limit=2000, create_ctx_json=True, prefer_ctx_json=True, ctx_json_n=5, remember_context=True, n_reports=1), telegram=TelegramConfig(enabled=True, token='8401224691:AAHu14vQxwnOlD9IBPsU1yp59nZ8Ta0mMYk', chat_id='907737980', skip_verify=True, ca_path='', notify_on_early_exit=True), mt5=MT5Config(enabled=True, symbol='XAUUSD', n_M1=120, n_M5=180, n_M15=96, n_H1=120), no_run=NoRunConfig(weekend_enabled=True, killzone_enabled=True, holiday_check_enabled=True, holiday_check_country='US', timezone='Asia/Ho_Chi_Minh'), no_trade=NoTradeConfig(enabled=True, spread_max_pips=4.2, min_atr_m5_pips=0.3, min_dist_keylvl_pips=5.0, allow_session_asia=True, allow_session_london=True, allow_session_ny=True), auto_trade=AutoTradeConfig(enabled=True, strict_bias=True, size_mode='risk_percent', risk_per_trade=1.0, split_tp_enabled=True, split_tp_ratio=50, deviation=20, magic_number=26092025, comment='AI-ICT', pending_ttl_min=90, min_rr_tp2=2.0, cooldown_min=10, dynamic_pending=True, dry_run=False, move_to_be_after_tp1=True, trailing_atr_mult=0.5, filling_type='IOC'), news=NewsConfig(block_enabled=True, block_before_min=5, block_after_min=5, cache_ttl_sec=600, provider_timeout_sec=20), fmp=FMPConfig(enabled=True, api_key='XL0taxDun2w72XyH70rVACj628PS0hxs'), te=TEConfig(enabled=True, api_key='2965e93128ff437:ovhzxu4u55gccrl', skip_ssl_verify=True), persistence=PersistenceConfig(max_md_reports=10, max_json_reports=10), chart=ChartConfig(timeframe='M1', num_candles=50, chart_type='Nến', refresh_interval_secs=1), api=ApiConfig(tries=5, delay=2.0), logging=LoggingConfig(log_dir='Log', log_file_name='app_debug.log', log_rotation_size_mb=5, log_rotation_backup_count=5))
2025-10-10 04:34:27,397 - APP.configs.app_config - DEBUG - Kết thúc hàm __post_init__ của RunConfig.
2025-10-10 04:34:27,958 - APP.services.te_service - INFO - Đăng nhập thành công vào Trading Economics API.
2025-10-10 04:34:27,958 - APP.services.news_service - DEBUG - Cấu hình NewsService đã được cập nhật.
2025-10-10 04:34:27,959 - APP.utils.threading_utils - DEBUG - Gửi task 'news.refresh.autorun' vào nhóm 'news.polling' (metadata={'component': 'news', 'priority': 'autorun', 'timeout_sec': 20})
2025-10-10 04:34:27,960 - APP.utils.threading_utils - INFO - Task 'news.refresh.autorun' (group=news.polling) bị hủy sau 0.00s
2025-10-10 04:34:27,960 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.session.autorun-20251010-043427' vào nhóm 'analysis.session' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-043427', 'priority': 'autorun'})
2025-10-10 04:34:27,960 - APP.ui.controllers.news_controller - DEBUG - Future news bị cancel, không cập nhật UI.
2025-10-10 04:34:27,961 - APP.core.analysis_controller - INFO - Đã submit phiên phân tích autorun-20251010-043427 (priority=autorun)
2025-10-10 04:34:27,961 - APP.core.analysis_worker - DEBUG - Bắt đầu AnalysisWorker.run với model: models/gemini-2.5-flash
2025-10-10 04:34:27,962 - APP.ui.app_ui - INFO - Autorun autorun-20251010-043427 bắt đầu ngay lập tức.
2025-10-10 04:34:27,962 - APP.core.analysis_worker - DEBUG - GIAI ĐOẠN 1: Khởi tạo và kiểm tra đầu vào.
2025-10-10 04:34:27,962 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:34:27,963 - APP.ui.utils.ui_builder - DEBUG - Đã thay đổi trạng thái nút Start/Stop thành 'disabled'. Các điều khiển khác không bị ảnh hưởng.
2025-10-10 04:34:27,965 - APP.ui.app_ui - INFO - Phiên autorun-20251010-043427 bắt đầu (priority=autorun, source=autorun).
2025-10-10 04:34:27,966 - APP.services.gemini_service - INFO - Đã khởi tạo model 'models/gemini-2.5-flash' thành công.
2025-10-10 04:34:27,966 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:27,968 - APP.core.analysis_worker - DEBUG - BẮT ĐẦU GIAI ĐOẠN 2: Xây dựng ngữ cảnh và kiểm tra điều kiện.
2025-10-10 04:34:27,969 - APP.core.trading.conditions - DEBUG - Bắt đầu kiểm tra các điều kiện NO-RUN.
2025-10-10 04:34:27,972 - APP.core.analysis_worker - DEBUG - BẮT ĐẦU GIAI ĐOẠN 3: Chuẩn bị và upload ảnh (TaskGroup analysis.upload).
2025-10-10 04:34:27,996 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:27,997 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:28,000 - APP.services.mt5_service - DEBUG - Bắt đầu get_active_killzone cho 2025-10-10 04:34:27.970171 với timezone Asia/Ho_Chi_Minh
2025-10-10 04:34:28,000 - APP.analysis.image_processor - DEBUG - Đang thử tải cache upload.
2025-10-10 04:34:28,001 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:28,002 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:28,026 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:28,027 - APP.services.mt5_service - DEBUG - Bắt đầu _killzone_ranges_vn. Date: 2025-10-10 04:34:27.970171+07:00, Target TZ: None
2025-10-10 04:34:28,028 - APP.services.mt5_service - DEBUG - Bắt đầu _is_us_dst cho ngày: 2025-10-10 04:34:27.970171+07:00
2025-10-10 04:34:28,028 - APP.services.mt5_service - DEBUG - Kết thúc _is_us_dst. Ngày 2025-10-10 04:34:27.970171+07:00 trong DST: True
2025-10-10 04:34:28,029 - APP.services.mt5_service - DEBUG - Is US DST (summer): True
2025-10-10 04:34:28,029 - APP.services.mt5_service - DEBUG - Đã tạo killzone ranges cho mùa hè.
2025-10-10 04:34:28,030 - APP.services.mt5_service - DEBUG - Không trong killzone nào.
2025-10-10 04:34:28,031 - APP.core.trading.conditions - INFO - Điều kiện NO-RUN được kích hoạt: Không chạy ngoài các Kill Zone đã định nghĩa.
2025-10-10 04:34:28,065 - APP.core.trading.conditions - INFO - Thoát sớm. Giai đoạn: no-run, Lý do: Không chạy ngoài các Kill Zone đã định nghĩa.
2025-10-10 04:34:28,091 - APP.persistence.log_handler - DEBUG - Đang chuẩn bị ghi log giao dịch. Giai đoạn: no-run, Thư mục con: None
2025-10-10 04:34:28,092 - APP.analysis.image_processor - DEBUG - Đã tải cache upload với 4 mục.
2025-10-10 04:34:28,096 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-043427.0' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-043427', 'index': 0})
2025-10-10 04:34:28,130 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-043427.1' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-043427', 'index': 1})
2025-10-10 04:34:28,131 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_H1.png: 17703:1760070865:8f71e0baa1c221af
2025-10-10 04:34:28,162 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-043427.2' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-043427', 'index': 2})
2025-10-10 04:34:28,163 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_H1.png, nhưng chữ ký không khớp.
2025-10-10 04:34:28,164 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M1.png: 16652:1760070850:42f719abd2b175cf
2025-10-10 04:34:28,164 - APP.utils.threading_utils - DEBUG - Gửi task 'analysis.upload.autorun-20251010-043427.3' vào nhóm 'analysis.upload' (metadata={'component': 'analysis', 'session_id': 'autorun-20251010-043427', 'index': 3})
2025-10-10 04:34:28,166 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M15.png: 16787:1760070860:24c7e2265d2f4b1e
2025-10-10 04:34:28,166 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_H1.png, Tối ưu hóa: False
2025-10-10 04:34:28,167 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_M1.png, nhưng chữ ký không khớp.
2025-10-10 04:34:28,169 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_M15.png, nhưng chữ ký không khớp.
2025-10-10 04:34:28,170 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M5.png: 15995:1760070855:66fe819316b7ac50
2025-10-10 04:34:28,170 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:34:28,170 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_M1.png, Tối ưu hóa: False
2025-10-10 04:34:28,171 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_M15.png, Tối ưu hóa: False
2025-10-10 04:34:28,171 - APP.analysis.image_processor - DEBUG - Cache hit cho XAUUSD_M5.png, nhưng chữ ký không khớp.
2025-10-10 04:34:28,172 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_H1.png' lên Gemini File API...
2025-10-10 04:34:28,172 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:34:28,173 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:34:28,173 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_M15.png' lên Gemini File API...
2025-10-10 04:34:28,175 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_M1.png' lên Gemini File API...
2025-10-10 04:34:28,177 - APP.persistence.log_handler - DEBUG - Đã ghi log giao dịch thành công vào trade_log_20251010.jsonl.
2025-10-10 04:34:28,177 - APP.analysis.image_processor - DEBUG - Đang chuẩn bị ảnh: XAUUSD_M5.png, Tối ưu hóa: False
2025-10-10 04:34:28,234 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:34:28,264 - APP.persistence.log_handler - DEBUG - Kết thúc hàm log_trade.
2025-10-10 04:34:28,267 - APP.analysis.image_processor - DEBUG - Bỏ qua tối ưu hóa hình ảnh.
2025-10-10 04:34:28,269 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:34:28,271 - APP.services.telegram_service - DEBUG - Đang khởi tạo TelegramClient từ cấu hình.
2025-10-10 04:34:28,277 - APP.analysis.image_processor - INFO - Đang tải 'XAUUSD_M5.png' lên Gemini File API...
2025-10-10 04:34:28,280 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:34:28,280 - APP.services.telegram_service - INFO - Đang gửi tin nhắn đến chat_id: 90773...
2025-10-10 04:34:28,416 - APP.services.telegram_service - DEBUG - Đang tạo urllib opener với SSL context.
2025-10-10 04:34:28,429 - APP.services.telegram_service - DEBUG - Bắt đầu tạo SSL context. cafile: None, skip_verify: True
2025-10-10 04:34:28,491 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:34:28,604 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:34:28,715 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:34:28,836 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:34:28,961 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:34:29,014 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:29,021 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:29,021 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:29,022 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:29,030 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:29,137 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:29,138 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:34:29,319 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:34:29,379 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:34:29,426 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:34:29,427 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:34:29,451 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:34:30,025 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:30,044 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:30,044 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:30,076 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:30,083 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:30,090 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:30,450 - APP.services.telegram_service - DEBUG - Đã tạo SSL context với certifi.
2025-10-10 04:34:30,451 - APP.services.telegram_service - WARNING - !!! BỎ QUA XÁC MINH SSL (INSECURE) !!!
2025-10-10 04:34:30,451 - APP.services.telegram_service - DEBUG - Tạo SSL context thành công.
2025-10-10 04:34:30,453 - APP.services.telegram_service - DEBUG - Đang thực hiện API call (POST) đến method 'sendMessage'.
2025-10-10 04:34:30,482 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:34:30,494 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:34:30,507 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:34:30,666 - googleapiclient.discovery - DEBUG - URL being requested: POST https://generativelanguage.googleapis.com/upload/v1beta/files?key=AIzaSyDSYUGBjTZkXmxIAA4ySZi6h1EepuAnoKE&alt=json&uploadType=resumable
2025-10-10 04:34:31,077 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:31,082 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:31,082 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:31,087 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:31,089 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:31,089 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:31,144 - APP.services.telegram_service - DEBUG - Cuộc gọi API (POST) thành công. OK=True.
2025-10-10 04:34:31,218 - APP.core.analysis_worker - INFO - Giai đoạn 2 thoát sớm: Điều kiện No-Run: Không chạy ngoài các Kill Zone đã định nghĩa.
2025-10-10 04:34:31,220 - APP.utils.threading_utils - DEBUG - Task song song '_execute_stage_2_logic' hoàn tất thành công.
2025-10-10 04:34:32,088 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:32,089 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:32,089 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:32,090 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:32,090 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:32,091 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:32,775 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/j0e9bw586xpn. Đang chờ trạng thái ACTIVE.
2025-10-10 04:34:32,787 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/gemwebwy8pyk. Đang chờ trạng thái ACTIVE.
2025-10-10 04:34:32,860 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/mq9rrywp4vuf. Đang chờ trạng thái ACTIVE.
2025-10-10 04:34:32,901 - APP.analysis.image_processor - DEBUG - Yêu cầu tải lên đã được gửi. Tên từ xa: files/avtw4mvusq13. Đang chờ trạng thái ACTIVE.
2025-10-10 04:34:33,092 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:33,092 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:33,093 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:33,094 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:33,094 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:33,094 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:33,407 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_M1.png': ACTIVE. Thời gian đã trôi qua: 0.6s
2025-10-10 04:34:33,407 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_M1.png'.
2025-10-10 04:34:33,410 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M1.png: 16652:1760070850:42f719abd2b175cf
2025-10-10 04:34:33,410 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_M1.png trong cache với tên từ xa files/j0e9bw586xpn.
2025-10-10 04:34:33,410 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-043427.1' (group=analysis.upload) hoàn tất sau 5.25s
2025-10-10 04:34:33,453 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_M5.png': ACTIVE. Thời gian đã trôi qua: 0.6s
2025-10-10 04:34:33,462 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_M5.png'.
2025-10-10 04:34:33,464 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M5.png: 15995:1760070855:66fe819316b7ac50
2025-10-10 04:34:33,465 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_M5.png trong cache với tên từ xa files/gemwebwy8pyk.
2025-10-10 04:34:33,465 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-043427.3' (group=analysis.upload) hoàn tất sau 5.30s
2025-10-10 04:34:33,526 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_M15.png': ACTIVE. Thời gian đã trôi qua: 0.7s
2025-10-10 04:34:33,528 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_M15.png'.
2025-10-10 04:34:33,529 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_M15.png: 16787:1760070860:24c7e2265d2f4b1e
2025-10-10 04:34:33,529 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_M15.png trong cache với tên từ xa files/mq9rrywp4vuf.
2025-10-10 04:34:33,529 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-043427.2' (group=analysis.upload) hoàn tất sau 5.36s
2025-10-10 04:34:33,568 - APP.analysis.image_processor - DEBUG - Kiểm tra trạng thái tệp cho 'XAUUSD_H1.png': ACTIVE. Thời gian đã trôi qua: 0.7s
2025-10-10 04:34:33,569 - APP.analysis.image_processor - INFO - Đã tải lên và xử lý thành công 'XAUUSD_H1.png'.
2025-10-10 04:34:33,570 - APP.analysis.image_processor - DEBUG - Đã tính toán chữ ký cho XAUUSD_H1.png: 17703:1760070865:8f71e0baa1c221af
2025-10-10 04:34:33,570 - APP.analysis.image_processor - DEBUG - Đã thêm/cập nhật XAUUSD_H1.png trong cache với tên từ xa files/avtw4mvusq13.
2025-10-10 04:34:33,571 - APP.utils.threading_utils - DEBUG - Task 'analysis.upload.autorun-20251010-043427.0' (group=analysis.upload) hoàn tất sau 5.44s
2025-10-10 04:34:33,572 - APP.analysis.image_processor - DEBUG - Đang lưu cache upload với 4 mục.
2025-10-10 04:34:33,573 - APP.analysis.image_processor - DEBUG - Đã lưu cache upload thành công.
2025-10-10 04:34:33,574 - APP.utils.threading_utils - DEBUG - Task song song '_execute_stage_3_logic' hoàn tất thành công.
2025-10-10 04:34:33,576 - APP.core.analysis_worker - WARNING - Một trong các giai đoạn song song đã thất bại. Dừng worker.
2025-10-10 04:34:33,576 - APP.core.analysis_worker - INFO - Worker đã thoát một cách có kiểm soát: Thoát sớm do lỗi ở Giai đoạn 2 hoặc 3.
2025-10-10 04:34:33,576 - APP.core.analysis_worker - DEBUG - GIAI ĐOẠN 6: Hoàn tất và dọn dẹp.
2025-10-10 04:34:33,577 - APP.core.analysis_worker - DEBUG - Kết thúc AnalysisWorker.run.
2025-10-10 04:34:33,577 - APP.utils.threading_utils - DEBUG - Task 'analysis.session.autorun-20251010-043427' (group=analysis.session) hoàn tất sau 5.62s
2025-10-10 04:34:33,668 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:34:33,669 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:34:33,770 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:34:33,771 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:34:33,872 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:34:33,872 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:34:33,973 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:34:33,974 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:34:34,074 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:34:34,075 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:34:34,076 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: _finalize_done
2025-10-10 04:34:34,077 - APP.ui.utils.ui_builder - DEBUG - Đã thay đổi trạng thái nút Start/Stop thành 'normal'. Các điều khiển khác không bị ảnh hưởng.
2025-10-10 04:34:34,077 - APP.ui.app_ui - DEBUG - Lên lịch chạy tự động tiếp theo sau 60000ms.
2025-10-10 04:34:34,078 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: <lambda>
2025-10-10 04:34:34,078 - APP.core.analysis_controller - INFO - Kết thúc session autorun-20251010-043427: {'status': 'completed', 'early_exit': True}
2025-10-10 04:34:34,094 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:34,095 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:34,095 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:34,096 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:34,096 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:34,109 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:35,096 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:35,097 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:35,097 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:35,098 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:35,099 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:35,099 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:36,098 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:36,099 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:36,099 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:36,100 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:36,100 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:36,101 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:37,100 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:37,101 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:37,102 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:37,103 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:37,103 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:37,103 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:38,103 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:38,104 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:38,104 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:38,105 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:38,106 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:38,106 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:39,129 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:39,142 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:39,142 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:39,160 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:39,161 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:39,189 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:40,161 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:40,162 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:40,162 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:40,163 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:40,163 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:40,164 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:41,165 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:41,166 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:41,166 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:41,167 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:41,167 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:41,168 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:42,168 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:42,168 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:42,169 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:42,169 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:42,170 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:42,170 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:43,171 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:43,171 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:43,172 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:43,172 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:43,173 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:43,173 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:44,175 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:44,176 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:44,176 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:44,177 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:44,177 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:44,178 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:44,457 - APP.utils.threading_utils - DEBUG - Gửi task 'mt5.check' vào nhóm 'mt5.check' (metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:34:44,458 - APP.ui.controllers.mt5_controller - INFO - Đã gửi tác vụ MT5 mt5.check (group=mt5.check, metadata={'component': 'mt5', 'operation': 'check'})
2025-10-10 04:34:44,459 - APP.utils.threading_utils - DEBUG - Task 'mt5.check' (group=mt5.check) hoàn tất sau 0.00s
2025-10-10 04:34:44,460 - APP.ui.utils.ui_builder - DEBUG - Executing UI callback: update_ui
2025-10-10 04:34:45,178 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:45,179 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:45,180 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:45,180 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:45,181 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:45,181 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:46,182 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:46,183 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:46,183 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:46,184 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:46,184 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:46,185 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:47,184 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.info' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:47,185 - APP.utils.threading_utils - DEBUG - Gửi task 'chart.draw' vào nhóm 'chart.refresh' (metadata={'symbol': 'XAUUSD', 'timeframe': 'M1', 'candles': 50, 'chart_type': 'Nến', 'component': 'chart'})
2025-10-10 04:34:47,186 - APP.utils.threading_utils - INFO - Task 'chart.info' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:47,186 - APP.utils.threading_utils - INFO - Task 'chart.draw' (group=chart.refresh) bị hủy sau 0.00s
2025-10-10 04:34:47,187 - APP.ui.controllers.chart_controller - DEBUG - Future chart.info bị cancel, không cập nhật UI.
2025-10-10 04:34:47,187 - APP.ui.controllers.chart_controller - DEBUG - Future chart.draw bị cancel, không cập nhật UI.
2025-10-10 04:34:47,786 - APP.ui.app_ui - INFO - Bắt đầu quy trình tắt ứng dụng an toàn.
2025-10-10 04:34:47,821 - APP.ui.controllers.chart_controller - INFO - Dừng ChartController stream hiện tại.
2025-10-10 04:34:47,851 - APP.ui.components.chart_tab - INFO - ChartTab đã dừng làm mới dữ liệu.
2025-10-10 04:34:47,899 - APP.ui.app_ui - DEBUG - Bắt đầu thu thập dữ liệu cấu hình từ UI.
2025-10-10 04:34:47,910 - APP.configs.workspace_config - DEBUG - Bắt đầu lưu cấu hình vào file.
2025-10-10 04:34:47,911 - APP.utils.general_utils - DEBUG - Bắt đầu obfuscate text với salt.
2025-10-10 04:34:47,911 - APP.utils.general_utils - DEBUG - Tạo machine key.
2025-10-10 04:34:47,912 - APP.utils.general_utils - DEBUG - Đã tạo machine key. Độ dài: 32 bytes.
2025-10-10 04:34:47,912 - APP.utils.general_utils - DEBUG - Thực hiện XOR bytes.
2025-10-10 04:34:47,913 - APP.utils.general_utils - DEBUG - Đã obfuscate text thành công.
2025-10-10 04:34:47,913 - APP.configs.workspace_config - DEBUG - Đã mã hóa thành công trường 'api_key' trong nhóm 'fmp'.
2025-10-10 04:34:47,913 - APP.utils.general_utils - DEBUG - Bắt đầu obfuscate text với salt.
2025-10-10 04:34:47,914 - APP.utils.general_utils - DEBUG - Tạo machine key.
2025-10-10 04:34:47,914 - APP.utils.general_utils - DEBUG - Đã tạo machine key. Độ dài: 32 bytes.
2025-10-10 04:34:47,914 - APP.utils.general_utils - DEBUG - Thực hiện XOR bytes.
2025-10-10 04:34:47,914 - APP.utils.general_utils - DEBUG - Đã obfuscate text thành công.
2025-10-10 04:34:47,915 - APP.configs.workspace_config - DEBUG - Đã mã hóa thành công trường 'api_key' trong nhóm 'te'.
2025-10-10 04:34:47,915 - APP.utils.general_utils - DEBUG - Bắt đầu obfuscate text với salt.
2025-10-10 04:34:47,916 - APP.utils.general_utils - DEBUG - Tạo machine key.
2025-10-10 04:34:47,916 - APP.utils.general_utils - DEBUG - Đã tạo machine key. Độ dài: 32 bytes.
2025-10-10 04:34:47,916 - APP.utils.general_utils - DEBUG - Thực hiện XOR bytes.
2025-10-10 04:34:47,917 - APP.utils.general_utils - DEBUG - Đã obfuscate text thành công.
2025-10-10 04:34:47,917 - APP.configs.workspace_config - DEBUG - Đã mã hóa thành công trường 'token' trong nhóm 'telegram'.
2025-10-10 04:34:47,919 - APP.configs.workspace_config - INFO - Cấu hình đã được lưu thành công vào C:\Users\leanhchi\.gemini_folder_analyze\workspace.json
2025-10-10 04:34:47,919 - APP.configs.workspace_config - DEBUG - Kết thúc lưu cấu hình vào file.
2025-10-10 04:34:47,920 - APP.ui.app_ui - INFO - Đã lưu cấu hình workspace thành công.
2025-10-10 04:34:47,920 - APP.services.mt5_service - INFO - Đang ngắt kết nối khỏi MetaTrader 5.
2025-10-10 04:34:47,922 - APP.services.mt5_service - INFO - Đã ngắt kết nối MT5 thành công.
2025-10-10 04:34:47,923 - APP.ui.app_ui - INFO - UI queue backlog khi shutdown: 0
2025-10-10 04:34:47,955 - APP.utils.threading_utils - INFO - ThreadingManager.shutdown(wait=True, timeout=5.0, force=False)
2025-10-10 04:34:48,936 - __main__ - INFO - Ứng dụng đã đóng thành công.
