
import math
import subprocess
from concurrent.futures import ThreadPoolExecutor, as_completed
from datetime import datetime, timedelta, timezone
import platform

import tkinter as tk
from tkinter import ttk, filedialog
from tkinter.scrolledtext import ScrolledText

HAS_MPL = False
try:
    import matplotlib  # type: ignore
    import mplfinance  # type: ignore
    HAS_MPL = True
except Exception:
    HAS_MPL = False

try:
    from dotenv import load_dotenv
except Exception:
    load_dotenv = None

try:
    import google.generativeai as genai
except Exception:
    print("Bạn cần cài SDK Gemini: pip install google-generativeai")
    sys.exit(1)

try:
    import MetaTrader5 as mt5
except Exception:
    mt5 = None

try:
    from PIL import Image
except Exce
